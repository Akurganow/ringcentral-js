{"version":3,"sources":["/source/rc-sdk.js","/source/core/pubnub/PubnubMock.js","/source/core/Utils.js","/source/core/Log.js","/source/core/xhr/XhrResponse.js","/source/core/xhr/XhrMock.js","/source/core/Context.js","/source/core/Observable.js","/source/core/AjaxObserver.js","/source/core/Ajax.js","/source/core/Cache.js","/source/core/Platform.js","/source/core/Subscription.js","/source/core/PageVisibility.js","/source/core/Helper.js","/source/core/Validator.js","/source/core/List.js","/source/helpers/Country.js","/source/helpers/DeviceModel.js","/source/helpers/Language.js","/source/helpers/State.js","/source/helpers/Location.js","/source/helpers/ShippingMethod.js","/source/helpers/Timezone.js","/source/helpers/Account.js","/source/helpers/BlockedNumber.js","/source/helpers/Extension.js","/source/helpers/Presence.js","/source/helpers/Contact.js","/source/helpers/Call.js","/source/helpers/Conferencing.js","/source/helpers/ContactGroup.js","/source/helpers/Device.js","/source/helpers/ForwardingNumber.js","/source/helpers/Message.js","/source/helpers/PhoneNumber.js","/source/helpers/Ringout.js","/source/helpers/Service.js","/source/RCSDK.js","/source/umd.js"],"names":["core_pubnub_PubnubMock","core_Utils","core_Log","core_xhr_XhrResponse","core_xhr_XhrMock","core_Context","core_Observable","core_AjaxObserver","core_Ajax","core_Cache","core_Platform","core_Subscription","core_PageVisibility","core_Helper","core_Validator","core_List","helpers_Country","helpers_DeviceModel","helpers_Language","helpers_State","helpers_Location","helpers_ShippingMethod","helpers_Timezone","helpers_Account","helpers_BlockedNumber","helpers_Extension","helpers_Presence","helpers_Contact","helpers_Call","helpers_Conferencing","helpers_ContactGroup","helpers_Device","helpers_ForwardingNumber","helpers_Message","helpers_PhoneNumber","helpers_Ringout","helpers_Service","RCSDK","exports","WS","url","pubnub","ready","onmessage","onclose","onerror","onopen","close","code","reason","wasClean","receiveMessage","data","$get","ws","hasOwn","Object","prototype","hasOwnProperty","toString","rdigit","class2type","split","forEach","name","toLowerCase","Utils","extend","options","src","copy","copyIsArray","clone","target","arguments","i","length","deep","isFunction","isPlainObject","isArray","undefined","object","cb","res","queryStringify","parameters","array","self","v","vv","push","encodeURIComponent","join","parseQueryString","queryString","argsParsed","arg","decodeURIComponent","indexOf","trim","pair","key","value","isEmail","multiple","test","isPhoneNumber","argumentsToArray","args","Array","slice","call","isDate","obj","type","isWindow","isNaN","String","nodeType","constructor","getProperty","property","eval","e","poll","fn","interval","timeout","stopPolling","next","delay","setTimeout","clearTimeout","parseString","s","parseNumber","n","parseFloat","Log","logDebug","logInfo","logWarnings","logErrors","addTimestamps","console","log","warn","info","error","disableAll","enableAll","parseArguments","unshift","Date","toLocaleString","debug","apply","XhrResponse","responses","add","response","clear","find","ajax","currentResponse","path","Class","context","createSingleton","XhrMock","async","method","requestHeaders","withCredentials","readyState","responseHeaders","status","getResponseHeader","header","setRequestHeader","open","send","contentType","getRequestHeader","JSON","parse","Error","bind","setStatus","setResponseHeader","stringify","responseText","onload","abort","Context","injections","singletons","stubPubnub","stubAjax","factory","usePubnubStub","flag","useAjaxStub","getCryptoJS","CryptoJS","getPubnub","PUBNUB","getLocalStorage","localStorage","getPromise","Promise","getXHR","XHR","Observable","defineProperty","enumerable","writable","hasListeners","event","listeners","registerOneTimeEvent","oneTimeEvents","oneTimeArguments","on","events","callback","isOneTimeEventFired","getOneTimeEventArgumens","emit","splice","result","isOneTimeEvent","setOneTimeEventFired","setOneTimeEventArgumens","some","off","offAll","destroy","emitAndCallback","concat","AjaxObserver","create","beforeRequest","requestSuccess","requestError","Ajax","headers","observer","xhr","jsonContentType","multipartContentType","boundarySeparator","headerSeparator","bodySeparator","getOptions","setOptions","isResponseContentType","getResponseContentType","isResponseMultipart","isResponseUnauthorized","getContentType","isMultipart","isUnauthorized","isLoaded","checkOptions","defaultHeaders","keys","toUpperCase","get","post","resolve","then","request","parseResponse","catch","reject","checkStatus","substr","boundary","match","parts","shift","pop","map","part","subParts","replace","ajaxPart","headerParts","statusInfo","stack","message","error_description","description","Cache","prefix","storage","prefixKey","setItem","removeItem","getItem","item","clean","Platform","server","apiKey","account","urlPrefix","apiVersion","accountPrefix","accessTokenTtl","refreshTokenTtl","refreshTokenTtlRemember","refreshHandicapMs","clearCacheOnRefreshError","refreshPromise","forcedTokenType","cacheId","pollInterval","releaseTimeout","accessViolation","logoutSuccess","logoutError","authorizeSuccess","authorizeError","refreshSuccess","refreshError","getStorage","getAjax","clearStorage","remember","authorize","authCall","username","extension","password","setCache","isPaused","now","parseInt","pause","resume","refresh","refreshPolling","authData","getAuthData","access_token","refresh_token","refreshExpireTime","logout","token","getToken","isTokenValid","getTokenType","token_type","expires_in","refresh_token_expires_in","expireTime","getTime","isAuthorized","cancelAccessToken","oldAuthData","forceAuthentication","apiCall","apiUrl","addServer","Authorization","builtUrl","addMethod","addToken","Subscription","eventFilters","subscription","expirationTime","expiresIn","deliveryMode","transportType","encryption","address","subscriberKey","secretKey","id","creationTime","uri","socket","renewHandicapMs","notification","removeSuccess","removeError","renewSuccess","renewError","subscribeSuccess","subscribeError","createPubnub","getCrypto","getPlatform","register","isSubscribed","renew","subscribe","addEvents","setEvents","getFullEventFilters","updateSubscription","subscribeAtPubnub","unsubscribe","remove","timeToExpiration","CLOSE_NORMAL","notify","encryptionKey","enc","Base64","decrypted","AES","decrypt","ciphertext","mode","ECB","padding","pad","Pkcs7","Utf8","PageVisibility","onchange","evt","window","h","evtMap","focus","focusin","pageshow","blur","focusout","pagehide","visible","document","hidden","change","addEventListener","onfocusin","onfocusout","onpageshow","onpagehide","onfocus","onblur","isVisible","Helper","defaultProperty","getContext","createUrl","getId","isNew","getUri","resetAsNew","parseMultipartResponse","filter","loadRequest","saveRequest","deleteRequest","syncRequest","sync","syncToken","syncType","nextPageExists","navigation","index","getIdFn","gather","reduce","merge","supplement","mergeItems","supplementIndex","updatedIDs","newItem","Validator","validate","validators","errors","isValid","validator","field","email","phone","required","max","min","List","propertyExtractor","stringComparator","a","b","localeCompare","numberComparator","comparator","item1","item2","compareFn","extractFn","sortBy","equalsFilter","condition","containsFilter","regexpFilter","RegExp","filterConfigs","pass","opt","filterFn","filterBy","CountryHelper","DeviceModelHelper","device","addons","count","cleanForSaving","deviceClass","addon","devices","LanguageHelper","languages","StateHelper","countryHelper","countryId","opts","country","LocationHelper","state","uniqueNPAs","stateId","onlyUniqueNPA","npa","nxx","ShippingMethodHelper","shippingMethods","TimezoneHelper","AccountHelper","BlockedNumberHelper","extensionId","phoneNumber","ExtensionHelper","department","user","announcement","voicemail","departmentId","isUser","isDepartment","isAnnouncement","isVoicemail","search","toLocaleLowerCase","extensionNumber","PresenceHelper","detailed","presence","isAvailable","presenceStatus","getSubscription","presences","attachToExtensions","extensions","isCallInProgress","presenceCall","telephonyStatus","ContactHelper","root","groupId","getFieldValues","where","fields","asHash","getFullName","contact","nameFields","getEmails","emailFields","getPhones","phoneFields","getFaxes","faxFields","getAddresses","addressFields","isAlive","availability","string","matchWith","found","transformed","transformFn","strict","otherFields","inAddresses","addressSubFields","subField","matchAsPhone","attachToCallerInfos","callerInfos","contacts","callerInfoIndex","callerInfo","indexedCallerInfos","foundContact","foundPhone","contactPhone","alive","startsWith","phonesOnly","faxesOnly","firstName","lastName","email2","email3","CallHelper","personal","active","getSessionId","sessionId","isInProgress","isInbound","direction","isOutbound","isMissed","isFindMe","action","getCallerInfo","from","to","getAllCallerInfos","formatDuration","addZero","duration","hours","Math","floor","mins","secs","attachContacts","calls","checkMergeability","outboundRingOutCall","inboundCall","dateString","startTime","abs","maxStartTimeDiscrepancy","combineCalls","hasSubsequent","subsequent","processCalls","processedCalls","callsToMerge","merged","secondCall","parsePresenceCalls","activeCalls","activeCall","getSignature","cleanup","mergePresenceCalls","presenceCalls","currentDate","toISOString","mergeAll","presenceAndCalls","ConferencingHelper","ContactGroupHelper","groupName","DeviceHelper","deviceModel","order","emergencyServiceAddress","street","city","zip","customerName","model","ForwardingNumberHelper","forwardingNumber","hasFeature","feature","features","MessageHelper","platform","fax","sms","pager","isSMS","isPager","isVoiceMail","isFax","isRead","readStatus","setIsRead","getAttachmentUrl","attachments","getAttachmentContentType","getCallerInfos","conversationId","messages","shorten","text","subject","validateSMS","validatePager","PhoneNumberHelper","lookup","reserve","date","reservedTill","unreserve","usageType","paymentType","RingoutHelper","ringout","callStatus","isSuccess","isError","ServiceHelper","isServiceFeatureEnabledMethod","serviceFeatures","isEnabled","f","featureName","enabled","isSmsEnabled","isSmsReceivingEnabled","isPresenceEnabled","isRingOutEnabled","isInternationalCallingEnabled","isDndEnabled","isFaxEnabled","isFaxReceivingEnabled","isVoicemailEnabled","isPagerEnabled","isPagerReceivingEnabled","isVoipCallingEnabled","isVideoConferencingEnabled","isSalesForceEnabled","isIntercomEnabled","isPagingEnabled","isConferencingEnabled","isFreeSoftPhoneLinesEnabled","isHipaaComplianceEnabled","isCallParkEnabled","isOnDemandCallRecordingEnabled","_context","XMLHttpRequest","ActiveXObject","e1","e2","e3","getPUBNUB","version","getAjaxObserver","getXhrResponse","getCache","getPageVisibility","getHelper","getObservable","getValidator","getLog","getUtils","getList","getCountryHelper","getDeviceModelHelper","getLanguageHelper","getLocationHelper","getShippingMethodHelper","getStateHelper","getTimezoneHelper","getAccountHelper","getBlockedNumberHelper","getCallHelper","getConferencingHelper","getContactHelper","getContactGroupHelper","getDeviceHelper","getExtensionHelper","getForwardingNumberHelper","getMessageHelper","getPhoneNumberHelper","getPresenceHelper","getRingoutHelper","getServiceHelper","Function","module","require","define","amd","noConflict","old"],"mappings":"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","file":"rc-sdk.min.js","sourcesContent":[null,"/**\n * istanbul ignore next\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/pubnub/PubnubMock', [\n    'require',\n    'exports',\n    'module'\n], function (require, exports, module) {\n    'use strict';\n    function WS(url) {\n        this.url = url;\n        this.pubnub = {\n            ready: function () {\n            }\n        };\n        this.onmessage = function () {\n        };\n        this.onclose = function () {\n        };\n        this.onerror = function () {\n        };\n        this.onopen = function () {\n        };\n        this.close = function (code, reason) {\n            this.onclose({\n                code: code,\n                reason: reason,\n                wasClean: true\n            });\n        };\n        /**\n         * This stub allows to simulate message arrival\n         * @param data\n         */\n        this.receiveMessage = function (data) {\n            this.onmessage({ data: data });\n        };\n        this.onopen();\n    }\n    /**\n     * @alias RCSDK.core.pubnub.Mock\n     * @type {PUBNUB}\n     */\n    module.exports = {\n        /**\n         * @param {Context} context\n         * @returns {PUBNUB}\n         */\n        $get: function (context) {\n            return { ws: WS };\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Utils', [\n    'require',\n    'exports',\n    'module'\n], function (require, exports, module) {\n    'use strict';\n    var hasOwn = Object.prototype.hasOwnProperty, toString = Object.prototype.toString, rdigit = /\\d/, class2type = {};\n    // Populate the class2type map\n    'Boolean Number String Function Array Date RegExp Object'.split(' ').forEach(function (name) {\n        class2type['[object ' + name + ']'] = name.toLowerCase();\n    });\n    /**\n     * @alias RCSDK.core.Utils\n     * @name Utils\n     */\n    var Utils = module.exports = {\n        /**\n         * Ported from jQuery.fn.extend\n         * Optional first parameter makes deep copy\n         * @param {object} targetObject\n         * @param {object} sourceObject\n         * @returns {object}\n         */\n        extend: function extend(targetObject, sourceObject) {\n            var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;\n            // Handle a deep copy situation\n            if (typeof target === 'boolean') {\n                deep = target;\n                // skip the boolean and the target\n                target = arguments[i] || {};\n                i++;\n            }\n            // Handle case when target is a string or something (possible in deep copy)\n            if (typeof target !== 'object' && !this.isFunction(target)) {\n                target = {};\n            }\n            for (; i < length; i++) {\n                // Only deal with non-null/undefined values\n                if ((options = arguments[i]) != null) {\n                    // Extend the base object\n                    for (name in options) {\n                        src = target[name];\n                        copy = options[name];\n                        // Prevent never-ending loop\n                        if (target === copy) {\n                            continue;\n                        }\n                        // Recurse if we're merging plain objects or arrays\n                        if (deep && copy && (this.isPlainObject(copy) || (copyIsArray = this.isArray(copy)))) {\n                            if (copyIsArray) {\n                                copyIsArray = false;\n                                clone = src && this.isArray(src) ? src : [];\n                            } else {\n                                clone = src && this.isPlainObject(src) ? src : {};\n                            }\n                            // Never move original objects, clone them\n                            target[name] = this.extend(deep, clone, copy);    // Don't bring in undefined values\n                        } else if (copy !== undefined) {\n                            target[name] = copy;\n                        }\n                    }\n                }\n            }\n            // Return the modified object\n            return target;\n        },\n        forEach: function (object, cb) {\n            for (var i in object) {\n                if (!object.hasOwnProperty(i))\n                    continue;\n                var res = cb(object[i], i);\n                if (res === false)\n                    break;\n            }\n        },\n        /**\n         * TODO Replace with something better\n         * @see https://github.com/joyent/node/blob/master/lib/querystring.js\n         * @param {object} parameters\n         * @returns {string}\n         */\n        queryStringify: function (parameters) {\n            var array = [], self = this;\n            this.forEach(parameters, function (v, i) {\n                if (self.isArray(v)) {\n                    v.forEach(function (vv) {\n                        array.push(encodeURIComponent(i) + '=' + encodeURIComponent(vv));\n                    });\n                } else {\n                    array.push(encodeURIComponent(i) + '=' + encodeURIComponent(v));\n                }\n            });\n            return array.join('&');\n        },\n        /**\n         * TODO Replace with something better\n         * @see https://github.com/joyent/node/blob/master/lib/querystring.js\n         * @param {string} queryString\n         * @returns {object}\n         */\n        parseQueryString: function (queryString) {\n            var argsParsed = {}, self = this;\n            queryString.split('&').forEach(function (arg) {\n                arg = decodeURIComponent(arg);\n                if (arg.indexOf('=') == -1) {\n                    argsParsed[arg.trim()] = true;\n                } else {\n                    var pair = arg.split('='), key = pair[0].trim(), value = pair[1].trim();\n                    if (key in argsParsed) {\n                        if (key in argsParsed && !self.isArray(argsParsed[key]))\n                            argsParsed[key] = [argsParsed[key]];\n                        argsParsed[key].push(value);\n                    } else {\n                        argsParsed[key] = value;\n                    }\n                }\n            });\n            return argsParsed;\n        },\n        /**\n         * Returns true if the passed value is valid email address.\n         * @param {string} v\n         * @param {boolean} multiple Checks multiple comma separated emails according to RFC 2822\n         * @returns {boolean}\n         */\n        isEmail: function (v, multiple) {\n            if (!!multiple) {\n                //this Regexp is also suitable for multiple emails (comma separated)\n                return /^(?:[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?[ ,;]*)+$/i.test(v);\n            } else {\n                return /^[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(v);\n            }\n        },\n        isPhoneNumber: function (v) {\n            return /\\+?1[0-9]{3}[0-9a-z]{7}/im.test(v.toString().split(/[^0-9a-z\\+]/im).join(''));\n        },\n        /**\n         * @param args\n         * @returns {Array}\n         */\n        argumentsToArray: function (args) {\n            return Array.prototype.slice.call(args || [], 0);\n        },\n        isDate: function (obj) {\n            return this.type(obj) === 'date';\n        },\n        isFunction: function (obj) {\n            return this.type(obj) === 'function';\n        },\n        isArray: Array.isArray || function (obj) {\n            return this.type(obj) === 'array';\n        },\n        // A crude way of determining if an object is a window\n        isWindow: function (obj) {\n            return obj && typeof obj === 'object' && 'setInterval' in obj;\n        },\n        isNaN: function (obj) {\n            return obj == null || !rdigit.test(obj) || isNaN(obj);\n        },\n        type: function (obj) {\n            return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object';\n        },\n        isPlainObject: function (obj) {\n            // Must be an Object.\n            // Because of IE, we also have to check the presence of the constructor property.\n            // Make sure that DOM nodes and window objects don't pass through, as well\n            if (!obj || this.type(obj) !== 'object' || obj.nodeType || this.isWindow(obj)) {\n                return false;\n            }\n            // Not own constructor property must be Object\n            if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\n                return false;\n            }\n            // Own properties are enumerated firstly, so to speed up,\n            // if last one is own, then all properties are own.\n            var key;\n            for (key in obj) {\n            }\n            return key === undefined || hasOwn.call(obj, key);\n        },\n        getProperty: function (obj, property) {\n            try {\n                return eval('obj.' + property);    //TODO Refactor\n            } catch (e) {\n                return undefined;\n            }\n        },\n        poll: function (fn, interval, timeout) {\n            this.stopPolling(timeout);\n            interval = interval || 1000;\n            var next = function (delay) {\n                delay = delay || interval;\n                interval = delay;\n                return setTimeout(function () {\n                    fn(next, delay);\n                }, delay);\n            };\n            return next();\n        },\n        stopPolling: function (timeout) {\n            timeout && clearTimeout(timeout);\n        },\n        parseString: function (s) {\n            return s ? s.toString() : '';\n        },\n        parseNumber: function (n) {\n            if (!n)\n                return 0;\n            n = parseFloat(n);\n            return isNaN(n) ? 0 : n;\n        },\n        $get: function (context) {\n            return Utils;\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Log', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils'\n], function (require, exports, module) {\n    'use strict';\n    var Utils = require('./Utils');\n    /**\n     * @alias RCSDK.core.Log\n     * @name Log\n     */\n    var Log = module.exports = {\n        logDebug: false,\n        logInfo: false,\n        logWarnings: false,\n        logErrors: false,\n        addTimestamps: true,\n        /** @type {Console} */\n        console: console || {\n            // safety\n            log: function () {\n            },\n            warn: function () {\n            },\n            info: function () {\n            },\n            error: function () {\n            }\n        },\n        disableAll: function () {\n            this.logDebug = false;\n            this.logInfo = false;\n            this.logWarnings = false;\n            this.logErrors = false;\n        },\n        enableAll: function () {\n            this.logDebug = true;\n            this.logInfo = true;\n            this.logWarnings = true;\n            this.logErrors = true;\n        },\n        parseArguments: function (args) {\n            args = Utils.argumentsToArray(args);\n            if (this.addTimestamps)\n                args.unshift(new Date().toLocaleString(), '-');\n            return args;\n        },\n        debug: function () {\n            if (this.logDebug)\n                this.console.log.apply(this.console, this.parseArguments(arguments));\n        },\n        info: function () {\n            if (this.logInfo)\n                this.console.info.apply(this.console, this.parseArguments(arguments));\n        },\n        warn: function () {\n            if (this.logWarnings)\n                this.console.warn.apply(this.console, this.parseArguments(arguments));\n        },\n        error: function () {\n            if (this.logErrors)\n                this.console.error.apply(this.console, this.parseArguments(arguments));\n        },\n        $get: function (context) {\n            return Log;\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/xhr/XhrResponse', [\n    'require',\n    'exports',\n    'module'\n], function (require, exports, module) {\n    'use strict';\n    /**\n     * Ajax Response Manager\n     * @constructor\n     * @alias RCSDK.core.XhrResponse\n     */\n    function XhrResponse() {\n        /** @type {IXhrResponse[]} */\n        this.responses = [];\n    }\n    /**\n     * @param {IXhrResponse} response\n     */\n    XhrResponse.prototype.add = function (response) {\n        this.responses.push(response);\n    };\n    XhrResponse.prototype.clear = function () {\n        this.responses = [];\n    };\n    /**\n     * @param {XhrMock} ajax\n     * @returns {IXhrResponse}\n     */\n    XhrResponse.prototype.find = function (ajax) {\n        var currentResponse = null;\n        this.responses.forEach(function (response) {\n            if (ajax.url.indexOf(response.path) > -1 && (!response.test || response.test(ajax))) {\n                currentResponse = response;\n            }\n        });\n        return currentResponse;\n    };\n    module.exports = {\n        Class: XhrResponse,\n        /**\n         * @static\n         * @param {Context} context\n         * @returns {XhrResponse}\n         */\n        $get: function (context) {\n            return context.createSingleton('XhrResponse', function () {\n                return new XhrResponse(context);\n            });\n        }\n    };    /**\n     * @typedef {Object} IXhrResponse\n     * @property {string} path\n     * @property {function(Ajax)} response Response mock function\n     * @property {function(Ajax)} test? This will be executed to determine, whether this mock is applicable\n     */\n});","/**\n * istanbul ignore next\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/xhr/XhrMock', [\n    'require',\n    'exports',\n    'module',\n    'core/Log',\n    'core/Utils',\n    'core/xhr/XhrResponse'\n], function (require, exports, module) {\n    'use strict';\n    var Log = require('../Log'), Utils = require('../Utils');\n    /**\n     * @constructor\n     * @alias RCSDK.core.ajax.XhrMock\n     * @extends XMLHttpRequest\n     */\n    function XhrMock(context) {\n        // Service\n        this.responses = require('./XhrResponse').$get(context);\n        // Request\n        this.async = true;\n        this.method = '';\n        this.url = '';\n        this.requestHeaders = {};\n        this.withCredentials = false;\n        // Response\n        this.data = null;\n        this.readyState = 0;\n        this.responseHeaders = {};\n        this.status = 0;\n    }\n    XhrMock.prototype.getResponseHeader = function (header) {\n        return this.responseHeaders[header.toLowerCase()];\n    };\n    XhrMock.prototype.setRequestHeader = function (header, value) {\n        this.requestHeaders[header.toLowerCase()] = value;\n    };\n    XhrMock.prototype.open = function (method, url, async) {\n        this.method = method;\n        this.url = url;\n        this.async = async;\n    };\n    XhrMock.prototype.send = function (data) {\n        var contentType = this.getRequestHeader('Content-Type');\n        this.data = data;\n        if (this.data && typeof this.data == 'string') {\n            // For convenience encoded post data will be decoded\n            if (contentType == 'application/json')\n                this.data = JSON.parse(this.data);\n            if (contentType == 'application/x-www-form-urlencoded')\n                this.data = Utils.parseQueryString(this.data);\n        }\n        Log.debug('API REQUEST', this.method, this.url);\n        var currentResponse = this.responses.find(this);\n        if (!currentResponse) {\n            setTimeout(function () {\n                this.onerror && this.onerror(new Error('Unknown request: ' + this.url));\n            }.bind(this), 1);\n            return;\n        }\n        this.setStatus(200);\n        this.setResponseHeader('Content-Type', 'application/json');\n        var res = currentResponse.response(this);\n        if (this.getResponseHeader('Content-Type') == 'application/json')\n            res = JSON.stringify(res);\n        this.responseText = res;\n        setTimeout(function () {\n            this.onload && this.onload();\n        }.bind(this), 1);\n    };\n    XhrMock.prototype.abort = function () {\n        Log.debug('XhrMock.destroy(): Aborted');\n    };\n    XhrMock.prototype.getRequestHeader = function (header) {\n        return this.requestHeaders[header.toLowerCase()];\n    };\n    XhrMock.prototype.setResponseHeader = function (header, value) {\n        this.responseHeaders[header.toLowerCase()] = value;\n    };\n    XhrMock.prototype.setStatus = function (status) {\n        this.status = status;\n        return this;\n    };\n    module.exports = {\n        Class: XhrMock,\n        /**\n         * @static\n         * @param {Context} context\n         * @returns {XhrMock}\n         */\n        $get: function (context) {\n            return new XhrMock(context);\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Context', [\n    'require',\n    'exports',\n    'module',\n    'core/pubnub/PubnubMock',\n    'core/xhr/XhrMock'\n], function (require, exports, module) {\n    'use strict';\n    /**\n     * @constructor\n     * @param {IInjections} injections\n     */\n    function Context(injections) {\n        /** @private */\n        this.singletons = {};\n        /** @type {IInjections} */\n        this.injections = injections;\n        this.stubPubnub = false;\n        this.stubAjax = false;\n    }\n    /**\n     * @param {string} name\n     * @param {function} factory\n     * @returns {*}\n     */\n    Context.prototype.createSingleton = function (name, factory) {\n        if (!this.singletons[name])\n            this.singletons[name] = factory();\n        return this.singletons[name];\n    };\n    Context.prototype.usePubnubStub = function (flag) {\n        this.stubPubnub = !!flag;\n        return this;\n    };\n    Context.prototype.useAjaxStub = function (flag) {\n        this.stubAjax = !!flag;\n        return this;\n    };\n    /**\n     * @returns {CryptoJS}\n     */\n    Context.prototype.getCryptoJS = function () {\n        return this.injections.CryptoJS;\n    };\n    /**\n     * @returns {PUBNUB}\n     */\n    Context.prototype.getPubnub = function () {\n        return this.stubPubnub ? require('./pubnub/PubnubMock').$get(this) : this.injections.PUBNUB;\n    };\n    /**\n     * @returns {Storage}\n     * @abstract\n     */\n    Context.prototype.getLocalStorage = function () {\n        return this.injections.localStorage;\n    };\n    /**\n     * @returns {function(new:Promise)}\n     */\n    Context.prototype.getPromise = function () {\n        return this.injections.Promise;\n    };\n    /**\n     * @returns {XMLHttpRequest}\n     */\n    Context.prototype.getXHR = function () {\n        return this.stubAjax ? require('./xhr/XhrMock').$get(this) : new this.injections.XHR();\n    };\n    module.exports = {\n        Class: Context,\n        /**\n         * @param {IInjections} injections\n         */\n        $get: function (injections) {\n            return new Context(injections);\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Observable', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils',\n    'core/Log'\n], function (require, exports, module) {\n    var Utils = require('./Utils'), Log = require('./Log');\n    /**\n     * @constructor\n     * @alias RCSDK.core.Observable\n     */\n    function Observable() {\n        if (!(this instanceof Observable))\n            throw new Error('Observable(): New operator was omitted');\n        Object.defineProperty(this, 'listeners', {\n            value: {},\n            enumerable: false,\n            writable: true\n        });\n        Object.defineProperty(this, 'oneTimeEvents', {\n            value: {},\n            enumerable: false,\n            writable: true\n        });\n        Object.defineProperty(this, 'oneTimeArguments', {\n            value: {},\n            enumerable: false,\n            writable: true\n        });\n    }\n    // Object.create({}) is not needed\n    // Do not put Object or Function.prototype instead of {}, otherwise all instances will get non-writable 'name' property\n    // Observable.prototype = {};\n    Object.defineProperty(Observable.prototype, 'constructor', {\n        value: Observable,\n        enumerable: false\n    });\n    Observable.prototype.hasListeners = function (event) {\n        return event in this.listeners;\n    };\n    Observable.prototype.registerOneTimeEvent = function (event) {\n        this.oneTimeEvents[event] = false;\n        this.oneTimeArguments[event] = [];\n    };\n    Observable.prototype.on = function (events, callback) {\n        if (typeof events == 'string')\n            events = [events];\n        if (!events)\n            throw new Error('No events to subscribe to');\n        if (typeof callback !== 'function')\n            throw new Error('Callback must be a function');\n        var self = this;\n        events.forEach(function (event) {\n            if (!self.hasListeners(event))\n                self.listeners[event] = [];\n            self.listeners[event].push(callback);\n            if (self.isOneTimeEventFired(event)) {\n                // Fire listener immediately if is inited already\n                Log.debug('Observable.on(%s): One-time event has been fired already, executing callback', event);\n                callback.apply(self, self.getOneTimeEventArgumens(event));\n            }\n        });\n        return this;\n    };\n    Observable.prototype.emit = function (event) {\n        if (this.isOneTimeEventFired(event)) {\n            Log.debug('Observable.emit(%s): One-time event has been fired already', event);\n            return null;\n        }\n        var self = this, args = Utils.argumentsToArray(arguments).splice(1), result = null;\n        if (this.isOneTimeEvent(event)) {\n            this.setOneTimeEventFired(event);\n            this.setOneTimeEventArgumens(event, args);\n        }\n        if (!this.hasListeners(event))\n            return null;\n        this.listeners[event].some(function (callback) {\n            result = callback.apply(self, args);\n            return result === false;\n        });\n        return result;\n    };\n    Observable.prototype.off = function (event, callback) {\n        var self = this;\n        if (!callback) {\n            delete this.listeners[event];\n        } else {\n            if (!this.hasListeners(event))\n                return this;\n            this.listeners[event].forEach(function (cb, i) {\n                if (cb === callback)\n                    delete self.listeners[event][i];\n            });\n        }\n        return this;\n    };\n    Observable.prototype.isOneTimeEvent = function (event) {\n        return event in this.oneTimeEvents;\n    };\n    Observable.prototype.isOneTimeEventFired = function (event) {\n        if (!this.isOneTimeEvent(event))\n            return false;\n        return this.oneTimeEvents[event];\n    };\n    Observable.prototype.setOneTimeEventFired = function (event) {\n        this.oneTimeEvents[event] = true;\n    };\n    Observable.prototype.setOneTimeEventArgumens = function (event, args) {\n        this.oneTimeArguments[event] = args;\n    };\n    Observable.prototype.getOneTimeEventArgumens = function (event) {\n        return this.oneTimeArguments[event];\n    };\n    Observable.prototype.offAll = function () {\n        this.listeners = {};\n        this.oneTimeEvents = {};\n        this.oneTimeArguments = {};\n    };\n    Observable.prototype.destroy = function () {\n        this.offAll();\n        Log.debug('Observable.destroy(): Listeners were destroyed');\n        return this;\n    };\n    /**\n     * @param {string} event\n     * @param {Array} args\n     * @param {function} [callback]\n     */\n    Observable.prototype.emitAndCallback = function (event, args, callback) {\n        args = Utils.argumentsToArray(args);\n        if (event)\n            this.emit.apply(this, [event].concat(args));\n        if (callback)\n            callback.apply(this, args);\n        return this;\n    };\n    module.exports = {\n        Class: Observable,\n        /**\n         * @param {Context} context\n         * @returns {Observable}\n         */\n        $get: function (context) {\n            return new Observable(context);\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/AjaxObserver', [\n    'require',\n    'exports',\n    'module',\n    'core/Observable'\n], function (require, exports, module) {\n    'use strict';\n    var Observable = require('./Observable').Class;\n    /**\n     * @constructor\n     * @extends Observable\n     * @alias RCSDK.core.AjaxObserver\n     */\n    function AjaxObserver() {\n        Observable.call(this);\n    }\n    AjaxObserver.prototype = Object.create(Observable.prototype);\n    AjaxObserver.prototype.events = {\n        beforeRequest: 'beforeRequest',\n        // parameters: ajax\n        requestSuccess: 'requestSuccess',\n        // means that response was successfully fetched from server\n        requestError: 'requestError'    // means that request failed completely\n    };\n    module.exports = {\n        Class: AjaxObserver,\n        /**\n         * @param {Context} context\n         * @returns {AjaxObserver}\n         */\n        $get: function (context) {\n            return context.createSingleton('AjaxObserver', function () {\n                return new AjaxObserver();\n            });\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Ajax', [\n    'require',\n    'exports',\n    'module',\n    'core/Observable',\n    'core/Utils',\n    'core/Log',\n    'core/AjaxObserver'\n], function (require, exports, module) {\n    'use strict';\n    var Observable = require('./Observable').Class, Utils = require('./Utils'), Log = require('./Log'), jsonContentType = 'application/json', multipartContentType = 'multipart/mixed', boundarySeparator = '--', headerSeparator = ':', bodySeparator = '\\n\\n';\n    /**\n     * @typedef {Object} IAjaxOptions\n     * @property {string} url\n     * @property {string} method?\n     * @property {boolean} async?\n     * @property {Object} post?\n     * @property {Object} headers?\n     */\n    /**\n     * @constructor\n     * @extends Observable\n     * @alias RCSDK.core.Ajax\n     * @param {Context} [context]\n     */\n    function Ajax(context) {\n        Observable.call(this);\n        /** @type {Ajax[]|object} */\n        this.data = null;\n        /** @type {Error|null} */\n        this.error = null;\n        this.response = '';\n        this.headers = {};\n        this.status = 0;\n        /**\n         * @type {IAjaxOptions}\n         * @protected\n         */\n        this.options = {};\n        this.context = context;\n        /** @type {AjaxObserver} */\n        this.observer = require('./AjaxObserver').$get(context);\n        /** @type {XMLHttpRequest} */\n        this.xhr = null;\n    }\n    Ajax.prototype = Object.create(Observable.prototype);\n    Object.defineProperty(Ajax.prototype, 'constructor', {\n        value: Ajax,\n        enumerable: false\n    });\n    /**\n     * @returns {IAjaxOptions}\n     */\n    Ajax.prototype.getOptions = function () {\n        return this.options;\n    };\n    /**\n     * @param {IAjaxOptions} [options]\n     * @returns {Ajax}\n     */\n    Ajax.prototype.setOptions = function (options) {\n        if (options)\n            this.options = options;\n        return this;\n    };\n    /**\n     * @param {string} name\n     * @param {string} value\n     * @returns {Ajax}\n     */\n    Ajax.prototype.setRequestHeader = function (name, value) {\n        this.options.headers[name.toLowerCase()] = value;\n        return this;\n    };\n    /**\n     * @param {string} name\n     * @param {string} value\n     * @returns {Ajax}\n     */\n    Ajax.prototype.setResponseHeader = function (name, value) {\n        this.headers[name.toLowerCase()] = value;\n        return this;\n    };\n    /**\n     * @param {string} name\n     * @returns {string}\n     */\n    Ajax.prototype.getRequestHeader = function (name) {\n        return this.options.headers[name.toLowerCase()];\n    };\n    /**\n     * @param {string} name\n     * @returns {string}\n     */\n    Ajax.prototype.getResponseHeader = function (name) {\n        return this.headers[name.toLowerCase()];\n    };\n    /**\n     * @param {string} type\n     * @returns {boolean}\n     */\n    Ajax.prototype.isResponseContentType = function (type) {\n        return this.getResponseContentType().indexOf(type) > -1;\n    };\n    /**\n     * @returns {string}\n     */\n    Ajax.prototype.getResponseContentType = function () {\n        return this.getResponseHeader('Content-Type') || '';\n    };\n    /**\n     * @returns {boolean}\n     */\n    Ajax.prototype.isResponseMultipart = function () {\n        return this.isResponseContentType(multipartContentType);\n    };\n    /**\n     * @returns {boolean}\n     */\n    Ajax.prototype.isResponseUnauthorized = function () {\n        return this.status == 401;\n    };\n    /**\n     * @deprecated\n     * @returns {string}\n     */\n    Ajax.prototype.getContentType = function () {\n        return this.getResponseContentType();\n    };\n    /**\n     * @deprecated\n     * @returns {boolean}\n     */\n    Ajax.prototype.isMultipart = function () {\n        return this.isResponseMultipart();\n    };\n    /**\n     * @deprecated\n     * @returns {boolean}\n     */\n    Ajax.prototype.isUnauthorized = function () {\n        return this.isResponseUnauthorized();\n    };\n    /**\n     * @returns {boolean}\n     */\n    Ajax.prototype.isLoaded = function () {\n        return !!this.status;\n    };\n    /**\n     * Checks the send options, defaulting various of the options,\n     * and consuming / transforming some of the options (like get).\n     * @returns {Ajax}\n     */\n    Ajax.prototype.checkOptions = function () {\n        if (!this.options.url)\n            throw new Error('Url is not defined');\n        var defaultHeaders = {\n                'Accept': jsonContentType,\n                'Content-Type': jsonContentType\n            }, headers = this.options.headers || {};\n        this.options.headers = {};\n        Object.keys(defaultHeaders).forEach(function (key) {\n            this.setRequestHeader(key, defaultHeaders[key]);\n        }, this);\n        Object.keys(headers).forEach(function (key) {\n            this.setRequestHeader(key, headers[key]);\n        }, this);\n        this.options.method = this.options.method ? this.options.method.toUpperCase() : 'GET';\n        this.options.async = this.options.async !== undefined ? this.options.async : true;\n        this.options.get = this.options.get || null;\n        this.options.post = this.options.post ? typeof this.options.post !== 'string' && this.getRequestHeader('Content-Type') === jsonContentType ? JSON.stringify(this.options.post) : this.options.post : '';\n        this.options.url = this.options.url + (this.options.get ? (this.options.url.indexOf('?') > -1 ? '&' : '?') + Utils.queryStringify(this.options.get) : '');\n        if ([\n                'GET',\n                'POST',\n                'PUT',\n                'DELETE',\n                'PATCH',\n                'OPTIONS'\n            ].indexOf(this.options.method) < 0)\n            throw new Error('Method has wrong value');\n        delete this.options.get;\n        return this;\n    };\n    /**\n     * @returns {Promise}\n     */\n    Ajax.prototype.send = function () {\n        this.observer.emit(this.observer.events.beforeRequest, this);\n        return this.context.getPromise().resolve(this).then(this.checkOptions.bind(this)).then(this.request.bind(this)).then(function (ajax) {\n            ajax.parseResponse();\n            if (ajax.error)\n                throw ajax.error;\n            return ajax;\n        }.bind(this)).then(function (ajax) {\n            this.observer.emit(this.observer.events.requestSuccess, ajax);\n            return ajax;\n        }.bind(this)).catch(function (e) {\n            e.ajax = this;\n            this.observer.emit(this.observer.events.requestError, e);\n            throw e;\n        }.bind(this));\n    };\n    /**\n     * @returns {XMLHttpRequest}\n     */\n    Ajax.prototype.getXHR = function () {\n        return this.context.getXHR();\n    };\n    /**\n     * @returns {Promise}\n     */\n    Ajax.prototype.request = function () {\n        return new (this.context.getPromise())(function (resolve, reject) {\n            var options = this.options, xhr = this.getXHR();\n            xhr.open(options.method, options.url, options.async);\n            //@see http://stackoverflow.com/questions/19666809/cors-withcredentials-support-limited\n            xhr.withCredentials = true;\n            xhr.onload = function () {\n                this.status = xhr.status;\n                this.response = xhr.responseText;\n                this.setResponseHeader('Content-Type', xhr.getResponseHeader('Content-Type'));\n                resolve(this);\n            }.bind(this);\n            xhr.onerror = function (event) {\n                reject(new Error('The request cannot be sent'));    // CORS or network issue\n            };\n            Utils.forEach(options.headers, function (value, header) {\n                xhr.setRequestHeader(header, value);\n            });\n            xhr.send(options.method === 'GET' ? null : options.post);\n            this.xhr = xhr;\n        }.bind(this));\n    };\n    Ajax.prototype.checkStatus = function (status) {\n        return status.toString().substr(0, 1) == '2';\n    };\n    Ajax.prototype.parseResponse = function () {\n        if (!this.isResponseMultipart()) {\n            try {\n                if (typeof this.response == 'string' && this.isResponseContentType(jsonContentType)) {\n                    this.data = JSON.parse(this.response);\n                } else {\n                    this.data = this.response;    //TODO Add more parsers\n                }\n                if (!this.checkStatus(this.status))\n                    this.error = new Error(this.data.message || this.data.error_description || this.data.description || 'Unknown error');\n            } catch (e) {\n                // Capture parse errors\n                Log.error('Ajax.parseResponse(): Unable to parse data');\n                Log.error(e.stack || e);\n                Log.error(this.response);\n                this.error = e;\n            }\n        } else {\n            try {\n                var boundary = this.getResponseContentType().match(/boundary=([^;]+)/i)[1], parts = this.response.split(boundarySeparator + boundary);\n                if (parts[0].trim() == '')\n                    parts.shift();\n                if (parts[parts.length - 1].trim() == boundarySeparator)\n                    parts.pop();\n                // Step 1. Parse all parts into Ajax objects\n                parts = parts.map(function (part) {\n                    var subParts = part.trim().replace(/\\r/g, '').split(bodySeparator), ajaxPart = new Ajax(this.context);\n                    (subParts.length > 1 ? subParts.shift() : '').split('\\n').forEach(function (header) {\n                        if (header.length == 0)\n                            return res;\n                        var headerParts = header.split(headerSeparator), name = headerParts.shift().trim();\n                        ajaxPart.setResponseHeader(name, headerParts.join(headerSeparator).trim());\n                    }, this);\n                    ajaxPart.response = subParts.join(bodySeparator);\n                    return ajaxPart;\n                }, this);\n                // Step 2. Claim first part as statuses, assign status from this and parse the response\n                var statusInfo = parts.shift();\n                statusInfo.status = this.status;\n                statusInfo.parseResponse();\n                // Steo 3. For the rest of parts assign status and parse the response\n                this.data = parts.map(function (part, i) {\n                    part.status = statusInfo.data.response[i].status;\n                    part.parseResponse();\n                    return part;\n                }, this);\n            } catch (e) {\n                Log.error('Ajax.parseResponse(): Unable to parse batch response');\n                Log.error(e.stack || e);\n                Log.error(this.response);\n                this.error = e;\n            }\n        }\n        return this;\n    };\n    Ajax.prototype.destroy = function () {\n        this.xhr && this.xhr.abort();\n        return Observable.prototype.destroy.call(this);\n    };\n    module.exports = {\n        Class: Ajax,\n        /**\n         * @static\n         * @param {Context} context\n         * @returns {Ajax}\n         */\n        $get: function (context) {\n            return new Ajax(context);\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Cache', [\n    'require',\n    'exports',\n    'module',\n    'core/Observable',\n    'core/Utils'\n], function (require, exports, module) {\n    'use strict';\n    var Observable = require('./Observable').Class, Utils = require('./Utils');\n    /**\n     * @constructor\n     * @extends Observable\n     * @alias RCSDK.core.Cache\n     * @param {Context} context\n     */\n    function Cache(context) {\n        Observable.call(this);\n        this.prefix = 'rc-';\n        this.storage = context.getLocalStorage();    // storage must be defined from outside\n    }\n    Cache.prototype = Object.create(Observable.prototype);\n    Object.defineProperty(Cache.prototype, 'constructor', {\n        value: Cache,\n        enumerable: false\n    });\n    Cache.prototype.prefixKey = function (key) {\n        return this.prefix + key;\n    };\n    Cache.prototype.setItem = function (key, data) {\n        this.storage.setItem(this.prefixKey(key), JSON.stringify(data));\n        return this;\n    };\n    Cache.prototype.removeItem = function (key) {\n        this.storage.removeItem(this.prefixKey(key));\n        return this;\n    };\n    Cache.prototype.getItem = function (key) {\n        var item = this.storage.getItem(this.prefixKey(key));\n        if (!item)\n            return null;\n        return JSON.parse(item);\n    };\n    Cache.prototype.clean = function () {\n        for (var key in this.storage) {\n            if (!this.storage.hasOwnProperty(key))\n                continue;\n            if (key.indexOf(this.prefix) === 0) {\n                this.storage.removeItem(key);\n                delete this.storage[key];\n            }\n        }\n        return this;\n    };\n    module.exports = {\n        Class: Cache,\n        /**\n         * @param {Context} context\n         * @returns {Cache}\n         */\n        $get: function (context) {\n            return context.createSingleton('Cache', function () {\n                return new Cache(context);\n            });\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Platform', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils',\n    'core/Observable',\n    'core/Log',\n    'core/Cache',\n    'core/Ajax'\n], function (require, exports, module) {\n    'use strict';\n    var Utils = require('./Utils'), Observable = require('./Observable').Class, Log = require('./Log'), forcedTokenType = 'forced';\n    /**\n     * @typedef {Object} PlatformAuthInfo\n     * @property {string} token_type\n     * @property {string} access_token\n     * @property {string} expires_in\n     * @property {int} expireTime\n     * @property {string} refresh_token\n     * @property {string} refresh_token_expires_in\n     * @property {int} refreshExpireTime\n     * @property {string} scope\n     */\n    /**\n     * @constructor\n     * @extends Observable\n     * @alias RCSDK.core.Platform\n     * @param {Context} context\n     */\n    function Platform(context) {\n        Observable.call(this);\n        this.server = '';\n        this.apiKey = '';\n        this.account = '~';\n        this.urlPrefix = '/restapi';\n        this.apiVersion = 'v1.0';\n        this.accountPrefix = '/account/';\n        this.accessTokenTtl = 10 * 60;\n        // 10 minutes\n        this.refreshTokenTtl = 10 * 60 * 60;\n        // 10 hours\n        this.refreshTokenTtlRemember = 7 * 24 * 60 * 60;\n        // 1 week\n        this.refreshHandicapMs = 60 * 1000;\n        // 1 minute\n        this.clearCacheOnRefreshError = true;\n        /** @type {Promise} */\n        this.refreshPromise = null;\n        this.context = context;\n    }\n    Platform.prototype = Object.create(Observable.prototype);\n    Object.defineProperty(Platform.prototype, 'constructor', {\n        value: Platform,\n        enumerable: false\n    });\n    Platform.prototype.cacheId = 'platform';\n    Platform.prototype.pollInterval = 250;\n    Platform.prototype.releaseTimeout = 5000;\n    // If queue was not released then force it to do so after some timeout\n    Platform.prototype.events = {\n        accessViolation: 'accessViolation',\n        logoutSuccess: 'logoutSuccess',\n        logoutError: 'logoutError',\n        authorizeSuccess: 'authorizeSuccess',\n        authorizeError: 'authorizeError',\n        refreshSuccess: 'refreshSuccess',\n        refreshError: 'refreshError'\n    };\n    /**\n     * @returns {Cache}\n     */\n    Platform.prototype.getStorage = function () {\n        return require('./Cache').$get(this.context);\n    };\n    /**\n     * @returns {Ajax}\n     */\n    Platform.prototype.getAjax = function () {\n        return require('./Ajax').$get(this.context);\n    };\n    /**\n     * @returns {Platform}\n     */\n    Platform.prototype.clearStorage = function () {\n        this.getStorage().clean();\n        return this;\n    };\n    /**\n     * @param {boolean} [remember]\n     * @returns {Platform|boolean}\n     */\n    Platform.prototype.remember = function (remember) {\n        var key = this.cacheId + '-remember';\n        if (remember != undefined) {\n            this.getStorage().setItem(key, remember);\n            return this;\n        }\n        return this.getStorage().getItem(key) || false;\n    };\n    /**\n     * @param {string} options.username\n     * @param {string} options.password\n     * @param {string} [options.extension]\n     * @param {boolean} [options.remember]\n     * @returns {Promise}\n     */\n    Platform.prototype.authorize = function (options) {\n        options = options || {};\n        options.remember = options.remember || false;\n        return this.authCall({\n            url: '/restapi/oauth/token',\n            post: {\n                'grant_type': 'password',\n                'username': options.username,\n                'extension': options.extension || '',\n                'password': options.password,\n                'access_token_ttl': this.accessTokenTtl,\n                'refresh_token_ttl': options.remember ? this.refreshTokenTtlRemember : this.refreshTokenTtl\n            }\n        }).then(function (ajax) {\n            this.setCache(ajax.data).remember(options.remember).emitAndCallback(this.events.authorizeSuccess, []);\n            return ajax;\n        }.bind(this)).catch(function (e) {\n            this.clearStorage().emitAndCallback(this.events.authorizeError, [e]);\n            throw e;\n        }.bind(this));\n    };\n    Platform.prototype.isPaused = function () {\n        var storage = this.getStorage(), cacheId = this.cacheId + '-refresh';\n        return !!storage.getItem(cacheId) && Date.now() - parseInt(storage.getItem(cacheId)) < this.releaseTimeout;\n    };\n    Platform.prototype.pause = function () {\n        this.getStorage().setItem(this.cacheId + '-refresh', Date.now());\n        return this;\n    };\n    /**\n     * If the queue is unpaused internally, polling will be cancelled\n     * @returns {Platform}\n     */\n    Platform.prototype.resume = function () {\n        this.getStorage().removeItem(this.cacheId + '-refresh');\n        return this;\n    };\n    /**\n     * Gets resolved into Ajax or null if refresh resolved from elsewhere\n     * @returns {Promise}\n     */\n    Platform.prototype.refresh = function () {\n        return this.context.getPromise().resolve(null).then(function (result) {\n            if (this.isPaused())\n                return this.refreshPolling(result);\n            this.pause();\n            var authData = this.getAuthData();\n            Log.debug('Platform.refresh(): Performing token refresh (access token', authData.access_token, ', refresh token', authData.refresh_token, ')');\n            if (!authData || !authData.refresh_token)\n                throw new Error('Refresh token is missing');\n            if (Date.now() > authData.refreshExpireTime)\n                throw new Error('Refresh token has expired');\n            return this.authCall({\n                url: '/restapi/oauth/token',\n                post: {\n                    'grant_type': 'refresh_token',\n                    'refresh_token': authData.refresh_token,\n                    'access_token_ttl': this.accessTokenTtl,\n                    'refresh_token_ttl': this.remember() ? this.refreshTokenTtlRemember : this.refreshTokenTtl\n                }\n            }).then(function (ajax) {\n                Log.info('Platform.refresh(): Token was refreshed');\n                if (!ajax.data || !ajax.data.refresh_token || !ajax.data.access_token) {\n                    var e = new Error('Malformed OAuth response');\n                    e.ajax = ajax;\n                    throw e;\n                }\n                this.setCache(ajax.data).resume();\n                return ajax;\n            }.bind(this));\n        }.bind(this)).then(function (result) {\n            this.emit(this.events.refreshSuccess, result);\n            return result;\n        }.bind(this)).catch(function (e) {\n            if (this.clearCacheOnRefreshError)\n                this.clearStorage();\n            this.emitAndCallback(this.events.accessViolation, [e]).emitAndCallback(this.events.refreshError, [e]);\n            throw e;\n        }.bind(this));\n    };\n    /**\n     * @returns {Promise}\n     */\n    Platform.prototype.logout = function () {\n        this.pause();\n        return this.authCall({\n            url: '/restapi/oauth/revoke',\n            get: { token: this.getToken() }\n        }).then(function (ajax) {\n            this.resume().clearStorage().emit(this.events.logoutSuccess, ajax);\n            return ajax;\n        }.bind(this)).catch(function (e) {\n            this.resume().emitAndCallback(this.events.accessViolation, [e]).emitAndCallback(this.events.logoutError, [e]);\n            throw e;\n        }.bind(this));\n    };\n    Platform.prototype.refreshPolling = function (result) {\n        if (this.refreshPromise)\n            return this.refreshPromise;\n        this.refreshPromise = new (this.context.getPromise())(function (resolve, reject) {\n            Log.warn('Platform.refresh(): Refresh is already in progress polling started');\n            Utils.poll(function (next) {\n                if (this.isPaused())\n                    return next();\n                this.refreshPromise = null;\n                this.resume();\n                if (this.isTokenValid()) {\n                    resolve(result);\n                } else {\n                    reject(new Error('Automatic authentification timeout'));\n                }\n            }.bind(this), this.pollInterval);\n        }.bind(this));\n        return this.refreshPromise;\n    };\n    Platform.prototype.getToken = function () {\n        return this.getAuthData().access_token;\n    };\n    Platform.prototype.getTokenType = function () {\n        return this.getAuthData().token_type;\n    };\n    /**\n     * @returns {PlatformAuthInfo}\n     */\n    Platform.prototype.getAuthData = function () {\n        return this.getStorage().getItem(this.cacheId) || {\n            token_type: '',\n            access_token: '',\n            expires_in: 0,\n            refresh_token: '',\n            refresh_token_expires_in: 0\n        };\n    };\n    /**\n     * Check if there is a valid (not expired) access token\n     * @returns {boolean}\n     */\n    Platform.prototype.isTokenValid = function () {\n        var authData = this.getAuthData();\n        return authData.token_type == forcedTokenType || new Date(authData.expireTime).getTime() - this.refreshHandicapMs > Date.now();\n    };\n    /**\n     * Checks if user is authorized\n     * If there is no access token, refresh will be performed\n     * @returns {Promise}\n     */\n    Platform.prototype.isAuthorized = function () {\n        if (this.isTokenValid())\n            return this.context.getPromise().resolve(true);\n        return this.refresh();\n    };\n    /**\n     * @returns {Platform}\n     */\n    Platform.prototype.cancelAccessToken = function () {\n        return this.setCache(Utils.extend(this.getAuthData(), {\n            access_token: '',\n            expires_in: 0\n        }));\n    };\n    /**\n     * @param {object} authData\n     * @returns {Platform}\n     */\n    Platform.prototype.setCache = function (authData) {\n        var oldAuthData = this.getAuthData();\n        Log.info('Platform.setCache(): Tokens were updated, new:', authData, ', old:', oldAuthData);\n        authData.expireTime = Date.now() + authData.expires_in * 1000;\n        authData.refreshExpireTime = Date.now() + authData.refresh_token_expires_in * 1000;\n        this.getStorage().setItem(this.cacheId, authData);\n        return this;\n    };\n    /**\n     * @returns {Platform}\n     */\n    Platform.prototype.forceAuthentication = function () {\n        this.setCache({\n            token_type: forcedTokenType,\n            access_token: '',\n            expires_in: 0,\n            refresh_token: '',\n            refresh_token_expires_in: 0\n        });\n        return this;\n    };\n    /**\n     * @param {IAjaxOptions} options\n     * @returns {Promise}\n     */\n    Platform.prototype.apiCall = function (options) {\n        options = options || {};\n        options.url = this.apiUrl(options.url, { addServer: true });\n        return this.isAuthorized()    // Refresh will occur inside\n.then(function () {\n            var token = this.getToken();\n            options.headers = options.headers || {};\n            options.headers.Authorization = this.getTokenType() + (token ? ' ' + token : '');\n            return this.getAjax().setOptions(options).send();\n        }.bind(this)).catch(function (e) {\n            if (!e.ajax || !e.ajax.isResponseUnauthorized())\n                throw e;\n            this.cancelAccessToken();\n            return this.refresh().then(function () {\n                // Re-send with same options\n                return this.apiCall(options);\n            }.bind(this));\n        }.bind(this));\n    };\n    /**\n     * @param {IAjaxOptions} options\n     * @returns {Promise}\n     */\n    Platform.prototype.authCall = function (options) {\n        options = options || {};\n        options.headers = Utils.extend({\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Accept': 'application/json',\n            'Authorization': 'Basic ' + this.apiKey\n        }, options.headers || {});\n        options.method = options.method || 'POST';\n        options.post = Utils.queryStringify(options.post);\n        options.url = this.apiUrl(options.url, { addServer: true });\n        return this.getAjax().setOptions(options).send();\n    };\n    /**\n     *\n     * @param url\n     * @param {{addMethod?: string, addToken?: boolean, addServer?: boolean}} [options]\n     * @returns {string}\n     */\n    Platform.prototype.apiUrl = function (url, options) {\n        url = url || '';\n        options = options || {};\n        var builtUrl = '';\n        if (options.addServer && url.indexOf('http://') == -1 && url.indexOf('https://') == -1)\n            builtUrl += this.server;\n        if (url.indexOf(this.urlPrefix) == -1)\n            builtUrl += this.urlPrefix + '/' + this.apiVersion;\n        if (url.indexOf(this.accountPrefix) > -1)\n            builtUrl.replace(this.accountPrefix + '~', this.accountPrefix + this.account);\n        builtUrl += url;\n        if (options.addMethod || options.addToken)\n            builtUrl += url.indexOf('?') > -1 ? '&' : '?';\n        if (options.addMethod)\n            builtUrl += '_method=' + options.addMethod;\n        if (options.addToken)\n            builtUrl += (options.addMethod ? '&' : '') + 'access_token=' + this.getToken();\n        return builtUrl;\n    };\n    module.exports = {\n        Class: Platform,\n        /**\n         * @param {Context} context\n         * @returns {Platform}\n         */\n        $get: function (context) {\n            return context.createSingleton('Platform', function () {\n                return new Platform(context);\n            });\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Subscription', [\n    'require',\n    'exports',\n    'module',\n    'core/Observable',\n    'core/Log',\n    'core/Utils',\n    'core/Platform'\n], function (require, exports, module) {\n    'use strict';\n    var Observable = require('./Observable').Class, Log = require('./Log'), Utils = require('./Utils'), renewHandicapMs = 60 * 1000;\n    /**\n     * @constructor\n     * @extends Observable\n     * @alias RCSDK.core.Subscription\n     * @param {Context} context\n     */\n    function Subscription(context) {\n        Observable.call(this);\n        this.eventFilters = [];\n        this.timeout = null;\n        this.subscription = {\n            eventFilters: [],\n            expirationTime: '',\n            // 2014-03-12T19:54:35.613Z\n            expiresIn: 0,\n            deliveryMode: {\n                transportType: 'PubNub',\n                encryption: false,\n                address: '',\n                subscriberKey: '',\n                secretKey: ''\n            },\n            id: '',\n            creationTime: '',\n            // 2014-03-12T19:54:35.613Z\n            status: '',\n            // Active\n            uri: ''\n        };\n        /** @type {PUBNUB.ws} */\n        this.socket = null;\n        this.context = context;\n    }\n    Subscription.prototype = Object.create(Observable.prototype);\n    Object.defineProperty(Subscription.prototype, 'constructor', {\n        value: Subscription,\n        enumerable: false\n    });\n    Subscription.prototype.events = {\n        notification: 'notification',\n        removeSuccess: 'removeSuccess',\n        removeError: 'removeError',\n        renewSuccess: 'renewSuccess',\n        renewError: 'renewError',\n        subscribeSuccess: 'subscribeSuccess',\n        subscribeError: 'subscribeError'\n    };\n    /**\n     * @param {string} url\n     * @returns {PUBNUB.ws}\n     */\n    Subscription.prototype.createPubnub = function (url) {\n        return new (this.getPubnub()).ws(url);\n    };\n    Subscription.prototype.getPubnub = function () {\n        return this.context.getPubnub();\n    };\n    Subscription.prototype.getCrypto = function () {\n        return this.context.getCryptoJS();\n    };\n    Subscription.prototype.getPlatform = function () {\n        return require('./Platform').$get(this.context);\n    };\n    /**\n     * Creates or updates subscription if there is an active one\n     * @param {{events?:string[]}} [options] New array of events\n     * @returns {Promise}\n     */\n    Subscription.prototype.register = function (options) {\n        if (this.isSubscribed()) {\n            return this.renew(options);\n        } else {\n            return this.subscribe(options);\n        }\n    };\n    Subscription.prototype.addEvents = function (events) {\n        this.eventFilters = this.eventFilters.concat(events);\n        return this;\n    };\n    Subscription.prototype.setEvents = function (events) {\n        this.eventFilters = events;\n        return this;\n    };\n    Subscription.prototype.getFullEventFilters = function () {\n        return this.eventFilters.map(function (event) {\n            return this.getPlatform().apiUrl(event);\n        }.bind(this));\n    };\n    /**\n     * @private\n     * @param {Array} [options.events] New array of events\n     * @returns {Promise}\n     */\n    Subscription.prototype.subscribe = function (options) {\n        options = options || {};\n        if (options.events)\n            this.eventFilters = options.events;\n        this.clearTimeout();\n        return new (this.context.getPromise())(function (resolve, reject) {\n            if (!this.eventFilters || !this.eventFilters.length)\n                throw new Error('Events are undefined');\n            resolve();\n        }.bind(this)).then(function () {\n            return this.getPlatform().apiCall({\n                method: 'POST',\n                url: '/restapi/v1.0/subscription',\n                post: {\n                    eventFilters: this.getFullEventFilters(),\n                    deliveryMode: { transportType: 'PubNub' }\n                }\n            });\n        }.bind(this)).then(function (ajax) {\n            this.updateSubscription(ajax.data).subscribeAtPubnub().emit(this.events.subscribeSuccess, ajax.data);\n            return ajax;\n        }.bind(this)).catch(function (e) {\n            this.unsubscribe().emit(this.events.subscribeError, e);\n            throw e;\n        }.bind(this));\n    };\n    /**\n     * @private\n     * @param {Array} [options.events] New array of events\n     * @returns {Promise}\n     */\n    Subscription.prototype.renew = function (options) {\n        options = options || {};\n        if (options.events)\n            this.eventFilters = options.events;\n        this.clearTimeout();\n        return new (this.context.getPromise())(function (resolve, reject) {\n            if (!this.subscription || !this.subscription.id)\n                throw new Error('Subscription ID is required');\n            if (!this.eventFilters || !this.eventFilters.length)\n                throw new Error('Events are undefined');\n            resolve();\n        }.bind(this)).then(function () {\n            return this.getPlatform().apiCall({\n                method: 'PUT',\n                url: '/restapi/v1.0/subscription/' + this.subscription.id,\n                post: { eventFilters: this.getFullEventFilters() }\n            });\n        }.bind(this)).then(function (ajax) {\n            this.updateSubscription(ajax.data).emit(this.events.renewSuccess, ajax.data);\n            return ajax;\n        }.bind(this)).catch(function (e) {\n            this.unsubscribe().emit(this.events.renewError, e);\n            throw e;\n        }.bind(this));\n    };\n    /**\n     * @param {boolean} [options.async]\n     * @returns {Promise}\n     */\n    Subscription.prototype.remove = function (options) {\n        options = Utils.extend({ async: true }, options);\n        return new (this.context.getPromise())(function (resolve, reject) {\n            if (!this.subscription || !this.subscription.id)\n                throw new Error('Subscription ID is required');\n            resolve();\n        }.bind(this)).then(function () {\n            return this.getPlatform().apiCall({\n                async: !!options.async,\n                // Warning! This is necessary because this method is used in beforeunload hook and has to be synchronous\n                method: 'DELETE',\n                url: '/restapi/v1.0/subscription/' + this.subscription.id\n            });\n        }.bind(this)).then(function (ajax) {\n            this.unsubscribe().emit(this.events.removeSuccess, ajax);\n            return ajax;\n        }.bind(this)).catch(function (e) {\n            this.unsubscribe().emit(this.events.removeError, e);\n            throw e;\n        }.bind(this));\n    };\n    Subscription.prototype.destroy = function () {\n        this.unsubscribe();\n        return Observable.prototype.destroy.call(this);\n    };\n    Subscription.prototype.isSubscribed = function () {\n        return this.subscription && this.subscription.deliveryMode && this.subscription.deliveryMode.subscriberKey && this.subscription.deliveryMode.address;\n    };\n    /**\n     * @protected\n     */\n    Subscription.prototype.setTimeout = function () {\n        var timeToExpiration = this.subscription.expiresIn * 1000 - renewHandicapMs;\n        this.timeout = setTimeout(function () {\n            this.renew({});\n        }.bind(this), timeToExpiration);\n    };\n    /**\n     * @protected\n     */\n    Subscription.prototype.clearTimeout = function () {\n        clearTimeout(this.timeout);\n    };\n    /**\n     * Set new subscription info and re-create timeout\n     * @protected\n     * @param subscription\n     * @returns {Subscription}\n     */\n    Subscription.prototype.updateSubscription = function (subscription) {\n        this.clearTimeout();\n        this.subscription = subscription;\n        this.setTimeout();\n        return this;\n    };\n    /**\n     * Remove subscription and disconnect from socket\n     * @protected\n     * @returns {Subscription}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        this.clearTimeout();\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n        this.socket && this.socket.close(this.socket.CLOSE_NORMAL, 'Connection terminated by client');\n        this.subscription = null;\n        return this;\n    };\n    /**\n     * @abstract\n     * @param {Object} message\n     * @returns {Subscription}\n     */\n    Subscription.prototype.notify = function (message) {\n        if (this.isSubscribed() && this.subscription.deliveryMode.encryptionKey) {\n            var CryptoJS = this.getCrypto();\n            var key = CryptoJS.enc.Base64.parse(this.subscription.deliveryMode.encryptionKey);\n            var data = CryptoJS.enc.Base64.parse(message);\n            var decrypted = CryptoJS.AES.decrypt({ ciphertext: data }, key, {\n                mode: CryptoJS.mode.ECB,\n                padding: CryptoJS.pad.Pkcs7\n            }).toString(CryptoJS.enc.Utf8);\n            message = JSON.parse(decrypted);\n        }\n        this.emit(this.events.notification, message);\n        return this;\n    };\n    /**\n     * @returns {Subscription}\n     */\n    Subscription.prototype.subscribeAtPubnub = function () {\n        if (!this.isSubscribed())\n            return this;\n        // ws(s)://ORIGIN/PUBLISH_KEY/SUBSCRIBE_KEY/CHANNEL\n        var url = 'wss://pubsub.pubnub.com//' + this.subscription.deliveryMode.subscriberKey + '/' + this.subscription.deliveryMode.address;\n        this.socket = this.createPubnub(url);\n        this.socket.pubnub && this.socket.pubnub.ready();\n        //TODO This may be unnecessary\n        this.socket.onmessage = function (e) {\n            Log.info('Subscription: Socket received message', e);\n            this.notify(e.data);\n        }.bind(this);\n        this.socket.onclose = function () {\n            Log.info('Subscription: Socket closed');\n        };\n        this.socket.onerror = function (e) {\n            Log.error('Subscription: Socket error');\n            Log.error(e.stack || e);\n        };\n        this.socket.onopen = function () {\n            Log.info('Subscription: Socket open');\n        };\n        return this;\n    };\n    module.exports = {\n        Class: Subscription,\n        /**\n         * @param {Context} context\n         * @returns {Subscription}\n         */\n        $get: function (context) {\n            return new Subscription(context);\n        }\n    };\n});","/**\n * istanbul ignore next\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/PageVisibility', [\n    'require',\n    'exports',\n    'module',\n    'core/Observable'\n], function (require, exports, module) {\n    'use strict';\n    var Observable = require('./Observable').Class;\n    /**\n     * @constructor\n     * @extends Observable\n     * @alias RCSDK.core.PageVisibility\n     */\n    function PageVisibility() {\n        Observable.call(this);\n        var hidden = 'hidden', self = this;\n        this.visible = true;\n        if (typeof document == 'undefined' || typeof window == 'undefined')\n            return;\n        // Standards:\n        if (hidden in document)\n            document.addEventListener('visibilitychange', onchange);\n        else if ((hidden = 'mozHidden') in document)\n            document.addEventListener('mozvisibilitychange', onchange);\n        else if ((hidden = 'webkitHidden') in document)\n            document.addEventListener('webkitvisibilitychange', onchange);\n        else if ((hidden = 'msHidden') in document)\n            document.addEventListener('msvisibilitychange', onchange);    // IE 9 and lower:\n        else if ('onfocusin' in document)\n            document.onfocusin = document.onfocusout = onchange;    // All others:\n        else\n            window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;\n        function onchange(evt) {\n            evt = evt || window.event;\n            var v = 'visible', h = 'hidden', evtMap = {\n                    focus: v,\n                    focusin: v,\n                    pageshow: v,\n                    blur: h,\n                    focusout: h,\n                    pagehide: h\n                };\n            self.visible = evt.type in evtMap ? evtMap[evt.type] == v : !document[hidden];\n            self.emit(self.events.change, self.visible);\n        }\n    }\n    PageVisibility.prototype = Object.create(Observable.prototype);\n    Object.defineProperty(PageVisibility.prototype, 'constructor', {\n        value: PageVisibility,\n        enumerable: false\n    });\n    PageVisibility.prototype.events = { change: 'change' };\n    PageVisibility.prototype.isVisible = function () {\n        return this.visible;\n    };\n    module.exports = {\n        Class: PageVisibility,\n        /**\n         * @param {Context} context\n         * @returns {PageVisibility}\n         */\n        $get: function (context) {\n            return new PageVisibility();\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Helper', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils'\n], function (require, exports, module) {\n    'use strict';\n    var Utils = require('./Utils');\n    /**\n     * @alias RCSDK.core.Helper\n     * @constructor\n     * @param {Context} context\n     */\n    function Helper(context) {\n        this.context = context;\n    }\n    Helper.prototype.defaultProperty = 'id';\n    /**\n     * @returns {Context}\n     */\n    Helper.prototype.getContext = function () {\n        return this.context;\n    };\n    /**\n     * @param {object} [options]\n     * @param {string} [id]\n     */\n    Helper.prototype.createUrl = function (options, id) {\n        return '';\n    };\n    /**\n     * @param {IHelperObject} object\n     * @returns {string}\n     */\n    Helper.prototype.getId = function (object) {\n        return object && object[this.defaultProperty];\n    };\n    /**\n     *\n     * @param {IHelperObject} object\n     * @returns {boolean}\n     */\n    Helper.prototype.isNew = function (object) {\n        return !this.getId(object) || !this.getUri(object);\n    };\n    /**\n     *\n     * @param {IHelperObject} object\n     * @returns {IHelperObject}\n     */\n    Helper.prototype.resetAsNew = function (object) {\n        if (object) {\n            delete object.id;\n            delete object.uri;\n        }\n        return object;\n    };\n    /**\n     * @param {IHelperObject} object\n     * @returns {string}\n     */\n    Helper.prototype.getUri = function (object) {\n        return object && object.uri;\n    };\n    /**\n     * @param {Ajax} ajax\n     * @return {IHelperObject[]}\n     */\n    Helper.prototype.parseMultipartResponse = function (ajax) {\n        if (ajax.isResponseMultipart()) {\n            // ajax.data has full array, leave only successful\n            return ajax.data.filter(function (result) {\n                return !result.error;\n            }).map(function (result) {\n                return result.data;\n            });\n        } else {\n            // Single ID\n            return [ajax.data];\n        }\n    };\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided, default will be returned\n     * @param {IHelperObject} [object]\n     * @param {IAjaxOptions} [options]\n     * @return {IAjaxOptions}\n     */\n    Helper.prototype.loadRequest = function (object, options) {\n        return Utils.extend(options || {}, {\n            url: options && options.url || object && this.getUri(object) || this.createUrl(),\n            method: options && options.method || 'GET'\n        });\n    };\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided, default will be returned\n     * @param {IHelperObject} object\n     * @param {IAjaxOptions} [options]\n     * @return {IAjaxOptions}\n     */\n    Helper.prototype.saveRequest = function (object, options) {\n        if (!object && !(options && options.post))\n            throw new Error('No Object');\n        return Utils.extend(options || {}, {\n            method: options && options.method || (this.isNew(object) ? 'POST' : 'PUT'),\n            url: options && options.url || this.getUri(object) || this.createUrl(),\n            post: options && options.post || object\n        });\n    };\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided exception will be thrown\n     * @param {IHelperObject} object\n     * @param {IAjaxOptions} [options]\n     * @return {IAjaxOptions}\n     */\n    Helper.prototype.deleteRequest = function (object, options) {\n        options = options || {};\n        if (!this.getUri(object) && !(options && options.url))\n            throw new Error('Object has to be not new or URL must be provided');\n        return Utils.extend(options || {}, {\n            method: options && options.method || 'DELETE',\n            url: options && options.url || this.getUri(object)\n        });\n    };\n    /**\n     * If no url was provided, default SYNC url will be returned\n     * @param {IAjaxOptions} [options]\n     * @return {IAjaxOptions}\n     */\n    Helper.prototype.syncRequest = function (options) {\n        options = options || {};\n        options.url = options.url || this.createUrl({ sync: true });\n        options.get = options.get || {};\n        if (!!options.get.syncToken) {\n            options.get = {\n                syncType: 'ISync',\n                syncToken: options.get.syncToken\n            };\n        } else {\n            options.get.syncType = 'FSync';\n        }\n        return options;\n    };\n    Helper.prototype.nextPageExists = function (data) {\n        return data && data.navigation && 'nextPage' in data.navigation;\n    };\n    /**\n     * @param {IHelperObject[]} array - an array to be indexed\n     * @param {function(object)} [getIdFn] - must return an ID for each array item\n     * @param {boolean} [gather] - if true, then each index will have an array of items, that has same ID, otherwise the first indexed item wins\n     * @returns {*}\n     */\n    Helper.prototype.index = function (array, getIdFn, gather) {\n        getIdFn = getIdFn || this.getId.bind(this);\n        array = array || [];\n        return array.reduce(function (index, item) {\n            var id = getIdFn(item);\n            if (!id || index[id] && !gather)\n                return index;\n            if (gather) {\n                if (!index[id])\n                    index[id] = [];\n                index[id].push(item);\n            } else {\n                index[id] = item;\n            }\n            return index;\n        }, {});\n    };\n    /**\n     * Returns a shallow copy of merged _target_ array plus _supplement_ array\n     * @param {IHelperObject[]} target\n     * @param {IHelperObject[]} supplement\n     * @param {function(IHelperObject)} [getIdFn]\n     * @param {boolean} [mergeItems] - if true, properties of _supplement_ item will be applied to _target_ item, otherwise _target_ item will be replaced\n     * @returns {*}\n     */\n    Helper.prototype.merge = function (target, supplement, getIdFn, mergeItems) {\n        getIdFn = getIdFn || this.getId.bind(this);\n        target = target || [];\n        supplement = supplement || [];\n        var supplementIndex = this.index(supplement, getIdFn), updatedIDs = [];\n        var result = target.map(function (item) {\n            var id = getIdFn(item), newItem = supplementIndex[id];\n            if (newItem)\n                updatedIDs.push(id);\n            return newItem ? mergeItems ? Utils.extend(item, newItem) : newItem : item;\n        });\n        supplement.forEach(function (item) {\n            if (updatedIDs.indexOf(getIdFn(item)) == -1)\n                result.push(item);\n        });\n        return result;\n    };\n    module.exports = {\n        Class: Helper,\n        /**\n         * @param {Context} context\n         * @returns {Helper}\n         */\n        $get: function (context) {\n            return new Helper(context);\n        }\n    };    /**\n     * @typedef {object} IHelperObject\n     * @property {string} id\n     * @property {string} uri\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/Validator', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils'\n], function (require, exports, module) {\n    'use strict';\n    var Utils = require('./Utils');\n    /**\n     * @typedef {object} IValidator\n     * @property {string} field\n     * @property {function} validator\n     */\n    /**\n     * @typedef {object} IValidatorResult\n     * @property {boolean} isValid\n     * @property {Object.<number, Error[]>} errors\n     */\n    /**\n     * @alias RCSDK.core.Validator\n     * @name Validator\n     */\n    var Validator = module.exports = {\n        /**\n         * @param {IValidator[]} validators\n         * @returns {IValidatorResult}\n         */\n        validate: function (validators) {\n            /** @type {IValidatorResult} */\n            var result = {\n                errors: {},\n                isValid: true\n            };\n            result.errors = validators.reduce(function (errors, validator) {\n                var res = validator.validator();\n                if (res.length > 0) {\n                    result.isValid = false;\n                    errors[validator.field] = errors[validator.field] || [];\n                    errors[validator.field] = errors[validator.field].concat(res);\n                }\n                return errors;\n            }, {});\n            return result;\n        },\n        /**\n         * It is not recommended to have any kinds of complex validators at front end\n         * @deprecated\n         * @param value\n         * @param multiple\n         * @returns {Function}\n         */\n        email: function (value, multiple) {\n            return function () {\n                if (!value)\n                    return [];\n                return Utils.isEmail(value, multiple) ? [] : [new Error('Value has to be a valid email')];\n            };\n        },\n        /**\n         * It is not recommended to have any kinds of complex validators at front end\n         * TODO International phone numbers\n         * @deprecated\n         * @param value\n         * @returns {Function}\n         */\n        phone: function (value) {\n            return function () {\n                if (!value)\n                    return [];\n                return Utils.isPhoneNumber(value) ? [] : [new Error('Value has to be a valid US phone number')];\n            };\n        },\n        required: function (value) {\n            return function () {\n                return !value ? [new Error('Field is required')] : [];\n            };\n        },\n        length: function (value, max, min) {\n            return function () {\n                var errors = [];\n                if (!value)\n                    return errors;\n                value = value.toString();\n                if (min && value.length < min)\n                    errors.push(new Error('Minimum length of ' + min + ' characters is required'));\n                if (max && value.length > max)\n                    errors.push(new Error('Maximum length of ' + max + ' characters is required'));\n                return errors;\n            };\n        },\n        $get: function (context) {\n            return Validator;\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('core/List', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils'\n], function (require, exports, module) {\n    'use strict';\n    var Utils = require('./Utils');\n    /**\n     * @alias RCSDK.core.List\n     * @name List\n     */\n    var List = module.exports = {\n        /**\n         * @param {string} property\n         * @returns {function(object)}\n         */\n        propertyExtractor: function (property) {\n            return function (item, options) {\n                return property ? item && item[property] || null : item;\n            };\n        },\n        /**\n         * Non-string types are converted to string\n         * Non-string types are extracted as an empty string if they could be converted to false\n         * If no options.sortBy given the item itself is extracted\n         * Compares strings:\n         * - if (a is less than b) return -1;\n         * - if (a is greater than b) return 1;\n         * - else (a must be equal to b) return 0;\n         * Exceptions in will be suppressed, if any - a is assumed to be less than b\n         * @param {string} a\n         * @param {string} b\n         * @param {IListComparatorOptions} [options]\n         * @returns {number}\n         */\n        stringComparator: function (a, b, options) {\n            return Utils.parseString(a).localeCompare(Utils.parseString(b));\n        },\n        /**\n         * Non-numeric types are extracted as 0 if they could be converted to false\n         * Objects that could not be converted to number are extracted as 0\n         * If no options.sortBy given the item itself is extracted\n         * See parseFloat for more info\n         * Compares numbers:\n         * - if (a is less than b) return -1;\n         * - if (a is greater than b) return 1;\n         * - else (a must be equal to b) return 0;\n         * Function does not check types\n         * Exceptions in will be suppressed, if any - a is assumed to be less than b\n         * @param {number} a\n         * @param {number} b\n         * @param {IListComparatorOptions} [options]\n         * @returns {number}\n         */\n        numberComparator: function (a, b, options) {\n            return Utils.parseNumber(a) - Utils.parseNumber(b);\n        },\n        /**\n         * Function extracts (using _extractFn_ option) values of a property (_sortBy_ option) and compares them using\n         * compare function (_compareFn_ option, by default Helper.stringComparator)\n         * Merged options are provided to _extractFn_ and _compareFn_\n         * TODO Check memory leaks for all that options links\n         * @param {IListComparatorOptions} [options]\n         * @returns {function(object, object)}\n         */\n        comparator: function (options) {\n            options = Utils.extend({\n                extractFn: this.propertyExtractor(options && options.sortBy || null),\n                compareFn: this.stringComparator\n            }, options);\n            /**\n             * @param {object} item1\n             * @param {object} item2\n             * @returns {number}\n             */\n            function comparator(item1, item2) {\n                return options.compareFn(options.extractFn(item1, options), options.extractFn(item2, options), options);\n            }\n            return comparator;\n        },\n        /**\n         * @param {string} obj\n         * @param {IListFilterOptions} options\n         * @returns {boolean}\n         */\n        equalsFilter: function (obj, options) {\n            return options.condition === obj;\n        },\n        /**\n         * @param {string} obj\n         * @param {IListFilterOptions} options\n         * @returns {boolean}\n         */\n        containsFilter: function (obj, options) {\n            return obj && obj.toString().indexOf(options.condition) > -1;\n        },\n        /**\n         * @param {string} obj\n         * @param {IListFilterOptions} options - `condition` must be an instance of RegExp\n         * @returns {boolean}\n         */\n        regexpFilter: function (obj, options) {\n            if (!(options.condition instanceof RegExp))\n                throw new Error('Condition must be an instance of RegExp');\n            return options.condition.test(obj);\n        },\n        /**\n         * Function extracts (using `extractFn` option) values of a property (`filterBy` option) and filters them using\n         * compare function (`filterFn` option, by default Helper.equalsFilter)\n         * Merged options are provided to `extractFn` and `compareFn`\n         * Set `filterBy` to null to force `propertyExtractor` to return object itself\n         * TODO Check memory leaks for all that options links\n         * @param {IListFilterOptions[]} [filterConfigs]\n         * @returns {function(object)}\n         */\n        filter: function (filterConfigs) {\n            var self = this;\n            filterConfigs = (filterConfigs || []).map(function (opt) {\n                return Utils.extend({\n                    condition: '',\n                    extractFn: self.propertyExtractor(opt && opt.filterBy || null),\n                    filterFn: self.equalsFilter\n                }, opt);\n            });\n            /**\n             * @param {object} item\n             * @returns {boolean}\n             */\n            function filter(item) {\n                return filterConfigs.reduce(function (pass, opt) {\n                    if (!pass || !opt.condition)\n                        return pass;\n                    return opt.filterFn(opt.extractFn(item, opt), opt);\n                }, true);\n            }\n            return filter;\n        },\n        $get: function (context) {\n            return List;\n        }\n    };    /**\n     * @typedef {object} IListComparatorOptions\n     * @property {string} sortBy\n     * @property {function(object, IListComparatorOptions)} extractFn\n     * @property {function(object, object)} compareFn\n     */\n          /**\n     * @typedef {object} IListFilterOptions\n     * @property {string} filterBy\n     * @property {object} condition\n     * @property {function(object, IListComparatorOptions)} extractFn\n     * @property {function(object, object)} filterFn\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Country', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function CountryHelper(context) {\n        Helper.call(this, context);\n    }\n    CountryHelper.prototype = Object.create(Helper.prototype);\n    CountryHelper.prototype.createUrl = function () {\n        return '/dictionary/country';\n    };\n    module.exports = {\n        Class: CountryHelper,\n        /**\n         * @param {Context} context\n         * @returns {CountryHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('CountryHelper', function () {\n                return new CountryHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} ICountry\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} name\n     * @property {string} isoCode\n     * @property {string} callingCode\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/DeviceModel', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function DeviceModelHelper(context) {\n        Helper.call(this, context);\n    }\n    DeviceModelHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @param {IDeviceModel} device\n     * @returns {string}\n     */\n    DeviceModelHelper.prototype.getId = function (device) {\n        if (!device)\n            return null;\n        return device.id + (device.addons && device.addons[0] ? '-' + device.addons[0].id + '-' + device.addons[0].count : '');\n    };\n    /**\n     * Remove extra textual information from device\n     * @exceptionalCase Platform does not understand full device info\n     * @param {IDeviceModel} device\n     * @returns {IDeviceModel}\n     */\n    DeviceModelHelper.prototype.cleanForSaving = function (device) {\n        if (!device)\n            return null;\n        delete device.name;\n        delete device.deviceClass;\n        if (device.addons && device.addons.length > 0) {\n            device.addons.forEach(function (addon, i) {\n                delete device.addons[i].name;\n            });\n        } else {\n            delete device.addons;\n        }\n        return device;\n    };\n    /**\n     * TODO Remove when http://jira.ringcentral.com/browse/SDK-1 is done\n     * @type {IDeviceModel[]}\n     */\n    DeviceModelHelper.prototype.devices = [\n        {\n            id: '-1',\n            name: 'Softphone'\n        },\n        {\n            id: '0',\n            name: 'Existing device'\n        },\n        {\n            id: '19',\n            name: 'Cisco SPA-525G2 Desk Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '23',\n            name: 'Polycom IP 321 Basic IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '30',\n            name: 'Polycom IP 550 HD Manager IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '37',\n            name: 'Polycom IP 6000 Conference Phone',\n            deviceClass: 'Conference Phone'\n        },\n        {\n            id: '40',\n            name: 'Polycom IP 335 HD IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '51',\n            name: 'Cisco SPA-303 Desk Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '16',\n            name: 'Cisco SPA-508G Desk Phone with 1 Expansion Module',\n            deviceClass: 'Desk Phone',\n            addons: [{\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '1'\n                }]\n        },\n        {\n            id: '16',\n            name: 'Cisco SPA-508G Desk Phone with 2 Expansion Modules',\n            deviceClass: 'Desk Phone',\n            addons: [{\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '2'\n                }]\n        },\n        {\n            id: '16',\n            name: 'Cisco SPA-508G Desk Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '19',\n            name: 'Cisco SPA-525G2 Desk Phone with 1 Expansion Module',\n            deviceClass: 'Desk Phone',\n            addons: [{\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '1'\n                }]\n        },\n        {\n            id: '19',\n            name: 'Cisco SPA-525G2 Desk Phone with 2 Expansion Modules\\tDesk Phone',\n            addons: [{\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '2'\n                }]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone with 1 Expansion Module',\n            deviceClass: 'Desk Phone',\n            addons: [{\n                    id: '1',\n                    name: 'Plolycom Expansion',\n                    count: '1'\n                }]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone with 2 Expansion Modules',\n            deviceClass: 'Desk Phone',\n            addons: [{\n                    id: '1',\n                    name: 'Plolycom Expansion',\n                    count: '2'\n                }]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone with 3 Expansion Modules',\n            deviceClass: 'Desk Phone',\n            addons: [{\n                    id: '1',\n                    name: 'Plolycom Expansion',\n                    count: '3'\n                }]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '52',\n            name: 'Cisco SPA-122 ATA',\n            deviceClass: 'Analog Adapter'\n        },\n        {\n            id: '53',\n            name: 'Polycom VVX-500 Color Touchscreen',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '54',\n            name: 'Polycom VVX-310 Gigabit Ethernet Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '55',\n            name: 'Polycom VVX-410 Color Gigabit Ethernet Phone',\n            deviceClass: 'Desk Phone'\n        }\n    ];\n    module.exports = {\n        Class: DeviceModelHelper,\n        /**\n         * @param {Context} context\n         * @returns {DeviceModelHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('DeviceModelHelper', function () {\n                return new DeviceModelHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IDeviceModel\n     * @property {string} id\n     * @property {string} name\n     * @property {string} deviceClass\n     * @property {string} addons\n     */\n          /**\n     * @typedef {Object} IDeviceModelAddon\n     * @property {string} id\n     * @property {string} name\n     * @property {string} count\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Language', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function LanguageHelper(context) {\n        Helper.call(this, context);\n    }\n    LanguageHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @type {ILanguage[]}\n     */\n    LanguageHelper.prototype.languages = [\n        {\n            id: '1033',\n            name: 'English (US)'\n        },\n        {\n            id: '3084',\n            name: 'French (Canada)'\n        }\n    ];\n    module.exports = {\n        Class: LanguageHelper,\n        /**\n         * @param {Context} context\n         * @returns {LanguageHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('LanguageHelper', function () {\n                return new LanguageHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} ILanguage\n     * @property {string} id\n     * @property {string} name\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/State', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/List',\n    'core/Utils',\n    'helpers/Country'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, List = require('../core/List'), Utils = require('../core/Utils');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function StateHelper(context) {\n        Helper.call(this, context);\n        this.countryHelper = require('./Country').$get(context);\n    }\n    StateHelper.prototype = Object.create(Helper.prototype);\n    StateHelper.prototype.createUrl = function () {\n        return '/dictionary/state';\n    };\n    /**\n     * @param {IStateOptions} options\n     * @returns {function(IState)}\n     */\n    StateHelper.prototype.filter = function (options) {\n        options = Utils.extend({ countryId: '' }, options);\n        return List.filter([{\n                condition: options.countryId,\n                filterFn: function (item, opts) {\n                    return this.countryHelper.getId(item.country) == opts.condition;\n                }.bind(this)\n            }]);\n    };\n    module.exports = {\n        Class: StateHelper,\n        /**\n         * @param {Context} context\n         * @returns {StateHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('StateHelper', function () {\n                return new StateHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IState\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} name\n     * @property {string} isoCode\n     * @property {ICountry} country\n     */\n          /**\n     * @typedef {object} IStateOptions\n     * @property {string} countryId\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Location', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/List',\n    'core/Utils',\n    'helpers/State'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, List = require('../core/List'), Utils = require('../core/Utils');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function LocationHelper(context) {\n        Helper.call(this, context);\n        this.state = require('./State').$get(context);\n    }\n    LocationHelper.prototype = Object.create(Helper.prototype);\n    LocationHelper.prototype.createUrl = function () {\n        return '/dictionary/location';\n    };\n    /**\n     * @param {ILocationFilterOptions} options\n     * @returns {function(ILocation)}\n     */\n    LocationHelper.prototype.filter = function (options) {\n        var uniqueNPAs = [];\n        options = Utils.extend({\n            stateId: '',\n            onlyUniqueNPA: false\n        }, options);\n        return List.filter([\n            {\n                condition: options.stateId,\n                filterFn: function (item, opts) {\n                    return this.state.getId(item.state) == opts.condition;\n                }.bind(this)\n            },\n            {\n                condition: options.onlyUniqueNPA,\n                filterFn: function (item, opts) {\n                    if (uniqueNPAs.indexOf(item.npa) == -1) {\n                        uniqueNPAs.push(item.npa);\n                        return true;\n                    } else {\n                        return false;\n                    }\n                }\n            }\n        ]);\n    };\n    /**\n     * @param {IListComparatorOptions} [options]\n     * @returns {comparator}\n     */\n    LocationHelper.prototype.comparator = function (options) {\n        options = Utils.extend({ sortBy: 'npa' }, options);\n        if (options.sortBy == 'nxx') {\n            /**\n             * @param {ILocation} item\n             * @returns {number}\n             */\n            options.extractFn = function (item) {\n                return parseInt(item.npa) * 1000000 + parseInt(item.nxx);\n            };\n            options.compareFn = List.numberComparator;\n        }\n        return List.comparator(options);\n    };\n    module.exports = {\n        Class: LocationHelper,\n        /**\n         * @param {Context} context\n         * @returns {LocationHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('LocationHelper', function () {\n                return new LocationHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} ILocation\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} name\n     * @property {string} isoCode\n     * @property {string} npa\n     * @property {string} nxx\n     * @property {IState} state\n     */\n          /**\n     * @typedef {object} ILocationFilterOptions\n     * @property {string} stateId\n     * @property {boolean} onlyUniqueNPA\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/ShippingMethod', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ShippingMethodHelper(context) {\n        Helper.call(this, context);\n    }\n    ShippingMethodHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * TODO Remove when http://jira.ringcentral.com/browse/SDK-3 id done\n     * @type {IShippingMethod[]}\n     */\n    ShippingMethodHelper.prototype.shippingMethods = [\n        {\n            id: '1',\n            name: 'Ground Shipping (5-7 business days)'\n        },\n        {\n            id: '2',\n            name: '2-days Shipping'\n        },\n        {\n            id: '3',\n            name: 'Overnight Shipping'\n        }\n    ];\n    module.exports = {\n        Class: ShippingMethodHelper,\n        /**\n         * @param {Context} context\n         * @returns {ShippingMethodHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('ShippingMethodHelper', function () {\n                return new ShippingMethodHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IShippingMethod\n     * @property {string} id\n     * @property {string} name\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Timezone', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function TimezoneHelper(context) {\n        Helper.call(this, context);\n    }\n    TimezoneHelper.prototype = Object.create(Helper.prototype);\n    TimezoneHelper.prototype.createUrl = function () {\n        return '/dictionary/timezone';\n    };\n    module.exports = {\n        Class: TimezoneHelper,\n        /**\n         * @param {Context} context\n         * @returns {TimezoneHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('TimezoneHelper', function () {\n                return new TimezoneHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} ITimezone\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} name\n     * @property {string} description\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Account', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function AccountHelper(context) {\n        Helper.call(this, context);\n    }\n    AccountHelper.prototype = Object.create(Helper.prototype);\n    AccountHelper.prototype.createUrl = function () {\n        return '/account/~';\n    };\n    module.exports = {\n        Class: AccountHelper,\n        /**\n         * @param {Context} context\n         * @returns {AccountHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('AccountHelper', function () {\n                return new AccountHelper(context);\n            });\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/BlockedNumber', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Validator'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Validator = require('../core/Validator');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function BlockedNumberHelper(context) {\n        Helper.call(this, context);\n    }\n    BlockedNumberHelper.prototype = Object.create(Helper.prototype);\n    /**\n     *\n     * @param {IBlockedNumberOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    BlockedNumberHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (options.extensionId ? options.extensionId : '~') + '/blocked-number' + (id ? '/' + id : '');\n    };\n    /**\n     * @param {IBlockedNumber} item\n     */\n    BlockedNumberHelper.prototype.validate = function (item) {\n        return Validator.validate([\n            {\n                field: 'phoneNumber',\n                validator: Validator.phone(item.phoneNumber)\n            },\n            {\n                field: 'phoneNumber',\n                validator: Validator.required(item.phoneNumber)\n            },\n            {\n                field: 'name',\n                validator: Validator.required(item.name)\n            }\n        ]);\n    };\n    module.exports = {\n        Class: BlockedNumberHelper,\n        /**\n         * @param {Context} context\n         * @returns {BlockedNumberHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('BlockedNumberHelper', function () {\n                return new BlockedNumberHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IBlockedNumber\n     * @property {string} name\n     * @property {string} phoneNumber\n     */\n          /**\n     * @typedef {object} IBlockedNumberOptions\n     * @property {string} extensionId\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Extension', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/List',\n    'core/Utils'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, List = require('../core/List'), Utils = require('../core/Utils');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ExtensionHelper(context) {\n        Helper.call(this, context);\n    }\n    ExtensionHelper.prototype = Object.create(Helper.prototype);\n    ExtensionHelper.prototype.type = {\n        department: 'Department',\n        user: 'User',\n        announcement: 'Announcement',\n        voicemail: 'Voicemail'\n    };\n    /**\n     *\n     * @param {IExtensionOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    ExtensionHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~' + (options.departmentId ? '/department/' + options.departmentId + '/members' : '/extension') + (id ? '/' + id : '');\n    };\n    /**\n     * @param {IExtension} extension\n     * @returns {boolean}\n     */\n    ExtensionHelper.prototype.isUser = function (extension) {\n        return extension && extension.type == this.type.user;\n    };\n    /**\n     * @param {IExtension} extension\n     * @returns {boolean}\n     */\n    ExtensionHelper.prototype.isDepartment = function (extension) {\n        return extension && extension.type == this.type.department;\n    };\n    /**\n     * @param {IExtension} extension\n     * @returns {boolean}\n     */\n    ExtensionHelper.prototype.isAnnouncement = function (extension) {\n        return extension && extension.type == this.type.announcement;\n    };\n    /**\n     * @param {IExtension} extension\n     * @returns {boolean}\n     */\n    ExtensionHelper.prototype.isVoicemail = function (extension) {\n        return extension && extension.type == this.type.voicemail;\n    };\n    /**\n     * @param {IListComparatorOptions} [options]\n     * @returns {function(object, object)}\n     */\n    ExtensionHelper.prototype.comparator = function (options) {\n        return List.comparator(Utils.extend({\n            sortBy: 'extensionNumber',\n            compareFn: List.numberComparator\n        }, options));\n    };\n    /**\n     * @param {IExtensionFilterOptions} [options]\n     * @returns {function(IExtension)}\n     */\n    ExtensionHelper.prototype.filter = function (options) {\n        options = Utils.extend({\n            search: '',\n            type: ''\n        }, options);\n        return List.filter([\n            {\n                filterBy: 'type',\n                condition: options.type\n            },\n            {\n                condition: options.search.toLocaleLowerCase(),\n                filterFn: List.containsFilter,\n                extractFn: function (item) {\n                    return (item.name && item.name.toLocaleLowerCase() + ' ') + (item.extensionNumber && item.extensionNumber.toString().toLocaleLowerCase());\n                }\n            }\n        ]);\n    };\n    module.exports = {\n        Class: ExtensionHelper,\n        /**\n         * @param {Context} context\n         * @returns {ExtensionHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('ExtensionHelper', function () {\n                return new ExtensionHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IExtensionOptions\n     * @property {string} departmentId\n     */\n          /**\n     * @typedef {object} IExtensionFilterOptions\n     * @property {string} search\n     * @property {string} type\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/ch18s04.html#ShortExtensionInfo\n     * @typedef {object} IExtensionShort\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} extensionNumber\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/ch18s04.html#ExtensionInfo\n     * @typedef {object} IExtension\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} extensionNumber\n     * @property {string} name\n     * @property {string} type\n     * @property {IContactBrief} contact\n     * @property {IExtensionRegionalSettings} regionalSettings\n     * @property {IServiceFeature[]} serviceFeatures\n     * @property {string} status\n     * @property {string} setupWizardState\n     */\n          /**\n     * @typedef {object} IExtensionRegionalSettings\n     * @property {ITimezone} timezone\n     * @property {ILanguage} language\n     * @property {ICountry} homeCountry\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Presence', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Utils',\n    'helpers/Extension',\n    'core/Subscription'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Utils = require('../core/Utils');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function PresenceHelper(context) {\n        Helper.call(this, context);\n        this.extension = require('./Extension').$get(context);\n    }\n    PresenceHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @param {IPresenceOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    PresenceHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (id || '~') + '/presence' + (options.detailed ? '?detailedTelephonyState=true' : '');\n    };\n    /**\n     * @param {IPresence} presence\n     * @returns {string}\n     */\n    PresenceHelper.prototype.getId = function (presence) {\n        return presence && (this.extension.getId(presence.extension) || presence.extensionId);\n    };\n    /**\n     * @param {IPresence} presence\n     * @returns {boolean}\n     */\n    PresenceHelper.prototype.isAvailable = function (presence) {\n        return presence && presence.presenceStatus == 'Available';\n    };\n    /**\n     * @param {IPresenceOptions} [options]\n     * @param {string} [id]\n     * @returns {Subscription}\n     */\n    PresenceHelper.prototype.getSubscription = function (options, id) {\n        return require('../core/Subscription').$get(this.context).setEvents([this.createUrl(options, id)]);\n    };\n    /**\n     *\n     * @param {Subscription} subscription\n     * @param {IPresence[]} presences\n     * @param {IPresenceOptions} options\n     * @returns {*}\n     */\n    PresenceHelper.prototype.updateSubscription = function (subscription, presences, options) {\n        var events = presences.map(this.getId, this).map(function (id) {\n            return this.createUrl(options, id);\n        }, this);\n        subscription.addEvents(events);\n        return subscription;\n    };\n    /**\n     * @param {IExtension[]} extensions\n     * @param {IPresence[]} presences\n     * @param {bool} [merge]\n     * @returns {*}\n     */\n    PresenceHelper.prototype.attachToExtensions = function (extensions, presences, merge) {\n        var index = this.index(presences);\n        extensions.forEach(/** @param {IExtension} extension */\n        function (extension) {\n            var presence = index[this.extension.getId(extension)];\n            if (presence) {\n                if ('presence' in extension && merge) {\n                    Utils.extend(extension.presence, presence);\n                } else {\n                    extension.presence = presence;\n                }\n            }\n        }, this);\n    };\n    /**\n     * @param {IPresenceCall} presenceCall\n     * @returns {boolean}\n     */\n    PresenceHelper.prototype.isCallInProgress = function (presenceCall) {\n        return presenceCall && presenceCall.telephonyStatus != 'NoCall';\n    };\n    module.exports = {\n        Class: PresenceHelper,\n        /**\n         * @param {Context} context\n         * @returns {PresenceHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('PresenceHelper', function () {\n                return new PresenceHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {Object} IPresence\n     * @property {IExtension} extension\n     * @property {IPresenceCall[]} activeCalls\n     * @property {string} presenceStatus - Offline, Busy, Available\n     * @property {string} telephonyStatus - NoCall, CallConnected, Ringing, OnHold\n     * @property {string} userStatus - Offline, Busy, Available\n     * @property {string} dndStatus - TakeAllCalls, DoNotAcceptAnyCalls, DoNotAcceptDepartmentCalls, TakeDepartmentCallsOnly\n     * @property {boolean} allowSeeMyPresence\n     * @property {boolean} ringOnMonitoredCall\n     * @property {boolean} pickUpCallsOnHold\n     * @property {number} extensionId\n     * @property {number} sequence\n     */\n          /**\n     * @typedef {Object} IPresenceCall\n     * @property {string} direction\n     * @property {string} from\n     * @property {string} to\n     * @property {string} sessionId\n     * @property {string} id\n     * @property {string} telephonyStatus\n     */\n          /**\n     * @typedef {Object} IPresenceOptions\n     * @property {boolean} detailed\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Contact', [\n    'require',\n    'exports',\n    'module',\n    'core/Utils',\n    'core/Validator',\n    'core/Helper',\n    'core/List'\n], function (require, exports, module) {\n    'use strict';\n    var Utils = require('../core/Utils'), Validator = require('../core/Validator'), Helper = require('../core/Helper').Class, List = require('../core/List');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ContactHelper(context) {\n        Helper.call(this, context);\n    }\n    ContactHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @param {IContactOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    ContactHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        var root = '/account/~/extension/' + (options.extensionId ? options.extensionId : '~') + '/address-book';\n        if (options.sync)\n            return root + '-sync';\n        return root + (options.groupId ? '/group/' + options.groupId + '/contact' : '/contact') + (id ? '/' + id : '');\n    };\n    /**\n     * Returns all values of the given fields if value exists\n     * @param {(IContact|object)} where\n     * @param {Array} fields\n     * @param {boolean} [asHash]\n     * @protected\n     * @returns {Object}\n     */\n    ContactHelper.prototype.getFieldValues = function (where, fields, asHash) {\n        return fields.reduce(function (result, field) {\n            if (where && where[field]) {\n                if (asHash) {\n                    result[field] = where[field];\n                } else {\n                    result.push(where[field]);\n                }\n            }\n            return result;\n        }, asHash ? {} : []);\n    };\n    /**\n     * @param {IContact} contact\n     * @returns {string}\n     */\n    ContactHelper.prototype.getFullName = function (contact) {\n        return this.getFieldValues(contact, this.nameFields).join(' ');\n    };\n    /**\n     * @param {IContact} contact\n     * @param {boolean} [asHash]\n     * @returns {IContact}\n     */\n    ContactHelper.prototype.getEmails = function (contact, asHash) {\n        return this.getFieldValues(contact, this.emailFields, asHash);\n    };\n    /**\n     * @param {IContact} contact\n     * @param {boolean} [asHash]\n     * @returns {IContact}\n     */\n    ContactHelper.prototype.getPhones = function (contact, asHash) {\n        return this.getFieldValues(contact, this.phoneFields, asHash);\n    };\n    /**\n     * @param {IContact} contact\n     * @param {boolean} [asHash]\n     * @returns {IContact}\n     */\n    ContactHelper.prototype.getFaxes = function (contact, asHash) {\n        return this.getFieldValues(contact, this.faxFields, asHash);\n    };\n    /**\n     * @param {IContact} contact\n     * @param {boolean} [asHash]\n     * @returns {IContact}\n     */\n    ContactHelper.prototype.getAddresses = function (contact, asHash) {\n        return this.getFieldValues(contact, this.addressFields, asHash);\n    };\n    /**\n     * @param {IContact} contact\n     * @returns {boolean}\n     */\n    ContactHelper.prototype.isAlive = function (contact) {\n        return contact.availability == 'Alive';\n    };\n    /**\n     * Matches a contact against a given string, returns null if nothing found\n     * @param {IContact} contact\n     * @param {string} string\n     * @param {IContactMatchOptions} [options]\n     * @returns {(string|null)}\n     */\n    ContactHelper.prototype.match = function (contact, string, options) {\n        options = Utils.extend({\n            fields: [].concat(this.nameFields, this.emailFields, this.phoneFields, this.faxFields, this.otherFields),\n            inAddresses: true,\n            transformFn: function (value, options) {\n                return value ? value.toString().toLocaleLowerCase() : '';\n            },\n            strict: false\n        }, options);\n        string = options.transformFn(string, options);\n        var found = null;\n        if (!string)\n            return found;\n        function matchWith(value) {\n            // skip unnecessary cycles if match has been found\n            if (found)\n                return;\n            var transformed = options.transformFn(value, options);\n            if (!transformed)\n                return;\n            var match = options.strict ? transformed == string : transformed.indexOf(string) > -1;\n            if (match)\n                found = value;\n        }\n        // Search in fields\n        options.fields.forEach(function (field) {\n            matchWith(contact[field]);\n        });\n        // Search in addresses, skip unnecessary cycles if match has been found\n        if (options.inAddresses && !found)\n            this.addressFields.forEach(function (field) {\n                // skip unnecessary cycles if match has been found or no field value\n                if (!contact[field] || found)\n                    return;\n                this.addressSubFields.forEach(function (subField) {\n                    matchWith(contact[field][subField]);\n                });\n            }, this);\n        return found;\n    };\n    /**\n     * Matches a contact against a given phone number, returns null if nothing found\n     * @param {IContact} contact\n     * @param {string} phone\n     * @param {IContactMatchOptions} [options]\n     * @returns {string|null}\n     */\n    ContactHelper.prototype.matchAsPhone = function (contact, phone, options) {\n        return this.match(contact, phone, Utils.extend({\n            fields: [].concat(this.phoneFields, this.faxFields),\n            inAddresses: false,\n            transformFn: function (value, options) {\n                return value ? value.toString().replace(/[^\\d\\w]/gi, '') : '';    //TODO Trickier removal reqired;\n            },\n            strict: false\n        }, options));\n    };\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all given {ICallerInfo}\n     * Warning, this function may be performance-consuming, reduce the amount of items passed to contacts and callerInfos\n     * @param {ICallerInfo[]} callerInfos\n     * @param {IContact[]} contacts\n     * @param {IContactMatchOptions} [options]\n     */\n    ContactHelper.prototype.attachToCallerInfos = function (callerInfos, contacts, options) {\n        var self = this, callerInfoIndex = this.index(callerInfos, function (callerInfo) {\n                return callerInfo.phoneNumber;\n            }, true);\n        Utils.forEach(callerInfoIndex, function (indexedCallerInfos, phoneNumber) {\n            var foundContact = null, foundPhone = null;\n            contacts.some(function (contact) {\n                foundPhone = self.matchAsPhone(contact, phoneNumber, options);\n                if (foundPhone)\n                    foundContact = contact;\n                return foundPhone;\n            });\n            if (foundContact) {\n                indexedCallerInfos.forEach(function (callerInfo) {\n                    callerInfo.contact = foundContact;\n                    callerInfo.contactPhone = foundPhone;\n                });\n            }\n        });\n    };\n    /**\n     * @param {IListComparatorOptions} [options]\n     * @returns {function(object, object)}\n     */\n    ContactHelper.prototype.comparator = function (options) {\n        var self = this;\n        return List.comparator(Utils.extend({\n            extractFn: function (contact, options) {\n                return self.getFullName(contact);\n            }\n        }, options));\n    };\n    /**\n     * TODO Add filtering by group http://jira.ringcentral.com/browse/SDK-4\n     * @param {IContactOptions} [options]\n     * @returns {function(IContact)}\n     */\n    ContactHelper.prototype.filter = function (options) {\n        var self = this;\n        options = Utils.extend({\n            alive: true,\n            startsWith: '',\n            phonesOnly: false,\n            faxesOnly: false\n        }, options);\n        return List.filter([\n            {\n                condition: options.alive,\n                filterFn: this.isAlive\n            },\n            {\n                condition: options.startsWith,\n                filterFn: function (item, opts) {\n                    return self.match(item, opts.condition);\n                }\n            },\n            {\n                condition: options.phonesOnly,\n                filterFn: function (item, opts) {\n                    return self.getPhones(item).length > 0;\n                }\n            },\n            {\n                condition: options.faxesOnly,\n                filterFn: function (item, opts) {\n                    return self.getFaxes(item).length > 0;\n                }\n            }\n        ]);\n    };\n    /**\n     * @param {IContact} item\n     */\n    ContactHelper.prototype.validate = function (item) {\n        return Validator.validate([\n            {\n                field: 'firstName',\n                validator: Validator.required(item.firstName)\n            },\n            {\n                field: 'lastName',\n                validator: Validator.required(item.lastName)\n            },\n            {\n                field: 'email',\n                validator: Validator.email(item.email)\n            },\n            {\n                field: 'email2',\n                validator: Validator.email(item.email2)\n            },\n            {\n                field: 'email3',\n                validator: Validator.email(item.email3)\n            }\n        ]);\n    };\n    ContactHelper.prototype.phoneFields = [\n        'homePhone',\n        'homePhone2',\n        'businessPhone',\n        'businessPhone2',\n        'mobilePhone',\n        'companyPhone',\n        'assistantPhone',\n        'carPhone',\n        'otherPhone',\n        'callbackPhone'\n    ];\n    ContactHelper.prototype.faxFields = [\n        'businessFax',\n        'otherFax'\n    ];\n    ContactHelper.prototype.addressFields = [\n        'homeAddress',\n        'businessAddress',\n        'otherAddress'\n    ];\n    ContactHelper.prototype.addressSubFields = [\n        'street',\n        'city',\n        'state',\n        'zip'\n    ];\n    ContactHelper.prototype.nameFields = [\n        'firstName',\n        'middleName',\n        'lastName',\n        'nickName'\n    ];\n    ContactHelper.prototype.otherFields = [\n        'company',\n        'jobTitle',\n        'webPage',\n        'notes'\n    ];\n    ContactHelper.prototype.emailFields = [\n        'email',\n        'email2',\n        'email3'\n    ];\n    module.exports = {\n        Class: ContactHelper,\n        /**\n         * @param {Context} context\n         * @returns {ContactHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('ContactHelper', function () {\n                return new ContactHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IContactOptions\n     * @property {string} extensionId\n     * @property {string} groupId\n     */\n          /**\n     * @typedef {object} IContactFilterOptions\n     * @property {string} startsWith\n     * @property {boolean} alive\n     */\n          /**\n     * @typedef {object} IContactMatchOptions\n     * @property {function(object, IContactMatchOptions)} transformFn\n     * @property {boolean} strict - if false look for as sub string\n     * @property {boolean} inAddresses - look in addresses as well\n     * @property {string[]} fields - in which fields to look for\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch16s04.html#ContactAddressInfo\n     * @typedef {Object} IContactAddress\n     * @property {string} country\n     * @property {string} street\n     * @property {string} city\n     * @property {string} state\n     * @property {string} zip\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/ch18s04.html#ContactInfo\n     * @typedef {Object} IContactBrief\n     * @property {string} firstName\n     * @property {string} lastName\n     * @property {string} company\n     * @property {string} email\n     * @property {IContactAddress} businessAddress\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch16s04.html#ContactInfo\n     * @typedef {Object} IContact\n     *\n     * Shared:\n     * @property {string} id\n     * @property {string} uri\n     *\n     * Names:\n     * @property {string} firstName\n     * @property {string} lastName\n     * @property {string} company\n     * @property {string} nickName\n     * @property {string} middleName\n     *\n     * Emails:\n     * @property {string} email\n     * @property {string} email2\n     * @property {string} email3\n     *\n     * Addresses:\n     * @property {IContactAddress} businessAddress\n     * @property {IContactAddress} homeAddress\n     * @property {IContactAddress} otherAddress\n     *\n     * Phones:\n     * @property {string} homePhone\n     * @property {string} homePhone2\n     * @property {string} businessPhone\n     * @property {string} businessPhone2\n     * @property {string} mobilePhone\n     * @property {string} companyPhone\n     * @property {string} assistantPhone\n     * @property {string} carPhone\n     * @property {string} otherPhone\n     * @property {string} callbackPhone\n     *\n     * @property {string} businessFax\n     * @property {string} otherFax\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Call', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Utils',\n    'core/List',\n    'helpers/Presence',\n    'helpers/Contact'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Utils = require('../core/Utils'), List = require('../core/List');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function CallHelper(context) {\n        Helper.call(this, context);\n        this.presence = require('./Presence').$get(context);\n        this.contact = require('./Contact').$get(context);\n    }\n    CallHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @param {ICallOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    CallHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        if (!('personal' in options) && !('extensionId' in options))\n            options.personal = true;\n        return '/account/~/' + (options.personal || options.extensionId ? 'extension/' + (options.extensionId || '~') + '/' : '') + (options.active ? 'active-calls' : 'call-log') + (id ? '/' + id : '');\n    };\n    CallHelper.prototype.getSessionId = function (call) {\n        return call && call.sessionId;\n    };\n    CallHelper.prototype.isInProgress = function (call) {\n        return call && call.result == 'In Progress';\n    };\n    CallHelper.prototype.isAlive = function (call) {\n        return call && call.availability == 'Alive';\n    };\n    /**\n     * @param {ICall} call\n     * @returns {boolean}\n     */\n    CallHelper.prototype.isInbound = function (call) {\n        return call && call.direction == 'Inbound';\n    };\n    /**\n     * @param {ICall} call\n     * @returns {boolean}\n     */\n    CallHelper.prototype.isOutbound = function (call) {\n        return !this.isInbound(call);\n    };\n    /**\n     * @param {ICall} call\n     * @returns {boolean}\n     */\n    CallHelper.prototype.isMissed = function (call) {\n        return call && call.result == 'Missed';\n    };\n    /**\n     * @param {ICall} call\n     * @returns {boolean}\n     */\n    CallHelper.prototype.isFindMe = function (call) {\n        return call && call.action == 'FindMe';\n    };\n    /**\n     * @param {ICall} call\n     * @returns {ICallerInfo}\n     */\n    CallHelper.prototype.getCallerInfo = function (call) {\n        return this.isInbound(call) ? call.from : call.to;\n    };\n    /**\n     * @param {ICall} call\n     * @returns {ICallerInfo[]}\n     */\n    CallHelper.prototype.getAllCallerInfos = function (call) {\n        return [this.getCallerInfo(call)].concat(this.isInbound(call) ? call.to : call.from);\n    };\n    CallHelper.prototype.formatDuration = function (call) {\n        function addZero(v) {\n            return v < 10 ? '0' + v : v;\n        }\n        var duration = parseInt(call.duration), hours = Math.floor(duration / (60 * 60)), mins = Math.floor(duration % (60 * 60) / 60), secs = Math.floor(duration % 60);\n        return (hours ? hours + ':' : '') + addZero(mins) + ':' + addZero(secs);\n    };\n    /**\n     * @param {ICallFilterOptions} [options]\n     * @returns {function(ICall)}\n     */\n    CallHelper.prototype.filter = function (options) {\n        options = Utils.extend({\n            alive: true,\n            direction: '',\n            type: ''\n        }, options);\n        return List.filter([\n            //{condition: options.alive, filterFn: this.isAlive},\n            {\n                filterBy: 'direction',\n                condition: options.direction\n            },\n            {\n                filterBy: 'type',\n                condition: options.type\n            }\n        ]);\n    };\n    /**\n     * TODO Compare as dates\n     * @param {IListComparatorOptions} [options]\n     * @returns {function(object, object)}\n     */\n    CallHelper.prototype.comparator = function (options) {\n        return List.comparator(Utils.extend({ sortBy: 'startTime' }, options));\n    };\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all callerInfos found in\n     * all calls Warning, this function may be performance-consuming, reduce the amount of items passed to contacts\n     * and calls\n     * @param {IContact[]} contacts\n     * @param {ICall[]} calls\n     * @param {IContactMatchOptions} [options]\n     */\n    CallHelper.prototype.attachContacts = function (contacts, calls, options) {\n        var self = this;\n        // Flatten all caller infos from all messages\n        var callerInfos = calls.reduce(function (callerInfos, call) {\n            return callerInfos.concat(self.getAllCallerInfos(call));\n        }, []);\n        this.contact.attachToCallerInfos(callerInfos, contacts, options);\n    };\n    /**\n     * Check whether pair of calls are two legs of RingOut\n     * @param {ICall} outboundRingOutCall\n     * @param {ICall} inboundCall\n     * @param {ICallProcessingOptions} options\n     * @returns {boolean}\n     */\n    CallHelper.prototype.checkMergeability = function (outboundRingOutCall, inboundCall, options) {\n        function getTime(dateString) {\n            return new Date(dateString).getTime();\n        }\n        return (!options.strict || outboundRingOutCall.action && outboundRingOutCall.action.toLowerCase().indexOf('ringout') != -1) && // Check directions\n        outboundRingOutCall.direction == 'Outbound' && inboundCall.direction == 'Inbound' && // Check that start times are equal or close enough\n        (!inboundCall.startTime && !outboundRingOutCall.startTime || Math.abs(getTime(inboundCall.startTime) - getTime(outboundRingOutCall.startTime)) < (options.maxStartTimeDiscrepancy || 5000)) && // Check that numbers match\n        inboundCall.from.phoneNumber == outboundRingOutCall.to.phoneNumber && (inboundCall.to.phoneNumber == outboundRingOutCall.from.phoneNumber || inboundCall.to.name == outboundRingOutCall.from.name)    //TODO Maybe name check is not required\n;\n    };\n    /**\n     * @param {ICall} outboundRingOutCall\n     * @param {ICall} inboundCall\n     * @param {ICallProcessingOptions} [options]\n     * @returns {Array}\n     */\n    CallHelper.prototype.combineCalls = function (outboundRingOutCall, inboundCall, options) {\n        options = options || {};\n        var result = [];\n        outboundRingOutCall.hasSubsequent = true;\n        if (options.merge) {\n            outboundRingOutCall.duration = outboundRingOutCall.duration > inboundCall.duration ? outboundRingOutCall.duration : inboundCall.duration;\n            // TODO Usually information from inbound call is more accurate for unknown reason\n            outboundRingOutCall.from = inboundCall.to;\n            outboundRingOutCall.to = inboundCall.from;\n            // Push only one \"merged\" outbound call\n            result.push(outboundRingOutCall);\n        } else {\n            // Mark next call as subsequent\n            inboundCall.subsequent = true;\n            inboundCall.startTime = outboundRingOutCall.startTime;\n            // Needed for sort\n            // Push both calls, first outbound then inbound\n            result.push(outboundRingOutCall);\n            result.push(inboundCall);\n        }\n        return result;\n    };\n    /**\n     * (!) Experimental (!)\n     *\n     * Calls in Recent Calls (Call Log) or Active Calls arrays can be combined if they are, for example, two legs of\n     * one RingOut. The logic that stands behind this process is simple:\n     *\n     * - Calls must have opposite directions\n     * - Must have been started within a certain limited time frame\n     * - Must have same phone numbers in their Caller Info sections (from/to)\n     *\n     * ```js\n     * var processedCalls = Call.processCalls(callsArray, {strict: false, merge: true});\n     * ```\n     *\n     * Flags:\n     *\n     * - if `strict` is `true` then only calls with RingOut in `action` property will be affected\n     * - `merge` &mdash; controls whether to merge calls (reducing the length of array) or give them `subsequent`\n     *     and `hasSubsequent` properties\n     *\n     * @param {ICall[]} calls\n     * @param {ICallProcessingOptions} options\n     * @returns {ICall[]}\n     */\n    CallHelper.prototype.processCalls = function (calls, options) {\n        var processedCalls = [], callsToMerge = [], self = this;\n        // Iterate through calls\n        calls.forEach(function (call) {\n            var merged = false;\n            call.subsequent = false;\n            call.hasSubsequent = false;\n            // Second cycle to find other leg\n            // It is assumed that call is the outbound, secondCall is inbound\n            calls.some(function (secondCall) {\n                if (call === secondCall)\n                    return false;\n                if (self.checkMergeability(call, secondCall, options)) {\n                    // Push to result array merged call\n                    processedCalls = processedCalls.concat(self.combineCalls(call, secondCall, options));\n                    // Push to array calls that are merged\n                    callsToMerge.push(call);\n                    callsToMerge.push(secondCall);\n                    merged = true;\n                }\n                return merged;\n            });\n        });\n        // After all calls are merged, add non-merged calls\n        calls.forEach(function (call) {\n            if (callsToMerge.indexOf(call) == -1)\n                processedCalls.push(call);\n        });\n        return processedCalls;\n    };\n    /**\n     * Converts Presence's ActiveCall array into regular Calls array\n     * @param {IPresenceCall[]} activeCalls\n     * @returns {ICall[]}\n     */\n    CallHelper.prototype.parsePresenceCalls = function (activeCalls) {\n        return activeCalls.map(function (activeCall) {\n            return {\n                id: activeCall.id,\n                uri: '',\n                sessionId: activeCall.sessionId,\n                from: { phoneNumber: activeCall.from },\n                to: { phoneNumber: activeCall.to },\n                direction: activeCall.direction,\n                startTime: '',\n                duration: 0,\n                type: '',\n                action: '',\n                result: this.presence.isCallInProgress(activeCall) ? 'In Progress' : activeCall.telephonyStatus,\n                telephonyStatus: activeCall.telephonyStatus\n            };\n        }, this);\n    };\n    /**\n     * @param {ICall} call\n     * @returns {string}\n     */\n    CallHelper.prototype.getSignature = function (call) {\n        function cleanup(phoneNumber) {\n            return (phoneNumber || '').toString().replace(/[^0-9]/gi, '');\n        }\n        return call.direction + '|' + (call.from && cleanup(call.from.phoneNumber)) + '|' + (call.to && cleanup(call.to.phoneNumber));\n    };\n    /**\n     * @param {ICall[]} presenceCalls\n     * @param {IPresence} presence\n     * @returns {ICall[]}\n     */\n    CallHelper.prototype.mergePresenceCalls = function (presenceCalls, presence) {\n        var currentDate = new Date(), activeCalls = this.parsePresenceCalls(presence && presence.activeCalls || []).map(function (call) {\n                // delete property to make sure it is skipped during merge\n                delete call.startTime;\n                return call;\n            });\n        presenceCalls = this.merge(presenceCalls || [], activeCalls, this.getSessionId, true);\n        presenceCalls.forEach(function (call) {\n            if (!call.startTime)\n                call.startTime = currentDate.toISOString();\n        });\n        return presenceCalls;\n    };\n    /**\n     * @param {ICall[]} presenceCalls\n     * @param {ICall[]} calls\n     * @param {ICall[]} activeCalls\n     * @returns {ICall[]}\n     */\n    CallHelper.prototype.mergeAll = function (presenceCalls, calls, activeCalls) {\n        // First, merge calls into presence calls\n        var presenceAndCalls = this.merge(presenceCalls || [], calls || [], this.getSessionId, true);\n        // Second, merge activeCalls into previous result\n        return this.merge(presenceAndCalls, activeCalls || [], this.getSessionId, true);\n    };\n    module.exports = {\n        Class: CallHelper,\n        /**\n         * @param {Context} context\n         * @returns {CallHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('CallHelper', function () {\n                return new CallHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} ICall\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} sessionId\n     * @property {string} startTime\n     * @property {string} duration\n     * @property {string} type\n     * @property {string} direction\n     * @property {string} action\n     * @property {string} result\n     * @property {ICallerInfo} to\n     * @property {ICallerInfo} from\n     */\n          /**\n     * @typedef {object} ICallOptions\n     * @property {string} extensionId\n     * @property {boolean} active\n     * @property {boolean} personal\n     */\n          /**\n     * @typedef {object} ICallProcessingOptions\n     * @property {boolean} strict\n     * @property {boolean} merge\n     * @property {number} maxStartTimeDiscrepancy\n     */\n          /**\n     * @typedef {object} ICallFilterOptions\n     * @property {string} extensionId\n     * @property {string} direction\n     * @property {string} type\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/CallerInfo.html\n     * @typedef {Object} ICallerInfo\n     * @property {string} phoneNumber\n     * @property {string} extensionNumber\n     * @property {string} name\n     * @property {string} location\n     * @property {IContact} [contact] - corresponding contact (added by attachContacts methods)\n     * @property {string} [contactPhone] - contact's phone as written in contact (added by attachContacts methods)\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Conferencing', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ConferencingHelper(context) {\n        Helper.call(this, context);\n    }\n    ConferencingHelper.prototype = Object.create(Helper.prototype);\n    ConferencingHelper.prototype.createUrl = function () {\n        return '/account/~/extension/~/conferencing';\n    };\n    module.exports = {\n        Class: ConferencingHelper,\n        /**\n         * @param {Context} context\n         * @returns {ConferencingHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('ConferencingHelper', function () {\n                return new ConferencingHelper(context);\n            });\n        }\n    };\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/ContactGroup', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Validator'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Validator = require('../core/Validator');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ContactGroupHelper(context) {\n        Helper.call(this, context);\n    }\n    ContactGroupHelper.prototype = Object.create(Helper.prototype);\n    ContactGroupHelper.prototype.createUrl = function (options, id) {\n        return '/account/~/extension/~/address-book/group' + (id ? '/' + id : '');\n    };\n    /**\n     * @param {IContactGroup} item\n     */\n    ContactGroupHelper.prototype.validate = function (item) {\n        return Validator.validate([{\n                field: 'groupName',\n                validator: Validator.required(item && item.groupName)\n            }]);\n    };\n    module.exports = {\n        Class: ContactGroupHelper,\n        /**\n         * @param {Context} context\n         * @returns {ContactGroupHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('ContactGroupHelper', function () {\n                return new ContactGroupHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IContactGroup\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} notes\n     * @property {string} groupName\n     * @property {number} contactsCount\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Device', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Validator',\n    'helpers/Extension',\n    'helpers/DeviceModel'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Validator = require('../core/Validator');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function DeviceHelper(context) {\n        Helper.call(this, context);\n        this.extension = require('./Extension').$get(context);\n        this.deviceModel = require('./DeviceModel').$get(context);\n    }\n    DeviceHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @param {IDeviceOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    DeviceHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        if (options.order)\n            return '/account/~/order';\n        return '/account/~' + (options.extensionId ? '/extension/' + options.extensionId : '') + '/device' + (id ? '/' + id : '');\n    };\n    /**\n     * @param {IDevice} item\n     */\n    DeviceHelper.prototype.validate = function (item) {\n        return Validator.validate([\n            {\n                field: 'emergencyServiceAddress-street',\n                validator: Validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.street)\n            },\n            {\n                field: 'emergencyServiceAddress-city',\n                validator: Validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.city)\n            },\n            {\n                field: 'emergencyServiceAddress-state',\n                validator: Validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.state)\n            },\n            {\n                field: 'emergencyServiceAddress-country',\n                validator: Validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.country)\n            },\n            {\n                field: 'emergencyServiceAddress-zip',\n                validator: Validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.zip)\n            },\n            {\n                field: 'emergencyServiceAddress-customerName',\n                validator: Validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.customerName)\n            },\n            {\n                field: 'extension',\n                validator: Validator.required(this.extension.getId(item && item.extension))\n            },\n            {\n                field: 'model',\n                validator: Validator.required(this.deviceModel.getId(item && item.model))\n            }\n        ]);\n    };\n    module.exports = {\n        Class: DeviceHelper,\n        /**\n         * @param {Context} context\n         * @returns {DeviceHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('DeviceHelper', function () {\n                return new DeviceHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {Object} IDevice\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} type\n     * @property {string} name\n     * @property {string} serial\n     * @property {IDeviceModel} model\n     * @property {IExtensionShort} extension TODO IExtension?\n     * @property {IDeviceAddress} emergencyServiceAddress\n     * @property {IDeviceShipping} shipping\n     * @property {IDevicePhoneLine[]} phoneLines\n     */\n          /**\n     * @typedef {Object} IDeviceOrder\n     * @property {IDevice[]} devices\n     */\n          /**\n     * @typedef {Object} IDeviceAddress\n     * @property {string} street\n     * @property {string} street2\n     * @property {string} city\n     * @property {string} state\n     * @property {string} country\n     * @property {string} zip\n     * @property {string} customerName\n     */\n          /**\n     * @typedef {Object} IDeviceShipping\n     * @property {IDeviceAddress} address\n     * @property {IShippingMethod} method\n     * @property {string} status\n     */\n          /**\n     * @typedef {Object} IDevicePhoneLine\n     * @property {string} lineType\n     * @property {IPhoneNumber} phoneInfo\n     */\n          /**\n     * @typedef {Object} IDeviceOptions\n     * @property {string} extensionId\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/ForwardingNumber', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Utils',\n    'core/List'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Utils = require('../core/Utils'), List = require('../core/List');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ForwardingNumberHelper(context) {\n        Helper.call(this, context);\n    }\n    ForwardingNumberHelper.prototype = Object.create(Helper.prototype);\n    ForwardingNumberHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (options.extensionId || '~') + '/forwarding-number' + (id ? '/' + id : '');\n    };\n    ForwardingNumberHelper.prototype.getId = function (forwardingNumber) {\n        return forwardingNumber.id || forwardingNumber.phoneNumber;\n    };\n    ForwardingNumberHelper.prototype.hasFeature = function (phoneNumber, feature) {\n        return !!phoneNumber.features && phoneNumber.features.indexOf(feature) != -1;\n    };\n    /**\n     * @param {IListComparatorOptions} [options]\n     * @returns {function(object, object)}\n     */\n    ForwardingNumberHelper.prototype.comparator = function (options) {\n        return List.comparator(Utils.extend({ sortBy: 'label' }, options));\n    };\n    /**\n     * @param options\n     * @returns {function(IForwardingNumber)}\n     */\n    ForwardingNumberHelper.prototype.filter = function (options) {\n        var self = this;\n        options = Utils.extend({ features: [] }, options);\n        return List.filter([{\n                condition: options.features.length,\n                filterFn: function (item) {\n                    return options.features.some(function (feature) {\n                        return self.hasFeature(item, feature);\n                    });\n                }\n            }]);\n    };\n    module.exports = {\n        Class: ForwardingNumberHelper,\n        /**\n         * @param {Context} context\n         * @returns {ForwardingNumberHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('ForwardingNumberHelper', function () {\n                return new ForwardingNumberHelper(context);\n            });\n        }\n    };    /**\n     *\n     * @typedef {object} IForwardingNumber\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} label\n     * @property {string} phoneNumber\n     * @property {string} flipNumber\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Message', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Validator',\n    'core/Utils',\n    'core/List',\n    'core/Platform',\n    'helpers/Contact',\n    'core/Subscription'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Validator = require('../core/Validator'), Utils = require('../core/Utils'), List = require('../core/List');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function MessageHelper(context) {\n        Helper.call(this, context);\n        this.platform = require('../core/Platform').$get(context);\n        this.contact = require('./Contact').$get(context);\n    }\n    MessageHelper.prototype = Object.create(Helper.prototype);\n    /**\n     *\n     * @param {IMessageOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     * @exceptionalCase Different endpoint when creating SMS/Pager\n     */\n    MessageHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        var root = '/account/~/extension/' + (options.extensionId || '~');\n        if (options.fax)\n            return root + '/fax';\n        if (options.sms)\n            return root + '/sms';\n        if (options.pager)\n            return root + '/company-pager';\n        if (options.sync)\n            return root + '/message-sync';\n        return root + '/message-store' + (id ? '/' + id : '');\n    };\n    MessageHelper.prototype.isInbound = function (message) {\n        return message && message.direction == 'Inbound';\n    };\n    MessageHelper.prototype.isOutbound = function (message) {\n        return !this.isInbound(message);\n    };\n    MessageHelper.prototype.isSMS = function (message) {\n        return message && message.type == 'SMS';\n    };\n    MessageHelper.prototype.isPager = function (message) {\n        return message && message.type == 'Pager';\n    };\n    MessageHelper.prototype.isVoiceMail = function (message) {\n        return message && message.type == 'VoiceMail';\n    };\n    MessageHelper.prototype.isFax = function (message) {\n        return message && message.type == 'Fax';\n    };\n    MessageHelper.prototype.isAlive = function (message) {\n        //return (this.availability != 'Deleted' && this.availability != 'Purged');\n        return message && message.availability == 'Alive';\n    };\n    MessageHelper.prototype.isRead = function (message) {\n        return message.readStatus == 'Read';\n    };\n    MessageHelper.prototype.setIsRead = function (message, isRead) {\n        message.readStatus = !!isRead ? 'Read' : 'Unread';\n        return message;\n    };\n    MessageHelper.prototype.getAttachmentUrl = function (message, i) {\n        return message.attachments[i] ? this.platform.apiUrl(message.attachments[i].uri, {\n            addMethod: 'GET',\n            addServer: true,\n            addToken: true\n        }) : '';\n    };\n    MessageHelper.prototype.getAttachmentContentType = function (message, i) {\n        return message.attachments[i] ? message.attachments[i].contentType : '';\n    };\n    /**\n     * @returns {Subscription}\n     */\n    MessageHelper.prototype.getSubscription = function (options) {\n        return require('../core/Subscription').$get(this.context).setEvents([this.createUrl(options)]);\n    };\n    /**\n     * Returns from-phones if inbound (oterwise to-phones)\n     * @returns {ICallerInfo[]}\n     */\n    MessageHelper.prototype.getCallerInfos = function (message) {\n        return this.isInbound(message) ? [message.from] : message.to;\n    };\n    /**\n     * Returns first from-phones if inbound (oterwise to-phones), then vice-versa\n     * @returns {ICallerInfo[]}\n     */\n    MessageHelper.prototype.getAllCallerInfos = function (message) {\n        return this.getCallerInfos(message).concat(this.isInbound(message) ? message.to : [message.from]);\n    };\n    /**\n     * TODO Compare as dates\n     * @param {IListComparatorOptions} [options]\n     * @returns {function(object, object)}\n     */\n    MessageHelper.prototype.comparator = function (options) {\n        return List.comparator(Utils.extend({ sortBy: 'creationTime' }, options));\n    };\n    /**\n     * @param {IMessageFilterOptions} [options]\n     * @returns {function(IMessage)}\n     */\n    MessageHelper.prototype.filter = function (options) {\n        options = Utils.extend({\n            search: '',\n            alive: true,\n            direction: '',\n            conversationId: '',\n            readStatus: ''\n        }, options);\n        return List.filter([\n            {\n                condition: options.alive,\n                filterFn: this.isAlive\n            },\n            {\n                filterBy: 'type',\n                condition: options.type\n            },\n            {\n                filterBy: 'direction',\n                condition: options.direction\n            },\n            {\n                filterBy: 'conversationId',\n                condition: options.conversationId\n            },\n            {\n                filterBy: 'readStatus',\n                condition: options.readStatus\n            },\n            {\n                filterBy: 'subject',\n                condition: options.search,\n                filterFn: List.containsFilter\n            }\n        ]);\n    };\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all callerInfos found in all messages\n     * Warning, this function may be performance-consuming, reduce the amount of items passed to contacts and messages\n     * @param {IContact[]} contacts\n     * @param {IMessage[]} messages\n     * @param {IContactMatchOptions} [options]\n     */\n    MessageHelper.prototype.attachContacts = function (contacts, messages, options) {\n        var self = this;\n        // Flatten all caller infos from all messages\n        var callerInfos = messages.reduce(function (callerInfos, message) {\n            return callerInfos.concat(self.getAllCallerInfos(message));\n        }, []);\n        this.contact.attachToCallerInfos(callerInfos, contacts, options);\n    };\n    /**\n     *\n     * @param message\n     * @returns {IMessageShort}\n     */\n    MessageHelper.prototype.shorten = function (message) {\n        return {\n            from: message.from,\n            to: message.to,\n            text: message.subject\n        };\n    };\n    /**\n     * @param {IMessage} item\n     */\n    MessageHelper.prototype.validateSMS = function (item) {\n        return Validator.validate([\n            {\n                field: 'to',\n                validator: Validator.required(Utils.getProperty(item, 'to[0].phoneNumber'))\n            },\n            {\n                field: 'from',\n                validator: Validator.required(Utils.getProperty(item, 'from.phoneNumber'))\n            },\n            {\n                field: 'subject',\n                validator: Validator.required(Utils.getProperty(item, 'subject'))\n            },\n            {\n                field: 'subject',\n                validator: Validator.length(Utils.getProperty(item, 'subject'), 160)\n            }\n        ]);\n    };\n    /**\n     * @param {IMessage} item\n     */\n    MessageHelper.prototype.validatePager = function (item) {\n        return Validator.validate([\n            {\n                field: 'to',\n                validator: Validator.required(Utils.getProperty(item, 'to.extensionNumber'))\n            },\n            {\n                field: 'from',\n                validator: Validator.required(Utils.getProperty(item, 'from.extensionNumber'))\n            },\n            {\n                field: 'subject',\n                validator: Validator.required(Utils.getProperty(item, 'subject'))\n            },\n            {\n                field: 'subject',\n                validator: Validator.length(Utils.getProperty(item, 'subject'), 160)\n            }\n        ]);\n    };\n    module.exports = {\n        Class: MessageHelper,\n        /**\n         * @param {Context} context\n         * @returns {MessageHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('MessageHelper', function () {\n                return new MessageHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IMessage\n     * @property {string} id\n     * @property {string} uri\n     * @property {ICallerInfo[]} to\n     * @property {ICallerInfo} from\n     * @property {string} type\n     * @property {string} creationTime\n     * @property {string} readStatus\n     * @property {string} priority\n     * @property {IMessageAttachment} attachments\n     * @property {string} direction\n     * @property {string} availability\n     * @property {string} subject\n     * @property {string} messageStatus\n     * @property {string} conversationId\n     * @property {string} lastModifiedTime\n     */\n          /**\n     * @typedef {object} IMessageShort\n     * @property {ICallerInfo[]} to\n     * @property {ICallerInfo} from\n     * @property {string} text\n     */\n          /**\n     * @typedef {object} IMessageOptions\n     * @property {boolean} fax\n     * @property {boolean} sync\n     * @property {boolean} sms\n     * @property {boolean} pager\n     * @property {string} extensionId\n     */\n          /**\n     * @typedef {object} IMessageFilterOptions\n     * @property {boolean} alive\n     * @property {string} conversationId\n     * @property {string} direction\n     * @property {string} readStatus\n     * @property {string} type\n     */\n          /**\n     * @typedef {object} IMessageFaxAttachment\n     * @property {string} contentType\n     * @property {string} content\n     * @property {string} fileName\n     */\n          /**\n     * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch18s01.html#MessageAttachmentInfo\n     * @typedef {Object} IMessageAttachment\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} contentType\n     * @property {string} vmDuration\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/PhoneNumber', [\n    'require',\n    'exports',\n    'module',\n    'core/List',\n    'core/Utils',\n    'core/Helper',\n    'helpers/Extension'\n], function (require, exports, module) {\n    'use strict';\n    var List = require('../core/List'), Utils = require('../core/Utils'), Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function PhoneNumberHelper(context) {\n        Helper.call(this, context);\n        this.extension = require('./Extension').$get(context);\n    }\n    PhoneNumberHelper.prototype = Object.create(Helper.prototype);\n    /**\n     * @param {IPhoneNumberOptions} [options]\n     * @param {string} [id]\n     * @returns {string}\n     */\n    PhoneNumberHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        if (options.lookup)\n            return '/number-pool/lookup';\n        return '/account/~' + (options.extensionId ? '/extension/' + options.extensionId : '') + '/phone-number' + (id ? '/' + id : '');\n    };\n    PhoneNumberHelper.prototype.isSMS = function (phoneNumber) {\n        return this.hasFeature(phoneNumber, 'SmsSender');\n    };\n    PhoneNumberHelper.prototype.hasFeature = function (phoneNumber, feature) {\n        return !!phoneNumber.features && phoneNumber.features.indexOf(feature) != -1;\n    };\n    PhoneNumberHelper.prototype.reserve = function (phoneNumber, date) {\n        phoneNumber.reservedTill = new Date(date).toISOString();\n    };\n    PhoneNumberHelper.prototype.unreserve = function (phoneNumber) {\n        phoneNumber.reservedTill = null;\n    };\n    /**\n     * @param {IListComparatorOptions} [options]\n     * @returns {function(IPhoneNumber, IPhoneNumber)}\n     */\n    PhoneNumberHelper.prototype.comparator = function (options) {\n        return List.comparator(Utils.extend({\n            /**\n             * @param {IPhoneNumber} item\n             * @returns {string}\n             */\n            extractFn: function (item) {\n                return item.usageType + '-' + item.paymentType + '-' + item.type;\n            }\n        }, options));\n    };\n    /**\n     * TODO Add other filtering methods http://jira.ringcentral.com/browse/SDK-5\n     * @param {IPhoneNumberFilterOptions} options\n     * @returns {function(IForwardingNumber)}\n     */\n    PhoneNumberHelper.prototype.filter = function (options) {\n        var self = this;\n        options = Utils.extend({\n            usageType: '',\n            paymentType: '',\n            type: '',\n            features: []\n        }, options);\n        return List.filter([\n            {\n                filterBy: 'usageType',\n                condition: options.usageType\n            },\n            {\n                filterBy: 'paymentType',\n                condition: options.paymentType\n            },\n            {\n                filterBy: 'type',\n                condition: options.type\n            },\n            {\n                condition: options.features.length,\n                filterFn: function (item) {\n                    return options.features.some(function (feature) {\n                        return self.hasFeature(item, feature);\n                    });\n                }\n            }\n        ]);\n    };\n    module.exports = {\n        Class: PhoneNumberHelper,\n        /**\n         * @param {Context} context\n         * @returns {PhoneNumberHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('PhoneNumberHelper', function () {\n                return new PhoneNumberHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IPhoneNumber\n     * @property {string} id\n     * @property {string} uri\n     * @property {string} phoneNumber\n     * @property {string} paymentType - External, TollFree, Local\n     * @property {string} location\n     * @property {string} type - VoiceFax, FaxOnly, VoiceOnly\n     * @property {string} usageType - CompanyNumber, DirectNumber, CompanyFaxNumber, ForwardedNumber\n     * @property {array} features - CallerId, SmsSender\n     * @property {string} reservedTill - Date\n     * @property {string} error\n     */\n          /**\n     * @typedef {object} IPhoneNumberOptions\n     * @property {string} extensionId\n     * @property {true} lookup\n     * @property {string} countryId\n     * @property {string} paymentType\n     * @property {string} npa\n     * @property {string} nxx\n     * @property {string} line\n     * @property {string} exclude\n     */\n          /**\n     * @typedef {object} IPhoneNumberFilterOptions\n     * @property {string} paymentType\n     * @property {string} usageType\n     * @property {string} type\n     * @property {string[]} features\n     */\n          /**\n     * @typedef {object} IPhoneNumberOrder\n     * @property {IPhoneNumber[]} records\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Ringout', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper',\n    'core/Validator',\n    'helpers/Extension'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class, Validator = require('../core/Validator');\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function RingoutHelper(context) {\n        Helper.call(this, context);\n        this.extension = require('./Extension').$get(context);\n    }\n    RingoutHelper.prototype = Object.create(Helper.prototype);\n    RingoutHelper.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (options.extensionId || '~') + '/ringout' + (id ? '/' + id : '');\n    };\n    RingoutHelper.prototype.resetAsNew = function (object) {\n        object = Helper.prototype.resetAsNew.call(this, object);\n        if (object) {\n            delete object.status;\n        }\n        return object;\n    };\n    RingoutHelper.prototype.isInProgress = function (ringout) {\n        return ringout && !this.isNew(ringout) && ringout.status && ringout.status.callStatus == 'InProgress';\n    };\n    RingoutHelper.prototype.isSuccess = function (ringout) {\n        return ringout && !this.isNew(ringout) && ringout.status && ringout.status.callStatus == 'Success';\n    };\n    RingoutHelper.prototype.isError = function (ringout) {\n        return !this.isNew(ringout) && !this.isInProgress(ringout) && !this.isSuccess(ringout);\n    };\n    /**\n     * @param {IRingout} item\n     */\n    RingoutHelper.prototype.validate = function (item) {\n        return Validator.validate([\n            {\n                field: 'to',\n                validator: Validator.required(item && item.to && item.to.phoneNumber)\n            },\n            {\n                field: 'from',\n                validator: Validator.required(item && item.from && item.from.phoneNumber)\n            }\n        ]);\n    };\n    module.exports = {\n        Class: RingoutHelper,\n        /**\n         * @param {Context} context\n         * @returns {RingoutHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('RingoutHelper', function () {\n                return new RingoutHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IRingout\n     * @property {ICallerInfo} [from] (!) ONLY PHONE NUMBER\n     * @property {ICallerInfo} [to] (!) ONLY PHONE NUMBER\n     * @property {ICallerInfo} [callerId] (!) ONLY PHONE NUMBER\n     * @property {boolean} [playPrompt]\n     * @property {{callStatus:boolean, callerStatus:boolean, calleeStatus:boolean}} [status]\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('helpers/Service', [\n    'require',\n    'exports',\n    'module',\n    'core/Helper'\n], function (require, exports, module) {\n    'use strict';\n    var Helper = require('../core/Helper').Class;\n    /**\n     * @extends Helper\n     * @constructor\n     */\n    function ServiceHelper(context) {\n        Helper.call(this, context);\n    }\n    ServiceHelper.prototype = Object.create(Helper.prototype);\n    ServiceHelper.prototype.createUrl = function () {\n        return '/account/~/service-info';\n    };\n    /**\n     * @param {string} feature\n     * @param {IServiceFeature[]} serviceFeatures\n     * @returns {*}\n     */\n    ServiceHelper.prototype.isEnabled = function (feature, serviceFeatures) {\n        return serviceFeatures.reduce(function (value, f) {\n            if (f.featureName == feature)\n                value = f.enabled;\n            return value;\n        }, false);\n    };\n    ServiceHelper.prototype.isSmsEnabled = isServiceFeatureEnabledMethod('SMS');\n    ServiceHelper.prototype.isSmsReceivingEnabled = isServiceFeatureEnabledMethod('SMSReceiving');\n    ServiceHelper.prototype.isPresenceEnabled = isServiceFeatureEnabledMethod('Presence');\n    ServiceHelper.prototype.isRingOutEnabled = isServiceFeatureEnabledMethod('RingOut');\n    ServiceHelper.prototype.isInternationalCallingEnabled = isServiceFeatureEnabledMethod('InternationalCalling');\n    ServiceHelper.prototype.isDndEnabled = isServiceFeatureEnabledMethod('DND');\n    ServiceHelper.prototype.isFaxEnabled = isServiceFeatureEnabledMethod('Fax');\n    ServiceHelper.prototype.isFaxReceivingEnabled = isServiceFeatureEnabledMethod('FaxReceiving');\n    ServiceHelper.prototype.isVoicemailEnabled = isServiceFeatureEnabledMethod('Voicemail');\n    ServiceHelper.prototype.isPagerEnabled = isServiceFeatureEnabledMethod('Pager');\n    ServiceHelper.prototype.isPagerReceivingEnabled = isServiceFeatureEnabledMethod('PagerReceiving');\n    ServiceHelper.prototype.isVoipCallingEnabled = isServiceFeatureEnabledMethod('VoipCalling');\n    ServiceHelper.prototype.isVideoConferencingEnabled = isServiceFeatureEnabledMethod('VideoConferencing');\n    ServiceHelper.prototype.isSalesForceEnabled = isServiceFeatureEnabledMethod('SalesForce');\n    ServiceHelper.prototype.isIntercomEnabled = isServiceFeatureEnabledMethod('Intercom');\n    ServiceHelper.prototype.isPagingEnabled = isServiceFeatureEnabledMethod('Paging');\n    ServiceHelper.prototype.isConferencingEnabled = isServiceFeatureEnabledMethod('Conferencing');\n    ServiceHelper.prototype.isFreeSoftPhoneLinesEnabled = isServiceFeatureEnabledMethod('FreeSoftPhoneLines');\n    ServiceHelper.prototype.isHipaaComplianceEnabled = isServiceFeatureEnabledMethod('HipaaCompliance');\n    ServiceHelper.prototype.isCallParkEnabled = isServiceFeatureEnabledMethod('CallPark');\n    ServiceHelper.prototype.isOnDemandCallRecordingEnabled = isServiceFeatureEnabledMethod('OnDemandCallRecording');\n    function isServiceFeatureEnabledMethod(feature) {\n        return function (serviceFeatures) {\n            return this.isEnabled(feature, serviceFeatures);\n        };\n    }\n    module.exports = {\n        Class: ServiceHelper,\n        /**\n         * @param {Context} context\n         * @returns {ServiceHelper}\n         */\n        $get: function (context) {\n            return context.createSingleton('serviceHelper', function () {\n                return new ServiceHelper(context);\n            });\n        }\n    };    /**\n     * @typedef {object} IServiceFeature\n     * @property {string} featureName\n     * @property {boolean} enabled\n     */\n          /**\n     * @typedef {object} IService\n     * @property {IServiceFeature[]} serviceFeatures\n     * @property {string} servicePlanName\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\ndefine('RCSDK', [\n    'require',\n    'exports',\n    'module',\n    'core/Context',\n    'core/Ajax',\n    'core/AjaxObserver',\n    'core/xhr/XhrResponse',\n    'core/Platform',\n    'core/Cache',\n    'core/Subscription',\n    'core/PageVisibility',\n    'core/Helper',\n    'core/Observable',\n    'core/Validator',\n    'core/Log',\n    'core/Utils',\n    'core/List',\n    'helpers/Country',\n    'helpers/DeviceModel',\n    'helpers/Language',\n    'helpers/Location',\n    'helpers/ShippingMethod',\n    'helpers/State',\n    'helpers/Timezone',\n    'helpers/Account',\n    'helpers/BlockedNumber',\n    'helpers/Call',\n    'helpers/Conferencing',\n    'helpers/Contact',\n    'helpers/ContactGroup',\n    'helpers/Device',\n    'helpers/Extension',\n    'helpers/ForwardingNumber',\n    'helpers/Message',\n    'helpers/PhoneNumber',\n    'helpers/Presence',\n    'helpers/Ringout',\n    'helpers/Service'\n], function (require, exports, module) {\n    'use strict';\n    /**\n     * @param {IInjections} injections\n     * @returns {RCSDK}\n     */\n    module.exports = function (injections) {\n        /**\n         * @name RCSDK\n         * @constructor\n         */\n        function RCSDK(options) {\n            /** @private */\n            this._context = require('./core/Context').$get(injections);    //TODO Link Platform events with Subscriptions and the rest\n        }\n        RCSDK.version = '1.1.0';\n        // Internals\n        /**\n         * @returns {Context}\n         */\n        RCSDK.prototype.getContext = function () {\n            return this._context;\n        };\n        // Core\n        /**\n         */\n        RCSDK.prototype.getAjax = function () {\n            return require('./core/Ajax').$get(this.getContext());\n        };\n        /**\n         * @returns {AjaxObserver}\n         */\n        RCSDK.prototype.getAjaxObserver = function () {\n            return require('./core/AjaxObserver').$get(this.getContext());\n        };\n        /**\n         * @returns {XhrResponse}\n         */\n        RCSDK.prototype.getXhrResponse = function () {\n            return require('./core/xhr/XhrResponse').$get(this.getContext());\n        };\n        /**\n         * @returns {Platform}\n         */\n        RCSDK.prototype.getPlatform = function () {\n            return require('./core/Platform').$get(this.getContext());\n        };\n        /**\n         * @returns {Cache}\n         */\n        RCSDK.prototype.getCache = function () {\n            return require('./core/Cache').$get(this.getContext());\n        };\n        /**\n         * @returns {Subscription}\n         */\n        RCSDK.prototype.getSubscription = function () {\n            return require('./core/Subscription').$get(this.getContext());\n        };\n        /**\n         * @returns {PageVisibility}\n         */\n        RCSDK.prototype.getPageVisibility = function () {\n            return require('./core/PageVisibility').$get(this.getContext());\n        };\n        /**\n         * @returns {Helper}\n         */\n        RCSDK.prototype.getHelper = function () {\n            return require('./core/Helper').$get(this.getContext());\n        };\n        /**\n         * @returns {Observable}\n         */\n        RCSDK.prototype.getObservable = function () {\n            return require('./core/Observable').$get(this.getContext());\n        };\n        /**\n         * @returns {Validator}\n         */\n        RCSDK.prototype.getValidator = function () {\n            return require('./core/Validator').$get(this.getContext());\n        };\n        /**\n         * @returns {Log}\n         */\n        RCSDK.prototype.getLog = function () {\n            return require('./core/Log').$get(this.getContext());\n        };\n        /**\n         * @returns {Utils}\n         */\n        RCSDK.prototype.getUtils = function () {\n            return require('./core/Utils').$get(this.getContext());\n        };\n        /**\n         * @returns {List}\n         */\n        RCSDK.prototype.getList = function () {\n            return require('./core/List').$get(this.getContext());\n        };\n        // Helpers\n        /**\n         * @returns {CountryHelper}\n         */\n        RCSDK.prototype.getCountryHelper = function () {\n            return require('./helpers/Country').$get(this.getContext());\n        };\n        /**\n         * @returns {DeviceModelHelper}\n         */\n        RCSDK.prototype.getDeviceModelHelper = function () {\n            return require('./helpers/DeviceModel').$get(this.getContext());\n        };\n        /**\n         * @returns {LanguageHelper}\n         */\n        RCSDK.prototype.getLanguageHelper = function () {\n            return require('./helpers/Language').$get(this.getContext());\n        };\n        /**\n         * @returns {LocationHelper}\n         */\n        RCSDK.prototype.getLocationHelper = function () {\n            return require('./helpers/Location').$get(this.getContext());\n        };\n        /**\n         * @returns {ShippingMethodHelper}\n         */\n        RCSDK.prototype.getShippingMethodHelper = function () {\n            return require('./helpers/ShippingMethod').$get(this.getContext());\n        };\n        /**\n         * @returns {StateHelper}\n         */\n        RCSDK.prototype.getStateHelper = function () {\n            return require('./helpers/State').$get(this.getContext());\n        };\n        /**\n         * @returns {TimezoneHelper}\n         */\n        RCSDK.prototype.getTimezoneHelper = function () {\n            return require('./helpers/Timezone').$get(this.getContext());\n        };\n        /**\n         * @returns {AccountHelper}\n         */\n        RCSDK.prototype.getAccountHelper = function () {\n            return require('./helpers/Account').$get(this.getContext());\n        };\n        /**\n         * @returns {BlockedNumberHelper}\n         */\n        RCSDK.prototype.getBlockedNumberHelper = function () {\n            return require('./helpers/BlockedNumber').$get(this.getContext());\n        };\n        /**\n         * @returns {CallHelper}\n         */\n        RCSDK.prototype.getCallHelper = function () {\n            return require('./helpers/Call').$get(this.getContext());\n        };\n        /**\n         * @returns {ConferencingHelper}\n         */\n        RCSDK.prototype.getConferencingHelper = function () {\n            return require('./helpers/Conferencing').$get(this.getContext());\n        };\n        /**\n         * @returns {ContactHelper}\n         */\n        RCSDK.prototype.getContactHelper = function () {\n            return require('./helpers/Contact').$get(this.getContext());\n        };\n        /**\n         * @returns {ContactGroupHelper}\n         */\n        RCSDK.prototype.getContactGroupHelper = function () {\n            return require('./helpers/ContactGroup').$get(this.getContext());\n        };\n        /**\n         * @returns {DeviceHelper}\n         */\n        RCSDK.prototype.getDeviceHelper = function () {\n            return require('./helpers/Device').$get(this.getContext());\n        };\n        /**\n         * @returns {ExtensionHelper}\n         */\n        RCSDK.prototype.getExtensionHelper = function () {\n            return require('./helpers/Extension').$get(this.getContext());\n        };\n        /**\n         * @returns {ForwardingNumberHelper}\n         */\n        RCSDK.prototype.getForwardingNumberHelper = function () {\n            return require('./helpers/ForwardingNumber').$get(this.getContext());\n        };\n        /**\n         * @returns {MessageHelper}\n         */\n        RCSDK.prototype.getMessageHelper = function () {\n            return require('./helpers/Message').$get(this.getContext());\n        };\n        /**\n         * @returns {PhoneNumberHelper}\n         */\n        RCSDK.prototype.getPhoneNumberHelper = function () {\n            return require('./helpers/PhoneNumber').$get(this.getContext());\n        };\n        /**\n         * @returns {PresenceHelper}\n         */\n        RCSDK.prototype.getPresenceHelper = function () {\n            return require('./helpers/Presence').$get(this.getContext());\n        };\n        /**\n         * @returns {RingoutHelper}\n         */\n        RCSDK.prototype.getRingoutHelper = function () {\n            return require('./helpers/Ringout').$get(this.getContext());\n        };\n        /**\n         * @returns {ServiceHelper}\n         */\n        RCSDK.prototype.getServiceHelper = function () {\n            return require('./helpers/Service').$get(this.getContext());\n        };\n        /** @type {window} */\n        var root = new Function('return this')();\n        function getXHR() {\n            return root.XMLHttpRequest || function () {\n                try {\n                    return new ActiveXObject('Msxml2.XMLHTTP.6.0');\n                } catch (e1) {\n                }\n                try {\n                    return new ActiveXObject('Msxml2.XMLHTTP.3.0');\n                } catch (e2) {\n                }\n                try {\n                    return new ActiveXObject('Msxml2.XMLHTTP');\n                } catch (e3) {\n                }\n                throw new Error('This browser does not support XMLHttpRequest.');\n            };\n        }\n        function getCryptoJS() {\n            return root.CryptoJS || typeof CryptoJS !== 'undefined' && CryptoJS;\n        }\n        function getLocalStorage() {\n            return root.localStorage;\n        }\n        function getPUBNUB() {\n            return root.PUBNUB || typeof PUBNUB !== 'undefined' && PUBNUB;\n        }\n        function getPromise() {\n            return root.Promise;\n        }\n        injections = injections || {};\n        injections.CryptoJS = injections.CryptoJS || getCryptoJS();\n        injections.localStorage = injections.localStorage || getLocalStorage();\n        injections.Promise = injections.Promise || getPromise();\n        injections.PUBNUB = injections.PUBNUB || getPUBNUB();\n        injections.XHR = injections.XHR || getXHR();\n        return RCSDK;\n    };    /**\n     * @typedef {Object} IInjections\n     * @property {PUBNUB} PUBNUB\n     * @property {CryptoJS} CryptoJS\n     * @property {Storage} localStorage\n     * @property {XMLHttpRequest} XHR\n     * @property {Promise} Promise\n     */\n});","/**\n * @description RingPlatform JS SDK\n * @copyright © 2014-2015 RingCentral, Inc. All rights reserved.\n */\n(function() {\n\n    if (typeof exports !== 'undefined') { // NodeJS\n\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = RCSDK({\n                CryptoJS: require('crypto-js'),\n                localStorage: new (require('dom-storage'))(),\n                Promise: require('es6-promise').Promise,\n                PUBNUB: require('pubnub'),\n                XHR: require('xhr2')\n            });\n        }\n\n    } else if (typeof define === 'function' && define.amd) { // RequireJS\n\n        define(['crypto-js', 'pubnub', 'es6-promise'], function(CryptoJS, PUBNUB) { // amdclean\n            return RCSDK({\n                CryptoJS: CryptoJS,\n                PUBNUB: PUBNUB\n            });\n        });\n\n    } else { // Standalone in browser\n\n        RCSDK.noConflict = (function(old) {\n            return function() {\n                root.RCSDK = old;\n                RCSDK.noConflict = undefined;\n                return RCSDK;\n            };\n        })(root.RCSDK);\n\n        root.RCSDK = RCSDK({});\n\n    }\n\n})();"],"sourceRoot":"/source/"}