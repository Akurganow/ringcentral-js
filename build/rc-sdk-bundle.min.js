!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("dom-storage"),function(){try{return require("xhr2")}catch(e){}}()):"function"==typeof define&&define.amd?define(["exports","exports"],t):"object"==typeof exports?exports.RCSDK=t(require("dom-storage"),function(){try{return require("xhr2")}catch(e){}}()):e.RCSDK=t(e.localStorage,e.XMLHttpRequest)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_2__){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(3),i=n(4),o=n(5),s=n(6),u=n(7),a=n(8),c=n(9),p=n(10),l=n(11),h=n(12),f=n(13),d=n(14),y=n(15),g=n(16),m=n(17),v=n(18),b=n(19),_=n(20),x=n(21),S=n(22),w=n(23),E=n(24),C=n(25),k=n(26),P=n(27),T=n(28),O=n(29),A=n(30),M=n(31),I=n(32),F=n(33),N=n(34),D=n(35),H=n(36),R=n(37),B=n(38),j=n(40),U=n(39),L=function(){function e(t){t=t||{},this._context=a.$get(e.injections),this.getCache().setPrefix(t.cachePrefix||""),this.getPlatform().setServer(t.server||"").setCredentials(t.appKey||"",t.appSecret||"")}return e.prototype.getContext=function(){return this._context},e.prototype.getAjaxObserver=function(){return s.$get(this.getContext())},e.prototype.getXhrResponse=function(){return o.$get(this.getContext())},e.prototype.getPlatform=function(){return d.$get(this.getContext())},e.prototype.getCache=function(){return u.$get(this.getContext())},e.prototype.getSubscription=function(){return y.$get(this.getContext())},e.prototype.getPageVisibility=function(){return f.$get(this.getContext())},e.prototype.getHelper=function(){return c.$get(this.getContext())},e.prototype.getObservable=function(){return h.$get(this.getContext())},e.prototype.getValidator=function(){return m.$get(this.getContext())},e.prototype.getLog=function(){return l.$get(this.getContext())},e.prototype.getUtils=function(){return g.$get(this.getContext())},e.prototype.getList=function(){return p.$get(this.getContext())},e.prototype.getCountryHelper=function(){return E.$get(this.getContext())},e.prototype.getDeviceModelHelper=function(){return k.$get(this.getContext())},e.prototype.getLanguageHelper=function(){return O.$get(this.getContext())},e.prototype.getLocationHelper=function(){return A.$get(this.getContext())},e.prototype.getShippingMethodHelper=function(){return H.$get(this.getContext())},e.prototype.getStateHelper=function(){return R.$get(this.getContext())},e.prototype.getTimezoneHelper=function(){return B.$get(this.getContext())},e.prototype.getAccountHelper=function(){return v.$get(this.getContext())},e.prototype.getBlockedNumberHelper=function(){return b.$get(this.getContext())},e.prototype.getCallHelper=function(){return _.$get(this.getContext())},e.prototype.getConferencingHelper=function(){return w.$get(this.getContext())},e.prototype.getContactHelper=function(){return x.$get(this.getContext())},e.prototype.getContactGroupHelper=function(){return S.$get(this.getContext())},e.prototype.getDeviceHelper=function(){return C.$get(this.getContext())},e.prototype.getExtensionHelper=function(){return P.$get(this.getContext())},e.prototype.getForwardingNumberHelper=function(){return T.$get(this.getContext())},e.prototype.getMessageHelper=function(){return M.$get(this.getContext())},e.prototype.getPhoneNumberHelper=function(){return I.$get(this.getContext())},e.prototype.getPresenceHelper=function(){return F.$get(this.getContext())},e.prototype.getRingoutHelper=function(){return N.$get(this.getContext())},e.prototype.getServiceHelper=function(){return D.$get(this.getContext())},e.version="1.3.0",e.url={sandbox:"https://platform.devtest.ringcentral.com",production:"https://platform.ringcentral.com"},e.injections={localStorage:"undefined"!=typeof localStorage?localStorage:n(1),Promise:"undefined"!=typeof Promise?Promise:j.Promise,PUBNUB:U,XHR:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}try{return new(n(2))}catch(o){}throw new Error("This browser does not support XMLHttpRequest.")},pubnubMock:r,xhrMock:i},e}();e.exports=L},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(e){if("undefined"==typeof __WEBPACK_EXTERNAL_MODULE_2__){var t=new Error('Cannot find module "undefined"');throw t.code="MODULE_NOT_FOUND",t}e.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(e,t,n){function r(e){return new u(e)}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(12),s=function(e){function t(t,n){this.options=n,this.crypto_obj=t.getPubnubReal().crypto_obj,e.call(this,t)}return i(t,e),t.prototype.ready=function(){},t.prototype.subscribe=function(e){this.on("message-"+e.channel,e.message)},t.prototype.unsubscribe=function(e){this.off("message-"+e.channel)},t.prototype.receiveMessage=function(e,t){this.emit("message-"+t,e,"env",t)},t}(o.Observable);t.PubnubMock=s;var u=function(){function e(e){this.context=e,this.crypto_obj=e.getPubnubReal().crypto_obj}return e.prototype.init=function(e){return new s(this.context,e)},e}();t.PubnubFactory=u,t.$get=r},function(e,t,n){function r(e){return new u(e)}var i=n(16),o=n(11),s=n(5),u=function(){function e(e){this.context=e,this.responses=s.$get(e),this.log=o.$get(e),this.utils=i.$get(e),this.async=!0,this.method="",this.url="",this.requestHeaders={},this.withCredentials=!1,this.data=null,this.readyState=0,this.responseHeaders={},this.status=0}return e.prototype.getResponseHeader=function(e){return this.responseHeaders[e.toLowerCase()]},e.prototype.setRequestHeader=function(e,t){this.requestHeaders[e.toLowerCase()]=t},e.prototype.getAllResponseHeaders=function(){var e=[];return this.utils.forEach(this.responseHeaders,function(t,n){e.push(n+":"+t)}),e.join("\n")},e.prototype.open=function(e,t,n){this.method=e,this.url=t,this.async=n},e.prototype.send=function(e){var t=this,n=this.getRequestHeader("Content-Type");this.data=e,this.data&&"string"==typeof this.data&&("application/json"==n&&(this.data=JSON.parse(this.data)),"application/x-www-form-urlencoded"==n&&(this.data=this.utils.parseQueryString(this.data))),this.log.debug("API REQUEST",this.method,this.url);var r=this.responses.find(this);if(!r)return void setTimeout(function(){t.onerror&&t.onerror(new Error("Unknown request: "+t.url))},1);this.setStatus(200),this.setResponseHeader("Content-Type","application/json");var i=r.response(this),o=this.context.getPromise(),s=function(e){"application/json"==t.getResponseHeader("Content-Type")&&(e=JSON.stringify(e)),t.responseText=e,setTimeout(function(){t.onload&&t.onload()},1)};i instanceof o?i.then(s.bind(this))["catch"](this.onerror.bind(this)):s(i)},e.prototype.abort=function(){this.log.debug("XhrMock.destroy(): Aborted")},e.prototype.getRequestHeader=function(e){return this.requestHeaders[e.toLowerCase()]},e.prototype.setResponseHeader=function(e,t){this.responseHeaders[e.toLowerCase()]=t},e.prototype.setStatus=function(e){return this.status=e,this},e}();t.XhrMock=u,t.$get=r},function(e,t){function n(e){return e.createSingleton("XhrResponse",function(){return new r(e)})}var r=function(){function e(){this.responses=[]}return e.prototype.add=function(e){this.responses.push(e)},e.prototype.clear=function(){this.responses=[]},e.prototype.find=function(e){var t=null;return this.responses.forEach(function(n){e.url.indexOf(n.path)>-1&&(!n.test||n.test(e))&&(t=n)}),t},e}();t.XhrResponse=r,t.$get=n},function(e,t,n){function r(e){return e.createSingleton("AjaxObserver",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(12),s=function(e){function t(){e.apply(this,arguments),this.events={beforeRequest:"beforeRequest",requestSuccess:"requestSuccess",requestError:"requestError"}}return i(t,e),t}(o.Observable);t.AjaxObserver=s,t.$get=r},function(e,t){function n(e){return e.createSingleton("Cache",function(){return new r(e)})}var r=function(){function e(e){this.setPrefix(),this.context=e,this.storage=e.getLocalStorage()}return e.prototype.setPrefix=function(e){return this.prefix=e||"rc-",this},e.prototype.prefixKey=function(e){return this.prefix+e},e.prototype.setItem=function(e,t){return this.storage.setItem(this.prefixKey(e),JSON.stringify(t)),this},e.prototype.removeItem=function(e){return this.storage.removeItem(this.prefixKey(e)),this},e.prototype.getItem=function(e){var t=this.storage.getItem(this.prefixKey(e));return t?JSON.parse(t):null},e.prototype.clean=function(){for(var e in this.storage)this.storage.hasOwnProperty(e)&&0===e.indexOf(this.prefix)&&(this.storage.removeItem(e),delete this.storage[e]);return this},e}();t.Cache=r,t.$get=n},function(e,t){function n(e){return new r(e)}var r=function(){function e(e){this.singletons={},this.injections=e,this.stubPubnub=!1,this.stubAjax=!1}return e.prototype.createSingleton=function(e,t){return this.singletons[e]||(this.singletons[e]=t()),this.singletons[e]},e.prototype.usePubnubStub=function(e){return this.stubPubnub=!!e,this},e.prototype.useAjaxStub=function(e){return this.stubAjax=!!e,this},e.prototype.getPubnub=function(){return this.stubPubnub?this.injections.pubnubMock.$get(this):this.getPubnubReal()},e.prototype.getPubnubReal=function(){return this.injections.PUBNUB},e.prototype.getLocalStorage=function(){var e=this;return this.createSingleton("localStorage",function(){return"function"!=typeof e.injections.localStorage?e.injections.localStorage:new e.injections.localStorage})},e.prototype.getPromise=function(){return this.injections.Promise},e.prototype.getXHR=function(){return this.stubAjax?this.injections.xhrMock.$get(this):this.injections.XHR()},e}();t.Context=r,t.$get=n},function(e,t,n){function r(e){return new o(e)}var i=n(16),o=function(){function e(e){this.defaultProperty="id",this.context=e,this.utils=i.$get(e)}return e.prototype.getContext=function(){return this.context},e.prototype.createUrl=function(){return""},e.prototype.getId=function(e){return e&&e[this.defaultProperty]},e.prototype.isNew=function(e){return!this.getId(e)||!this.getUri(e)},e.prototype.resetAsNew=function(e){return e&&(delete e.id,delete e.uri),e},e.prototype.getUri=function(e){return e&&e.uri},e.prototype.parseMultipartResponse=function(e){return e.isMultipart()?e.data.filter(function(e){return!e.error}).map(function(e){return e.data}):[e.data]},e.prototype.loadRequest=function(e,t){return this.utils.extend(t||{},{url:t&&t.url||e&&this.getUri(e)||this.createUrl(),method:t&&t.method||"GET"})},e.prototype.saveRequest=function(e,t){if(!(e||t&&(t.post||t.body)))throw new Error("No Object");return this.utils.extend(t||{},{method:t&&t.method||(this.isNew(e)?"POST":"PUT"),url:t&&t.url||this.getUri(e)||this.createUrl(),body:t&&(t.body||t.post)||e})},e.prototype.deleteRequest=function(e,t){if(t=t||{},!(this.getUri(e)||t&&t.url))throw new Error("Object has to be not new or URL must be provided");return this.utils.extend(t||{},{method:t&&t.method||"DELETE",url:t&&t.url||this.getUri(e)})},e.prototype.syncRequest=function(e){return e=e||{},e.url=e.url||this.createUrl({sync:!0}),e.query=e.query||e.get||{},e.query.syncToken?e.query={syncType:"ISync",syncToken:e.get.syncToken}:e.query.syncType="FSync",e},e.prototype.nextPageExists=function(e){return e&&e.navigation&&"nextPage"in e.navigation},e.prototype.index=function(e,t,n){return t=t||this.getId.bind(this),e=e||[],e.reduce(function(e,r){var i=t(r);return!i||e[i]&&!n?e:(n?(e[i]||(e[i]=[]),e[i].push(r)):e[i]=r,e)},{})},e.prototype.merge=function(e,t,n,r){var i=this;n=n||this.getId.bind(this),e=e||[],t=t||[];var o=this.index(t,n),s=[],u=e.map(function(e){var t=n(e),u=o[t];return u&&s.push(t),u?r?i.utils.extend(e,u):u:e});return t.forEach(function(e){-1==s.indexOf(n(e))&&u.push(e)}),u},e}();t.Helper=o,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("List",function(){return new o(e)})}var i=n(16),o=function(){function e(e){this.context=e,this.utils=i.$get(e),this.numberComparator=this.numberComparator.bind(this),this.stringComparator=this.stringComparator.bind(this)}return e.prototype.propertyExtractor=function(e){return function(t){return e?t&&t[e]||null:t}},e.prototype.stringComparator=function(e,t){return this.utils.parseString(e).localeCompare(this.utils.parseString(t))},e.prototype.numberComparator=function(e,t){return this.utils.parseNumber(e)-this.utils.parseNumber(t)},e.prototype.comparator=function(e){return e=this.utils.extend({extractFn:this.propertyExtractor(e&&e.sortBy||null).bind(this),compareFn:this.stringComparator.bind(this)},e),function(t,n){return e.compareFn(e.extractFn(t,e),e.extractFn(n,e),e)}},e.prototype.equalsFilter=function(e,t){return t.condition===e},e.prototype.containsFilter=function(e,t){return e&&e.toString().indexOf(t.condition)>-1},e.prototype.regexpFilter=function(e,t){if(!(t.condition instanceof RegExp))throw new Error("Condition must be an instance of RegExp");return t.condition.test(e)},e.prototype.filter=function(e){var t=this,n=this;return e=(e||[]).map(function(e){return t.utils.extend({condition:"",extractFn:n.propertyExtractor(e&&e.filterBy||null).bind(t),filterFn:n.equalsFilter.bind(t)},e)}),function(t){return e.reduce(function(e,n){return e&&n.condition?n.filterFn(n.extractFn(t,n),n):e},!0)}},e}();t.List=o,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Log",function(){return new o(e,console)})}var i=n(16),o=function(){function e(e,t){t||(t={log:function(){},warn:function(){},info:function(){},error:function(){}}),this.context=e,this.console=t,this.utils=i.$get(e),this.logDebug=!1,this.logInfo=!1,this.logWarnings=!1,this.logErrors=!1,this.addTimestamps=!1}return e.prototype.disableAll=function(){this.logDebug=!1,this.logInfo=!1,this.logWarnings=!1,this.logErrors=!1},e.prototype.enableAll=function(){this.logDebug=!0,this.logInfo=!0,this.logWarnings=!0,this.logErrors=!0},e.prototype.parseArguments=function(e){return e=this.utils.argumentsToArray(e),this.addTimestamps&&e.unshift((new Date).toLocaleString(),"-"),e},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.logDebug&&this.console.log.apply(this.console,this.parseArguments(arguments))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.logInfo&&this.console.info.apply(this.console,this.parseArguments(arguments))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.logWarnings&&this.console.warn.apply(this.console,this.parseArguments(arguments))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.logErrors&&this.console.error.apply(this.console,this.parseArguments(arguments))},e}();t.Log=o,t.$get=r},function(e,t,n){function r(e){return new s(e)}var i=n(16),o=n(11),s=function(){function e(t){if(!(this instanceof e))throw new Error("Observable(): New operator was omitted");Object.defineProperty(this,"listeners",{value:{},enumerable:!1,writable:!0}),Object.defineProperty(this,"oneTimeEvents",{value:{},enumerable:!1,writable:!0}),Object.defineProperty(this,"oneTimeArguments",{value:{},enumerable:!1,writable:!0}),this.context=t,this.utils=i.$get(t),this.log=o.$get(t)}return e.prototype.hasListeners=function(e){return e in this.listeners},e.prototype.registerOneTimeEvent=function(e){this.oneTimeEvents[e]=!1,this.oneTimeArguments[e]=[]},e.prototype.on=function(e,t){var n=this;if("string"==typeof e&&(e=[e]),!e)throw new Error("No events to subscribe to");if("function"!=typeof t)throw new Error("Callback must be a function");var r=this;return e.forEach(function(e){r.hasListeners(e)||(r.listeners[e]=[]),r.listeners[e].push(t),r.isOneTimeEventFired(e)&&(n.log.debug("Observable.on(%s): One-time event has been fired already, executing callback",e),t.apply(r,r.getOneTimeEventArgumens(e)))}),this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(this.isOneTimeEventFired(e))return this.log.debug("Observable.emit(%s): One-time event has been fired already",e),null;var i=null;return this.isOneTimeEvent(e)&&(this.setOneTimeEventFired(e),this.setOneTimeEventArgumens(e,n)),this.hasListeners(e)?(this.listeners[e].some(function(e){return i=e.apply(t,n),i===!1}),i):null},e.prototype.off=function(e,t){var n=this;if(e)if(t){if(!this.hasListeners(e))return this;this.listeners[e].forEach(function(r,i){r===t&&delete n.listeners[e][i]})}else delete this.listeners[e];else this.listeners={},this.oneTimeEvents={},this.oneTimeArguments={};return this},e.prototype.isOneTimeEvent=function(e){return e in this.oneTimeEvents},e.prototype.isOneTimeEventFired=function(e){return this.isOneTimeEvent(e)?this.oneTimeEvents[e]:!1},e.prototype.setOneTimeEventFired=function(e){this.oneTimeEvents[e]=!0},e.prototype.setOneTimeEventArgumens=function(e,t){this.oneTimeArguments[e]=t},e.prototype.getOneTimeEventArgumens=function(e){return this.oneTimeArguments[e]},e.prototype.offAll=function(){return this.off()},e.prototype.destroy=function(){return this.off(),this.log.debug("Observable.destroy(): Listeners were destroyed"),this},e.prototype.emitAndCallback=function(e,t,n){return t=this.utils.argumentsToArray(t),e&&this.emit.apply(this,[e].concat(t)),n&&n.apply(this,t),this},e}();t.Observable=s,t.$get=r},function(e,t,n){function r(e){return new s(e)}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(12),s=function(e){function t(t){var n=this;e.call(this,t),this.events={change:"change"};var r="hidden",i=function(e){e=e||window.event;var t="visible",i="hidden",o={focus:t,focusin:t,pageshow:t,blur:i,focusout:i,pagehide:i};n.visible=e.type in o?o[e.type]==t:!document[r],n.emit(n.events.change,n.visible)};this.visible=!0,"undefined"!=typeof document&&"undefined"!=typeof window&&(r in document?document.addEventListener("visibilitychange",i):(r="mozHidden")in document?document.addEventListener("mozvisibilitychange",i):(r="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",i):(r="msHidden")in document?document.addEventListener("msvisibilitychange",i):"onfocusin"in document?document.onfocusin=document.onfocusout=i:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=i)}return i(t,e),t.prototype.isVisible=function(){return this.visible},t}(o.Observable);t.PageVisibility=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Platform",function(){return new a(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(12),s=n(7),u=n(41),a=function(e){function t(t){e.call(this,t),this.events={accessViolation:"accessViolation",logoutSuccess:"logoutSuccess",logoutError:"logoutError",authorizeSuccess:"authorizeSuccess",authorizeError:"authorizeError",refreshSuccess:"refreshSuccess",refreshError:"refreshError"},this.server="",this.apiKey="",this.account="~",this.urlPrefix="/restapi",this.apiVersion="v1.0",this.accountPrefix="/account/",this.accessTokenTtl=null,this.refreshTokenTtl=36e3,this.refreshTokenTtlRemember=604800,this.refreshHandicapMs=6e4,this.refreshDelayMs=100,this.clearCacheOnRefreshError=!0,this.refreshPromise=null,this.cacheId="platform",this.pollInterval=250,this.releaseTimeout=5e3}return i(t,e),t.prototype.getStorage=function(){return s.$get(this.context)},t.prototype.getRequest=function(){return u.$get(this.context)},t.prototype.clearStorage=function(){return this.getStorage().clean(),this},t.prototype.setCredentials=function(e,t){var n=(e||"")+":"+(t||"");return":"==n?this:(this.apiKey="function"==typeof btoa?btoa(n):new Buffer(n).toString("base64"),this)},t.prototype.getCredentials=function(){var e=("function"==typeof atob?atob(this.apiKey):new Buffer(this.apiKey,"base64").toString("utf-8")).split(":");return{key:e[0],secret:e[1]}},t.prototype.setServer=function(e){return this.server=e||"",this},t.prototype.remember=function(e){var t=this.cacheId+"-remember";return void 0!==e?(this.getStorage().setItem(t,e),this):this.getStorage().getItem(t)||!1},t.prototype.getAuthURL=function(e){return e=e||{},this.apiUrl("/restapi/oauth/authorize?"+this.utils.queryStringify({response_type:"code",redirect_uri:e.redirectUri||"",client_id:this.getCredentials().key,state:e.state||"",brand_id:e.brandId||"",display:e.display||"",prompt:e.prompt||""}),{addServer:!0})},t.prototype.parseAuthRedirectUrl=function(e){var t=this.utils.parseQueryString(e.split("?").reverse()[0]),n=t.error_description||t.error;if(n){var r=new Error(n);throw r.error=t.error,r}return t},t.prototype.authorize=function(e){var t=this;e=e||{},e.remember=e.remember||!1;var n={access_token_ttl:this.accessTokenTtl,refresh_token_ttl:e.remember?this.refreshTokenTtlRemember:this.refreshTokenTtl};if(e.username)n.grant_type="password",n.username=e.username,n.password=e.password,n.extension=e.extension||"";else{if(!e.code)return this.context.getPromise().reject(new Error("Unsupported authorization flow"));n.grant_type="authorization_code",n.code=e.code,n.redirect_uri=e.redirectUri}return this.authCall({url:"/restapi/oauth/token",post:n}).then(function(n){return t.setCache(n.data).remember(e.remember).emitAndCallback(t.events.authorizeSuccess,[]),n})["catch"](function(e){throw t.clearStorage().emitAndCallback(t.events.authorizeError,[e]),e})},t.prototype.isPaused=function(){var e=this.getStorage(),t=this.cacheId+"-refresh";return!!e.getItem(t)&&Date.now()-parseInt(e.getItem(t))<this.releaseTimeout},t.prototype.pause=function(){return this.getStorage().setItem(this.cacheId+"-refresh",Date.now()),this},t.prototype.resume=function(){return this.getStorage().removeItem(this.cacheId+"-refresh"),this},t.prototype.refresh=function(){var e=this,t=new(this.context.getPromise())(function(t,n){return e.isPaused()?t(e.refreshPolling(null)):(e.pause(),void setTimeout(function(){var r=e.getAuthData();return e.log.debug("Platform.refresh(): Performing token refresh (access token",r.access_token,", refresh token",r.refresh_token,")"),r&&r.refresh_token?Date.now()>r.refreshExpireTime?n(new Error("Refresh token has expired")):e.isPaused()?void t(e.authCall({url:"/restapi/oauth/token",post:{grant_type:"refresh_token",refresh_token:r.refresh_token,access_token_ttl:e.accessTokenTtl,refresh_token_ttl:e.remember()?e.refreshTokenTtlRemember:e.refreshTokenTtl}})):n(new Error("Queue was resumed before refresh call")):n(new Error("Refresh token is missing"))},e.refreshDelayMs))});return t.then(function(t){if(!t||!t.data)return t;if(e.log.info("Platform.refresh(): Token was refreshed"),!t.data.refresh_token||!t.data.access_token){var n=new Error("Malformed OAuth response");throw n.ajax=t,n}return e.setCache(t.data).resume(),t}).then(function(t){return e.emit(e.events.refreshSuccess,t),t})["catch"](function(t){throw e.clearCacheOnRefreshError&&e.clearStorage(),e.emitAndCallback(e.events.accessViolation,[t]).emitAndCallback(e.events.refreshError,[t]),t})},t.prototype.logout=function(){var e=this;return this.pause(),this.authCall({url:"/restapi/oauth/revoke",post:{token:this.getToken()}}).then(function(t){return e.resume().clearStorage().emit(e.events.logoutSuccess,t),t})["catch"](function(t){throw e.resume().emitAndCallback(e.events.accessViolation,[t]).emitAndCallback(e.events.logoutError,[t]),t})},t.prototype.refreshPolling=function(e){var t=this;return this.refreshPromise?this.refreshPromise:(this.refreshPromise=new(this.context.getPromise())(function(n,r){t.log.warn("Platform.refresh(): Refresh is already in progress polling started"),t.utils.poll(function(i){return t.isPaused()?i():(t.refreshPromise=null,t.resume(),void(t.isTokenValid()?n(e):r(new Error("Automatic authentification timeout"))))},t.pollInterval)}),this.refreshPromise)},t.prototype.getToken=function(){return this.getAuthData().access_token},t.prototype.getTokenType=function(){return this.getAuthData().token_type},t.prototype.getAuthData=function(){return this.getStorage().getItem(this.cacheId)||{token_type:"",access_token:"",expires_in:0,refresh_token:"",refresh_token_expires_in:0}},t.prototype.isTokenValid=function(){var e=this.getAuthData();return e.token_type==t.forcedTokenType||new Date(e.expireTime).getTime()-this.refreshHandicapMs>Date.now()&&!this.isPaused()},t.prototype.isAuthorized=function(){return this.isTokenValid()?this.context.getPromise().resolve(!0):this.refresh()},t.prototype.cancelAccessToken=function(){return this.setCache(this.utils.extend(this.getAuthData(),{access_token:"",expires_in:0}))},t.prototype.setCache=function(e){var t=this.getAuthData();return this.log.info("Platform.setCache(): Tokens were updated, new:",e,", old:",t),e.expireTime=Date.now()+1e3*e.expires_in,e.refreshExpireTime=Date.now()+1e3*e.refresh_token_expires_in,this.getStorage().setItem(this.cacheId,e),this},t.prototype.forceAuthentication=function(){return this.setCache({token_type:t.forcedTokenType,access_token:"",expires_in:0,refresh_token:"",refresh_token_expires_in:0}),this},t.prototype.apiCall=function(e){var t=this;return e=e||{},e.url=this.apiUrl(e.url,{addServer:!0}),this.isAuthorized().then(function(){var n=t.getToken();return t.getRequest().setOptions(e).setHeader("Authorization",t.getTokenType()+(n?" "+n:"")).send()})["catch"](function(n){if(!n.response||!n.response.isUnauthorized())throw n;return t.cancelAccessToken(),t.refresh().then(function(){return t.apiCall(e)})})},t.prototype.get=function(e,t){return t=t||{},t.url=e,t.method="GET",this.apiCall(t)},t.prototype.post=function(e,t){return t=t||{},t.url=e,t.method="POST",this.apiCall(t)},t.prototype.put=function(e,t){return t=t||{},t.url=e,t.method="PUT",this.apiCall(t)},t.prototype["delete"]=function(e,t){return t=t||{},t.url=e,t.method="DELETE",this.apiCall(t)},t.prototype.authCall=function(e){return e=e||{},e.method=e.method||"POST",e.url=this.apiUrl(e.url,{addServer:!0}),this.getRequest().setOptions(e).setHeader("Content-Type","application/x-www-form-urlencoded").setHeader("Accept","application/json").setHeader("Authorization","Basic "+this.apiKey).send()},t.prototype.apiUrl=function(e,t){e=e||"",t=t||{};var n="",r=-1!=e.indexOf("http://")||-1!=e.indexOf("https://");return t.addServer&&!r&&(n+=this.server),-1!=e.indexOf(this.urlPrefix)||r||(n+=this.urlPrefix+"/"+this.apiVersion),e.indexOf(this.accountPrefix)>-1&&n.replace(this.accountPrefix+"~",this.accountPrefix+this.account),n+=e,(t.addMethod||t.addToken)&&(n+=e.indexOf("?")>-1?"&":"?"),t.addMethod&&(n+="_method="+t.addMethod),t.addToken&&(n+=(t.addMethod?"&":"")+"access_token="+this.getToken()),n},t.forcedTokenType="forced",t}(o.Observable);t.Platform=a,t.$get=r},function(e,t,n){function r(e){return new u(e)}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(12),s=n(14),u=function(e){function t(t){e.call(this,t),this.events={notification:"notification",removeSuccess:"removeSuccess",removeError:"removeError",renewSuccess:"renewSuccess",renewError:"renewError",subscribeSuccess:"subscribeSuccess",subscribeError:"subscribeError"},this.pubnub=null,this.eventFilters=[],this.timeout=null,this.subscription={eventFilters:[],expirationTime:"",expiresIn:0,deliveryMode:{transportType:"PubNub",encryption:!1,address:"",subscriberKey:"",secretKey:""},id:"",creationTime:"",status:"",uri:""}}return i(t,e),t.prototype.getPubnub=function(){return this.context.getPubnub()},t.prototype.getPlatform=function(){return s.$get(this.context)},t.prototype.register=function(e){return this.isSubscribed()?this.renew(e):this.subscribe(e)},t.prototype.addEvents=function(e){return this.eventFilters=this.eventFilters.concat(e),this},t.prototype.setEvents=function(e){return this.eventFilters=e,this},t.prototype.getFullEventFilters=function(){var e=this;return this.eventFilters.map(function(t){return e.getPlatform().apiUrl(t)})},t.prototype.subscribe=function(e){var t=this;return e=e||{},e.events&&(this.eventFilters=e.events),this.clearTimeout(),new(this.context.getPromise())(function(e){if(!t.eventFilters||!t.eventFilters.length)throw new Error("Events are undefined");e(t.getPlatform().apiCall({method:"POST",url:"/restapi/v1.0/subscription",post:{eventFilters:t.getFullEventFilters(),deliveryMode:{transportType:"PubNub"}}}))}).then(function(e){return t.updateSubscription(e.data).subscribeAtPubnub().emit(t.events.subscribeSuccess,e.data),e})["catch"](function(e){throw t.unsubscribe().emit(t.events.subscribeError,e),e})},t.prototype.renew=function(e){var t=this;return e=e||{},e.events&&(this.eventFilters=e.events),this.clearTimeout(),new(this.context.getPromise())(function(e){if(!t.subscription||!t.subscription.id)throw new Error("Subscription ID is required");if(!t.eventFilters||!t.eventFilters.length)throw new Error("Events are undefined");e()}).then(function(){return t.getPlatform().apiCall({method:"PUT",url:"/restapi/v1.0/subscription/"+t.subscription.id,post:{eventFilters:t.getFullEventFilters()}})}).then(function(e){return t.updateSubscription(e.data).emit(t.events.renewSuccess,e.data),e})["catch"](function(e){throw t.unsubscribe().emit(t.events.renewError,e),e})},t.prototype.remove=function(e){var t=this;return e=this.utils.extend({async:!0},e),new(this.context.getPromise())(function(n){if(!t.subscription||!t.subscription.id)throw new Error("Subscription ID is required");n(t.getPlatform().apiCall({async:!!e.async,method:"DELETE",url:"/restapi/v1.0/subscription/"+t.subscription.id}))}).then(function(e){return t.unsubscribe().emit(t.events.removeSuccess,e),e})["catch"](function(e){throw t.emit(t.events.removeError,e),e})},t.prototype.destroy=function(){return this.unsubscribe(),this.log.info("RC.core.Subscription: Destroyed"),e.prototype.destroy.call(this)},t.prototype.isSubscribed=function(){return this.subscription&&this.subscription.deliveryMode&&this.subscription.deliveryMode.subscriberKey&&this.subscription.deliveryMode.address},t.prototype.setTimeout=function(){var e=this,n=1e3*this.subscription.expiresIn-t.renewHandicapMs;this.timeout=setTimeout(function(){e.renew({})},n)},t.prototype.clearTimeout=function(){clearTimeout(this.timeout)},t.prototype.updateSubscription=function(e){return this.clearTimeout(),this.subscription=e,this.setTimeout(),this},t.prototype.unsubscribe=function(){return this.clearTimeout(),this.pubnub&&this.isSubscribed()&&this.pubnub.unsubscribe({channel:this.subscription.deliveryMode.address}),this.subscription=null,this},t.prototype.decrypt=function(e){if(this.isSubscribed()&&this.subscription.deliveryMode.encryptionKey){var t=this.getPubnub();e=t.crypto_obj.decrypt(e,this.subscription.deliveryMode.encryptionKey,{encryptKey:!1,keyEncoding:"base64",keyLength:128,mode:"ecb"})}return e},t.prototype.notify=function(e){return this.emit(this.events.notification,this.decrypt(e)),this},t.prototype.subscribeAtPubnub=function(){var e=this;if(!this.isSubscribed())return this;var t=this.getPubnub();return this.pubnub=t.init({ssl:!0,subscribe_key:this.subscription.deliveryMode.subscriberKey}),this.pubnub.ready(),this.pubnub.subscribe({channel:this.subscription.deliveryMode.address,message:function(t){e.log.info("RC.core.Subscription: Incoming message",t),e.notify(t)},connect:function(){e.log.info("RC.core.Subscription: PUBNUB connected")}}),this},t.renewHandicapMs=6e4,t}(o.Observable);t.Subscription=u,t.$get=r},function(e,t){function n(e){return e.createSingleton("Utils",function(){return new u})}var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=/\d/,s={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){s["[object "+e+"]"]=e.toLowerCase()
});var u=function(){function e(){}return e.prototype.extend=function(){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];var n,r,i,o,s,u,a=arguments[0]||{},c=1,p=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[c]||{},c++),"object"==typeof a||this.isFunction(a)||(a={});p>c;c++)if(null!==(n=arguments[c]))for(r in n)i=a[r],o=n[r],a!==o&&(l&&o&&(this.isPlainObject(o)||(s=this.isArray(o)))?(s?(s=!1,u=i&&this.isArray(i)?i:[]):u=i&&this.isPlainObject(i)?i:{},a[r]=this.extend(l,u,o)):void 0!==o&&(a[r]=o));return a},e.prototype.forEach=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=t(e[n],n);if(r===!1)break}},e.prototype.queryStringify=function(e){var t=this,n=[];return this.forEach(e,function(e,r){t.isArray(e)?e.forEach(function(e){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}),n.join("&")},e.prototype.parseQueryString=function(e){var t={},n=this;return e.split("&").forEach(function(e){if(e=decodeURIComponent(e),-1==e.indexOf("="))t[e.trim()]=!0;else{var r=e.split("="),i=r[0].trim(),o=r[1].trim();i in t?(i in t&&!n.isArray(t[i])&&(t[i]=[t[i]]),t[i].push(o)):t[i]=o}}),t},e.prototype.isEmail=function(e,t){return t?/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?[ ,;]*)+$/i.test(e):/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(e)},e.prototype.isPhoneNumber=function(e){return/\+?1[0-9]{3}[0-9a-z]{7}/im.test(e.toString().split(/[^0-9a-z\+]/im).join(""))},e.prototype.argumentsToArray=function(e){return Array.prototype.slice.call(e||[],0)},e.prototype.isDate=function(e){return"date"===this.type(e)},e.prototype.isFunction=function(e){return"function"===this.type(e)},e.prototype.isArray=function(e){return Array.isArray?Array.isArray(e):"array"===this.type(e)},e.prototype.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.prototype.isNaN=function(e){return null===e||!o.test(e)||isNaN(e)},e.prototype.type=function(e){return null===e?String(e):s[i.call(e)]||"object"},e.prototype.isPlainObject=function(e){if(!e||"object"!==this.type(e)||e.nodeType||this.isWindow(e))return!1;if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(t in e);return void 0===t||r.call(e,t)},e.prototype.getProperty=function(e,t){return t.split(/[.[\]]/).reduce(function(e,t){return e?t?e[t]:e:void 0},e)},e.prototype.poll=function(e,t,n){this.stopPolling(n),t=t||1e3;var r=function(n){return n=n||t,t=n,setTimeout(function(){e(r,n)},n)};return r()},e.prototype.stopPolling=function(e){e&&clearTimeout(e)},e.prototype.parseString=function(e){return e?e.toString():""},e.prototype.parseNumber=function(e){return e?(e=parseFloat(e),isNaN(e)?0:e):0},e}();t.Utils=u,t.$get=n},function(e,t,n){function r(e){return e.createSingleton("Validator",function(){return new o(e)})}var i=n(16),o=function(){function e(e){this.context=e,this.utils=i.$get(e)}return e.prototype.validate=function(e){var t={errors:{},isValid:!0};return t.errors=e.reduce(function(e,n){var r=n.validator();return r.length>0&&(t.isValid=!1,e[n.field]=e[n.field]||[],e[n.field]=e[n.field].concat(r)),e},{}),t},e.prototype.email=function(e,t){var n=this;return function(){return e?n.utils.isEmail(e,t)?[]:[new Error("Value has to be a valid email")]:[]}},e.prototype.phone=function(e){var t=this;return function(){return e?t.utils.isPhoneNumber(e)?[]:[new Error("Value has to be a valid US phone number")]:[]}},e.prototype.required=function(e){return function(){return e?[]:[new Error("Field is required")]}},e.prototype.length=function(e,t,n){return function(){var r=[];return e?(e=e.toString(),n&&e.length<n&&r.push(new Error("Minimum length of "+n+" characters is required")),t&&e.length>t&&r.push(new Error("Maximum length of "+t+" characters is required")),r):r}},e}();t.Validator=o,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Account",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.createUrl=function(){return"/account/~"},t}(o.Helper);t.Account=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("BlockedNumber",function(){return new u(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(17),u=function(e){function t(t){e.call(this,t),this.validator=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},"/account/~/extension/"+(e.extensionId?e.extensionId:"~")+"/blocked-number"+(t?"/"+t:"")},t.prototype.validate=function(e){return this.validator.validate([{field:"phoneNumber",validator:this.validator.phone(e.phoneNumber)},{field:"phoneNumber",validator:this.validator.required(e.phoneNumber)},{field:"name",validator:this.validator.required(e.name)}])},t}(o.Helper);t.BlockedNumber=u,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Call",function(){return new c(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=n(33),a=n(21),c=function(e){function t(t){e.call(this,t),this.list=s.$get(t),this.contact=a.$get(t),this.presence=u.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},"personal"in e||"extensionId"in e||(e.personal=!0),"/account/~/"+(e.personal||e.extensionId?"extension/"+(e.extensionId||"~")+"/":"")+(e.active?"active-calls":"call-log")+(t?"/"+t:"")},t.prototype.getSessionId=function(e){return e&&e.sessionId},t.prototype.isInProgress=function(e){return e&&"In Progress"==e.result},t.prototype.isAlive=function(e){return e&&"Alive"==e.availability},t.prototype.isInbound=function(e){return e&&"Inbound"==e.direction},t.prototype.isOutbound=function(e){return!this.isInbound(e)},t.prototype.isMissed=function(e){return e&&"Missed"==e.result},t.prototype.isFindMe=function(e){return e&&"FindMe"==e.action},t.prototype.getCallerInfo=function(e){return this.isInbound(e)?e.from:e.to},t.prototype.getAllCallerInfos=function(e){return[this.getCallerInfo(e)].concat(this.isInbound(e)?e.to:e.from)},t.prototype.formatDuration=function(e){function t(e){return 10>e?"0"+e:e}var n=parseInt(e.duration),r=Math.floor(n/3600),i=Math.floor(n%3600/60),o=Math.floor(n%60);return(r?r+":":"")+t(i)+":"+t(o)},t.prototype.filter=function(e){return e=this.utils.extend({alive:!0,direction:"",type:""},e),this.list.filter([{filterBy:"direction",condition:e.direction},{filterBy:"type",condition:e.type}])},t.prototype.comparator=function(e){return this.list.comparator(this.utils.extend({sortBy:"startTime"},e))},t.prototype.attachContacts=function(e,t,n){var r=this,i=t.reduce(function(e,t){return e.concat(r.getAllCallerInfos(t))},[]);this.contact.attachToCallerInfos(i,e,n)},t.prototype.checkMergeability=function(e,t,n){var r=function(e){return new Date(e).getTime()};return(!n.strict||e.action&&-1!=e.action.toLowerCase().indexOf("ringout"))&&"Outbound"==e.direction&&"Inbound"==t.direction&&(!t.startTime&&!e.startTime||Math.abs(r(t.startTime)-r(e.startTime))<(n.maxStartTimeDiscrepancy||5e3))&&t.from.phoneNumber==e.to.phoneNumber&&(t.to.phoneNumber==e.from.phoneNumber||t.to.name==e.from.name)},t.prototype.combineCalls=function(e,t,n){n=n||{};var r=[];return e.hasSubsequent=!0,n.merge?(e.duration=e.duration>t.duration?e.duration:t.duration,e.from=t.to,e.to=t.from,r.push(e)):(t.subsequent=!0,t.startTime=e.startTime,r.push(e),r.push(t)),r},t.prototype.processCalls=function(e,t){var n=[],r=[],i=this;return e.forEach(function(o){var s=!1;o.subsequent=!1,o.hasSubsequent=!1,e.some(function(e){return o===e?!1:(i.checkMergeability(o,e,t)&&(n=n.concat(i.combineCalls(o,e,t)),r.push(o),r.push(e),s=!0),s)})}),e.forEach(function(e){-1==r.indexOf(e)&&n.push(e)}),n},t.prototype.parsePresenceCalls=function(e){var t=this;return e.map(function(e){return{id:e.id,uri:"",sessionId:e.sessionId,from:{phoneNumber:e.from},to:{phoneNumber:e.to},direction:e.direction,startTime:"",duration:0,type:"",action:"",result:t.presence.isCallInProgress(e)?"In Progress":e.telephonyStatus,telephonyStatus:e.telephonyStatus}})},t.prototype.getSignature=function(e){var t=function(e){return(e||"").toString().replace(/[^0-9]/gi,"")};return e.direction+"|"+(e.from&&t(e.from.phoneNumber))+"|"+(e.to&&t(e.to.phoneNumber))},t.prototype.mergePresenceCalls=function(e,t){var n=new Date,r=this.parsePresenceCalls(t&&t.activeCalls||[]).map(function(e){return delete e.startTime,e});return e=this.merge(e||[],r,this.getSessionId,!0),e.forEach(function(e){e.startTime||(e.startTime=n.toISOString())}),e},t.prototype.mergeAll=function(e,t,n){var r=this.merge(e||[],t||[],this.getSessionId,!0);return this.merge(r,n||[],this.getSessionId,!0)},t}(o.Helper);t.Call=c,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Contact",function(){return new a(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(17),u=n(10),a=function(e){function t(t){e.call(this,t),this.phoneFields=["homePhone","homePhone2","businessPhone","businessPhone2","mobilePhone","companyPhone","assistantPhone","carPhone","otherPhone","callbackPhone"],this.faxFields=["businessFax","otherFax"],this.addressFields=["homeAddress","businessAddress","otherAddress"],this.addressSubFields=["street","city","state","zip"],this.nameFields=["firstName","middleName","lastName","nickName"],this.otherFields=["company","jobTitle","webPage","notes"],this.emailFields=["email","email2","email3"],this.list=u.$get(t),this.validator=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){e=e||{};var n="/account/~/extension/"+(e.extensionId?e.extensionId:"~")+"/address-book";return e.sync?n+"-sync":n+(e.groupId?"/group/"+e.groupId+"/contact":"/contact")+(t?"/"+t:"")},t.prototype.getFieldValues=function(e,t,n){return t.reduce(function(t,r){return e&&e[r]&&(n?t[r]=e[r]:t.push(e[r])),t},n?{}:[])},t.prototype.getFullName=function(e){return this.getFieldValues(e,this.nameFields).join(" ")},t.prototype.getEmails=function(e,t){return this.getFieldValues(e,this.emailFields,t)},t.prototype.getPhones=function(e,t){return this.getFieldValues(e,this.phoneFields,t)},t.prototype.getFaxes=function(e,t){return this.getFieldValues(e,this.faxFields,t)},t.prototype.getAddresses=function(e,t){return this.getFieldValues(e,this.addressFields,t)},t.prototype.isAlive=function(e){return"Alive"==e.availability},t.prototype.match=function(e,t,n){var r=this;n=this.utils.extend({fields:[].concat(this.nameFields,this.emailFields,this.phoneFields,this.faxFields,this.otherFields),inAddresses:!0,transformFn:function(e){return e?e.toString().toLocaleLowerCase():""},strict:!1},n),t=n.transformFn(t,n);var i=null;if(!t)return i;var o=function(e){if(!i){var r=n.transformFn(e,n);if(r){var o=n.strict?r==t:r.indexOf(t)>-1;o&&(i=e)}}};return n.fields.forEach(function(t){o(e[t])}),n.inAddresses&&!i&&this.addressFields.forEach(function(t){e[t]&&!i&&r.addressSubFields.forEach(function(n){o(e[t][n])})}),i},t.prototype.matchAsPhone=function(e,t,n){return this.match(e,t,this.utils.extend({fields:[].concat(this.phoneFields,this.faxFields),inAddresses:!1,transformFn:function(e){return e?e.toString().replace(/[^\d\w]/gi,""):""},strict:!1},n))},t.prototype.attachToCallerInfos=function(e,t,n){var r=this,i=this.index(e,function(e){return e.phoneNumber},!0);this.utils.forEach(i,function(e,i){var o=null,s=null;t.some(function(e){return s=r.matchAsPhone(e,i,n),s&&(o=e),s}),o&&e.forEach(function(e){e.contact=o,e.contactPhone=s})})},t.prototype.comparator=function(e){var t=this;return this.list.comparator(this.utils.extend({extractFn:function(e){return t.getFullName(e)}},e))},t.prototype.filter=function(e){var t=this;return e=this.utils.extend({alive:!0,startsWith:"",phonesOnly:!1,faxesOnly:!1},e),this.list.filter([{condition:e.alive,filterFn:this.isAlive},{condition:e.startsWith,filterFn:function(e,n){return t.match(e,n.condition)}},{condition:e.phonesOnly,filterFn:function(e){return t.getPhones(e).length>0}},{condition:e.faxesOnly,filterFn:function(e){return t.getFaxes(e).length>0}}])},t.prototype.validate=function(e){return this.validator.validate([{field:"firstName",validator:this.validator.required(e.firstName)},{field:"lastName",validator:this.validator.required(e.lastName)},{field:"email",validator:this.validator.email(e.email)},{field:"email2",validator:this.validator.email(e.email2)},{field:"email3",validator:this.validator.email(e.email3)}])},t}(o.Helper);t.Contact=a,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("ContactGroup",function(){return new u(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(17),u=function(e){function t(t){e.call(this,t),this.validator=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return"/account/~/extension/~/address-book/group"+(t?"/"+t:"")},t.prototype.validate=function(e){return this.validator.validate([{field:"groupName",validator:this.validator.required(e&&e.groupName)}])},t}(o.Helper);t.ContactGroup=u,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Conferencing",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.createUrl=function(){return"/account/~/extension/~/conferencing"},t}(o.Helper);t.Conferencing=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Country",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.createUrl=function(){return"/dictionary/country"},t}(o.Helper);t.Country=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Device",function(){return new c(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(17),u=n(27),a=n(26),c=function(e){function t(t){e.call(this,t),this.validator=s.$get(t),this.extension=u.$get(t),this.deviceModel=a.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},e.order?"/account/~/order":"/account/~"+(e.extensionId?"/extension/"+e.extensionId:"")+"/device"+(t?"/"+t:"")},t.prototype.validate=function(e){return this.validator.validate([{field:"emergencyServiceAddress-street",validator:this.validator.required(e&&e.emergencyServiceAddress&&e.emergencyServiceAddress.street)},{field:"emergencyServiceAddress-city",validator:this.validator.required(e&&e.emergencyServiceAddress&&e.emergencyServiceAddress.city)},{field:"emergencyServiceAddress-state",validator:this.validator.required(e&&e.emergencyServiceAddress&&e.emergencyServiceAddress.state)},{field:"emergencyServiceAddress-country",validator:this.validator.required(e&&e.emergencyServiceAddress&&e.emergencyServiceAddress.country)},{field:"emergencyServiceAddress-zip",validator:this.validator.required(e&&e.emergencyServiceAddress&&e.emergencyServiceAddress.zip)},{field:"emergencyServiceAddress-customerName",validator:this.validator.required(e&&e.emergencyServiceAddress&&e.emergencyServiceAddress.customerName)},{field:"extension",validator:this.validator.required(this.extension.getId(e&&e.extension))},{field:"model",validator:this.validator.required(this.deviceModel.getId(e&&e.model))}])},t}(o.Helper);t.Device=c,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("DeviceModel",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments),this.devices=[{id:"-1",name:"Softphone"},{id:"0",name:"Existing device"},{id:"19",name:"Cisco SPA-525G2 Desk Phone",deviceClass:"Desk Phone"},{id:"23",name:"Polycom IP 321 Basic IP phone",deviceClass:"Desk Phone"},{id:"30",name:"Polycom IP 550 HD Manager IP phone",deviceClass:"Desk Phone"},{id:"37",name:"Polycom IP 6000 Conference Phone",deviceClass:"Conference Phone"},{id:"40",name:"Polycom IP 335 HD IP phone",deviceClass:"Desk Phone"},{id:"51",name:"Cisco SPA-303 Desk Phone",deviceClass:"Desk Phone"},{id:"16",name:"Cisco SPA-508G Desk Phone with 1 Expansion Module",deviceClass:"Desk Phone",addons:[{id:"2",name:"Cisco Sidecar",count:"1"}]},{id:"16",name:"Cisco SPA-508G Desk Phone with 2 Expansion Modules",deviceClass:"Desk Phone",addons:[{id:"2",name:"Cisco Sidecar",count:"2"}]},{id:"16",name:"Cisco SPA-508G Desk Phone",deviceClass:"Desk Phone"},{id:"19",name:"Cisco SPA-525G2 Desk Phone with 1 Expansion Module",deviceClass:"Desk Phone",addons:[{id:"2",name:"Cisco Sidecar",count:"1"}]},{id:"19",name:"Cisco SPA-525G2 Desk Phone with 2 Expansion Modules	Desk Phone",addons:[{id:"2",name:"Cisco Sidecar",count:"2"}]},{id:"34",name:"Polycom IP 650 HD Executive IP phone with 1 Expansion Module",deviceClass:"Desk Phone",addons:[{id:"1",name:"Plolycom Expansion",count:"1"}]},{id:"34",name:"Polycom IP 650 HD Executive IP phone with 2 Expansion Modules",deviceClass:"Desk Phone",addons:[{id:"1",name:"Plolycom Expansion",count:"2"}]},{id:"34",name:"Polycom IP 650 HD Executive IP phone with 3 Expansion Modules",deviceClass:"Desk Phone",addons:[{id:"1",name:"Plolycom Expansion",count:"3"}]},{id:"34",name:"Polycom IP 650 HD Executive IP phone",deviceClass:"Desk Phone"},{id:"52",name:"Cisco SPA-122 ATA",deviceClass:"Analog Adapter"},{id:"53",name:"Polycom VVX-500 Color Touchscreen",deviceClass:"Desk Phone"},{id:"54",name:"Polycom VVX-310 Gigabit Ethernet Phone",deviceClass:"Desk Phone"},{id:"55",name:"Polycom VVX-410 Color Gigabit Ethernet Phone",deviceClass:"Desk Phone"}]}return i(t,e),t.prototype.getId=function(e){return e?e.id+(e.addons&&e.addons[0]?"-"+e.addons[0].id+"-"+e.addons[0].count:""):null},t.prototype.cleanForSaving=function(e){return e?(delete e.name,delete e.deviceClass,e.addons&&e.addons.length>0?e.addons.forEach(function(t,n){delete e.addons[n].name}):delete e.addons,e):null},t}(o.Helper);t.DeviceModel=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Extension",function(){return new u(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=function(e){function t(t){e.call(this,t),this.type={department:"Department",user:"User",announcement:"Announcement",voicemail:"Voicemail"},this.list=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},"/account/~"+(e.departmentId?"/department/"+e.departmentId+"/members":"/extension")+(t?"/"+t:"")},t.prototype.isUser=function(e){return e&&e.type==this.type.user},t.prototype.isDepartment=function(e){return e&&e.type==this.type.department},t.prototype.isAnnouncement=function(e){return e&&e.type==this.type.announcement},t.prototype.isVoicemail=function(e){return e&&e.type==this.type.voicemail},t.prototype.comparator=function(e){return this.list.comparator(this.utils.extend({sortBy:"extensionNumber",compareFn:this.list.numberComparator},e))},t.prototype.filter=function(e){return e=this.utils.extend({search:"",type:""},e),this.list.filter([{filterBy:"type",condition:e.type},{condition:e.search.toLocaleLowerCase(),filterFn:this.list.containsFilter,extractFn:function(e){return(e.name&&e.name.toLocaleLowerCase()+" ")+(e.extensionNumber&&e.extensionNumber.toString().toLocaleLowerCase())}}])},t}(o.Helper);t.Extension=u,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("ForwardingNumber",function(){return new u(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=function(e){function t(t){e.call(this,t),this.list=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},"/account/~/extension/"+(e.extensionId||"~")+"/forwarding-number"+(t?"/"+t:"")},t.prototype.getId=function(e){return e&&(e.id||e.phoneNumber)},t.prototype.hasFeature=function(e,t){return!!e&&!!e.features&&-1!=e.features.indexOf(t)},t.prototype.comparator=function(e){return this.list.comparator(this.utils.extend({sortBy:"label"},e))},t.prototype.filter=function(e){var t=this;return e=this.utils.extend({features:[]},e),this.list.filter([{condition:e.features.length,filterFn:function(n){return e.features.some(function(e){return t.hasFeature(n,e)})}}])},t}(o.Helper);t.ForwardingNumber=u,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Language",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments),this.languages=[{id:"1033",name:"English (US)"},{id:"3084",name:"French (Canada)"}]}return i(t,e),t}(o.Helper);t.Language=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Location",function(){return new a(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=n(37),a=function(e){function t(t){e.call(this,t),this.list=s.$get(t),this.state=u.$get(t)}return i(t,e),t.prototype.createUrl=function(){return"/dictionary/location"},t.prototype.filter=function(e){var t=this,n=[];return e=this.utils.extend({stateId:"",onlyUniqueNPA:!1},e),this.list.filter([{condition:e.stateId,filterFn:function(e,n){return t.state.getId(e.state)==n.condition}},{condition:e.onlyUniqueNPA,filterFn:function(e){return-1==n.indexOf(e.npa)?(n.push(e.npa),!0):!1}}])},t.prototype.comparator=function(e){return e=this.utils.extend({sortBy:"npa"},e),"nxx"==e.sortBy&&(e.extractFn=function(e){return 1e6*parseInt(e.npa)+parseInt(e.nxx)},e.compareFn=this.list.numberComparator),this.list.comparator(e)},t}(o.Helper);t.Location=a,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Message",function(){return new l(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=n(17),a=n(15),c=n(14),p=n(21),l=function(e){function t(t){e.call(this,t),this.contact=p.$get(t),this.list=s.$get(t),this.platform=c.$get(t),this.validator=u.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){e=e||{};var n="/account/~/extension/"+(e.extensionId||"~");return e.fax?n+"/fax":e.sms?n+"/sms":e.pager?n+"/company-pager":e.sync?n+"/message-sync":n+"/message-store"+(t?"/"+t:"")},t.prototype.isInbound=function(e){return e&&"Inbound"==e.direction},t.prototype.isOutbound=function(e){return!this.isInbound(e)},t.prototype.isSMS=function(e){return e&&"SMS"==e.type},t.prototype.isPager=function(e){return e&&"Pager"==e.type},t.prototype.isVoiceMail=function(e){return e&&"VoiceMail"==e.type},t.prototype.isFax=function(e){return e&&"Fax"==e.type},t.prototype.isAlive=function(e){return e&&"Alive"==e.availability},t.prototype.isRead=function(e){return"Read"==e.readStatus},t.prototype.setIsRead=function(e,t){return e.readStatus=t?"Read":"Unread",e},t.prototype.getAttachmentUrl=function(e,t){return e.attachments[t]?this.platform.apiUrl(e.attachments[t].uri,{addMethod:"GET",addServer:!0,addToken:!0}):""},t.prototype.getAttachmentContentType=function(e,t){return e.attachments[t]?e.attachments[t].contentType:""},t.prototype.getSubscription=function(e){return a.$get(this.context).setEvents([this.createUrl(e)])},t.prototype.getCallerInfos=function(e){return this.isInbound(e)?[e.from]:e.to},t.prototype.getAllCallerInfos=function(e){return this.getCallerInfos(e).concat(this.isInbound(e)?e.to:[e.from])},t.prototype.comparator=function(e){return this.list.comparator(this.utils.extend({sortBy:"creationTime"},e))},t.prototype.filter=function(e){return e=this.utils.extend({search:"",alive:!0,direction:"",conversationId:"",readStatus:""},e),this.list.filter([{condition:e.alive,filterFn:this.isAlive},{filterBy:"type",condition:e.type},{filterBy:"direction",condition:e.direction},{filterBy:"conversationId",condition:e.conversationId},{filterBy:"readStatus",condition:e.readStatus},{filterBy:"subject",condition:e.search,filterFn:this.list.containsFilter}])},t.prototype.attachContacts=function(e,t,n){var r=this,i=t.reduce(function(e,t){return e.concat(r.getAllCallerInfos(t))},[]);this.contact.attachToCallerInfos(i,e,n)},t.prototype.shorten=function(e){return{from:e.from,to:e.to,text:e.subject}},t.prototype.validateSMS=function(e){return this.validator.validate([{field:"to",validator:this.validator.required(this.utils.getProperty(e,"to[0].phoneNumber"))},{field:"from",validator:this.validator.required(this.utils.getProperty(e,"from.phoneNumber"))},{field:"subject",validator:this.validator.required(this.utils.getProperty(e,"subject"))},{field:"subject",validator:this.validator.length(this.utils.getProperty(e,"subject"),160)}])},t.prototype.validatePager=function(e){return this.validator.validate([{field:"to",validator:this.validator.required(this.utils.getProperty(e,"to.extensionNumber"))},{field:"from",validator:this.validator.required(this.utils.getProperty(e,"from.extensionNumber"))},{field:"subject",validator:this.validator.required(this.utils.getProperty(e,"subject"))},{field:"subject",validator:this.validator.length(this.utils.getProperty(e,"subject"),160)}])},t}(o.Helper);t.Message=l,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("PhoneNumber",function(){return new a(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=n(27),a=function(e){function t(t){e.call(this,t),this.extension=u.$get(t),this.list=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){if(e=e||{},e.lookup){var n={countryId:e.countryId,paymentType:e.paymentType,npa:e.npa};return e.nxx&&(n.nxx=e.nxx),e.line&&(n.line=e.line),e.exclude&&(n.exclude=e.exclude),"/number-pool/lookup?"+this.utils.queryStringify(n)}return"/account/~"+(e.extensionId?"/extension/"+e.extensionId:"")+"/phone-number"+(t?"/"+t:"")},t.prototype.isSMS=function(e){return this.hasFeature(e,"SmsSender")},t.prototype.hasFeature=function(e,t){return!!e.features&&-1!=e.features.indexOf(t)},t.prototype.reserve=function(e,t){e.reservedTill=new Date(t).toISOString()},t.prototype.unreserve=function(e){e.reservedTill=null},t.prototype.comparator=function(e){return this.list.comparator(this.utils.extend({extractFn:function(e){return e.usageType+"-"+e.paymentType+"-"+e.type}},e))},t.prototype.filter=function(e){var t=this;return e=this.utils.extend({usageType:"",paymentType:"",type:"",features:[]},e),this.list.filter([{filterBy:"usageType",condition:e.usageType},{filterBy:"paymentType",condition:e.paymentType},{filterBy:"type",condition:e.type},{condition:e.features.length,filterFn:function(n){return e.features.some(function(e){return t.hasFeature(n,e)})}}])},t}(o.Helper);t.PhoneNumber=a,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Presence",function(){return new a(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(15),u=n(27),a=function(e){function t(t){e.call(this,t),this.extension=u.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},"/account/~/extension/"+(t||"~")+"/presence"+(e.detailed?"?detailedTelephonyState=true":"")},t.prototype.getId=function(e){return e&&(this.extension.getId(e.extension)||e.extensionId)},t.prototype.isAvailable=function(e){return e&&"Available"==e.presenceStatus},t.prototype.getSubscription=function(e,t){return s.$get(this.context).setEvents([this.createUrl(e,t)])},t.prototype.updateSubscription=function(e,t,n){var r=this,i=t.map(this.getId,this).map(function(e){return r.createUrl(n,e)},this);return e.addEvents(i),e},t.prototype.attachToExtensions=function(e,t,n){var r=this,i=this.index(t);return e.forEach(function(e){var t=i[r.extension.getId(e)];t&&("presence"in e&&n?r.utils.extend(e.presence,t):e.presence=t)},this),this},t.prototype.isCallInProgress=function(e){return e&&"NoCall"!=e.telephonyStatus},t}(o.Helper);t.Presence=a,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Ringout",function(){return new u(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(17),u=function(e){function t(t){e.call(this,t),this.validator=s.$get(t)}return i(t,e),t.prototype.createUrl=function(e,t){return e=e||{},"/account/~/extension/"+(e.extensionId||"~")+"/ringout"+(t?"/"+t:"")},t.prototype.resetAsNew=function(t){return t=e.prototype.resetAsNew.call(this,t),t&&delete t.status,t},t.prototype.isInProgress=function(e){return e&&!this.isNew(e)&&e.status&&"InProgress"==e.status.callStatus},t.prototype.isSuccess=function(e){return e&&!this.isNew(e)&&e.status&&"Success"==e.status.callStatus},t.prototype.isError=function(e){return!this.isNew(e)&&!this.isInProgress(e)&&!this.isSuccess(e)},t.prototype.validate=function(e){return this.validator.validate([{field:"to",validator:this.validator.required(e&&e.to&&e.to.phoneNumber)},{field:"from",validator:this.validator.required(e&&e.from&&e.from.phoneNumber)}])},t}(o.Helper);t.Ringout=u,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Service",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments),this.isSmsEnabled=this.isServiceFeatureEnabledMethod("SMS"),this.isSmsReceivingEnabled=this.isServiceFeatureEnabledMethod("SMSReceiving"),this.isPresenceEnabled=this.isServiceFeatureEnabledMethod("Presence"),this.isRingOutEnabled=this.isServiceFeatureEnabledMethod("RingOut"),this.isInternationalCallingEnabled=this.isServiceFeatureEnabledMethod("InternationalCalling"),this.isDndEnabled=this.isServiceFeatureEnabledMethod("DND"),this.isFaxEnabled=this.isServiceFeatureEnabledMethod("Fax"),this.isFaxReceivingEnabled=this.isServiceFeatureEnabledMethod("FaxReceiving"),this.isVoicemailEnabled=this.isServiceFeatureEnabledMethod("Voicemail"),this.isPagerEnabled=this.isServiceFeatureEnabledMethod("Pager"),this.isPagerReceivingEnabled=this.isServiceFeatureEnabledMethod("PagerReceiving"),this.isVoipCallingEnabled=this.isServiceFeatureEnabledMethod("VoipCalling"),this.isVideoConferencingEnabled=this.isServiceFeatureEnabledMethod("VideoConferencing"),this.isSalesForceEnabled=this.isServiceFeatureEnabledMethod("SalesForce"),this.isIntercomEnabled=this.isServiceFeatureEnabledMethod("Intercom"),this.isPagingEnabled=this.isServiceFeatureEnabledMethod("Paging"),this.isConferencingEnabled=this.isServiceFeatureEnabledMethod("Conferencing"),this.isFreeSoftPhoneLinesEnabled=this.isServiceFeatureEnabledMethod("FreeSoftPhoneLines"),this.isHipaaComplianceEnabled=this.isServiceFeatureEnabledMethod("HipaaCompliance"),this.isCallParkEnabled=this.isServiceFeatureEnabledMethod("CallPark"),this.isOnDemandCallRecordingEnabled=this.isServiceFeatureEnabledMethod("OnDemandCallRecording")
}return i(t,e),t.prototype.createUrl=function(){return"/account/~/service-info"},t.prototype.isEnabled=function(e,t){return t.reduce(function(t,n){return n.featureName==e&&(t=n.enabled),t},!1)},t.prototype.isServiceFeatureEnabledMethod=function(e){var t=this;return function(n){return t.isEnabled(e,n)}},t}(o.Helper);t.Service=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("ShippingMethod",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments),this.shippingMethods=[{id:"1",name:"Ground Shipping (5-7 business days)"},{id:"2",name:"2-days Shipping"},{id:"3",name:"Overnight Shipping"}]}return i(t,e),t}(o.Helper);t.ShippingMethod=s,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("State",function(){return new a(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=n(10),u=n(24),a=function(e){function t(t){e.call(this,t),this.countryHelper=u.$get(t),this.list=s.$get(t)}return i(t,e),t.prototype.createUrl=function(){return"/dictionary/state"},t.prototype.filter=function(e){var t=this;return e=this.utils.extend({countryId:""},e),this.list.filter([{condition:e.countryId,filterFn:function(e,n){return t.countryHelper.getId(e.country)==n.condition}}])},t}(o.Helper);t.State=a,t.$get=r},function(e,t,n){function r(e){return e.createSingleton("Timezone",function(){return new s(e)})}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(9),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.createUrl=function(){return"/dictionary/timezone"},t}(o.Helper);t.Timezone=s,t.$get=r},function(module,exports,__webpack_require__){(function(module){function unique(){return"x"+ ++NOW+ +new Date}function rnow(){return+new Date}function build_url(e,t){var n=e.join(URLBIT),r=[];return t?(each(t,function(e,t){var n="object"==typeof t?JSON.stringify(t):t;"undefined"!=typeof t&&null!=t&&encode(n).length>0&&r.push(e+"="+encode(n))}),n+="?"+r.join(PARAMSBIT)):n}function updater(e,t){var n,r=0,i=function(){r+t>rnow()?(clearTimeout(n),n=setTimeout(i,t)):(r=rnow(),e())};return i}function grep(e,t){var n=[];return each(e||[],function(e){t(e)&&n.push(e)}),n}function supplant(e,t){return e.replace(REPL,function(e,n){return t[n]||e})}function timeout(e,t){return setTimeout(e,t)}function generate_uuid(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return e&&e(t),t}function isArray(e){return!!e&&"string"!=typeof e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function each(e,t){if(e&&t)if(isArray(e))for(var n=0,r=e.length;r>n;)t.call(e[n],e[n],n++);else for(var n in e)e.hasOwnProperty&&e.hasOwnProperty(n)&&t.call(e[n],n,e[n])}function map(e,t){var n=[];return each(e||[],function(e,r){n.push(t(e,r))}),n}function pam_encode(e){return encodeURIComponent(e).replace(/[!'()*~]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function encode(e){return encodeURIComponent(e)}function generate_channel_list(e,t){var n=[];return each(e,function(e,r){t?e.search("-pnpres")<0&&r.subscribed&&n.push(e):r.subscribed&&n.push(e)}),n.sort()}function generate_channel_group_list(e,t){var n=[];return each(e,function(e,r){t?e.search("-pnpres")<0&&r.subscribed&&n.push(e):r.subscribed&&n.push(e)}),n.sort()}function ready(){timeout(function(){READY||(READY=1,each(READY_BUFFER,function(e){e()}))},SECOND)}function PNmessage(e){return msg=e||{apns:{}},msg.getPubnubMessage=function(){var e={};if(Object.keys(msg.apns).length){e.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var t in msg.apns)e.pn_apns[t]=msg.apns[t];var n=["badge","alert"];for(var t in n)delete e.pn_apns[n[t]]}msg.gcm&&(e.pn_gcm={data:msg.gcm});for(var t in msg)e[t]=msg[t];var r=["apns","gcm","publish","channel","callback","error"];for(var t in r)delete e[r[t]];return e},msg.publish=function(){var e=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:e,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function PN_API(e){function t(e){return e||(e={}),each(ot,function(t,n){t in e||(e[t]=n)}),e}function r(e){var t=[];return each(e,function(e){t.push(e)}),t}function i(e){return r(e).sort()}function o(e){var t="",n=i(e);for(var r in n){var o=n[r];t+=o+"="+pam_encode(e[o]),r!=n.length-1&&(t+="&")}return t}function s(e,t,n){var r=!1;if("undefined"==typeof e)return t;if("number"==typeof e)r=e>PRESENCE_HB_THRESHOLD||0==e?!1:!0;else{if("boolean"==typeof e)return e?PRESENCE_HB_DEFAULT:0;r=!0}return r?(n&&n("Presence Heartbeat value invalid. Valid range ( x > "+PRESENCE_HB_THRESHOLD+" or x = 0). Current Value : "+(t||PRESENCE_HB_THRESHOLD)),t||PRESENCE_HB_THRESHOLD):e}function u(e,t){return dt.encrypt(e,t||pt)||e}function a(e,t){return dt.decrypt(e,t||pt)||dt.decrypt(e,pt)||e}function c(){return clearTimeout(Q),!et||et>=500||1>et||!generate_channel_list(G,!0).length&&!generate_channel_group_list(W,!0).length?void(tt=!1):(tt=!0,void yt.presence_heartbeat({callback:function(){Q=timeout(c,et*SECOND)},error:function(e){st&&st("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(e)),Q=timeout(c,et*SECOND)}}))}function p(){!tt&&c()}function l(e){if(nt){if(!U.length)return}else{if(e&&(U.sending=0),U.sending||!U.length)return;U.sending=1}it(U.shift())}function h(e){var t=0;return each(generate_channel_group_list(W),function(n){var r=W[n];r&&(t++,(e||function(){})(r))}),t}function f(e){var t=0;return each(generate_channel_list(G),function(n){var r=G[n];r&&(t++,(e||function(){})(r))}),t}function d(e,t,n){if("object"==typeof e){if(e.error){var r={};return e.message&&(r.message=e.message),e.payload&&(r.payload=e.payload),void(n&&n(r))}if(e.payload)return void(e.next_page?t&&t(e.payload,e.next_page):t&&t(e.payload))}t&&t(e)}function y(e,t){if("object"==typeof e&&e.error){var n={};return e.message&&(n.message=e.message),e.payload&&(n.payload=e.payload),void(t&&t(n))}t&&t(e)}function g(e,n,r,i){var n=e.callback||n,o=e.error||st,s=at();i=i||{},i.auth||(i.auth=e.auth_key||I);var u=[R,"v1","channel-registration","sub-key",M];u.push.apply(u,r),s&&(i.callback=s),it({callback:s,data:t(i),success:function(e){d(e,n,o)},fail:function(e){y(e,o)},url:u})}function m(){ut()||b(1,{error:"Offline. Please check your network settings. "}),S&&clearTimeout(S),S=timeout(m,SECOND)}function v(){T&&yt.time(function(e){x(function(){},e),e||b(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),w&&clearTimeout(w),w=timeout(v,P)})}function b(e,t){J&&J(e,t),J=null,clearTimeout(S),clearTimeout(w)}function _(e){var t=rnow()-$;return t-e/1e4}function x(e,t){function n(t){if(t){var n=t/1e4,i=(rnow()-r)/2;$=rnow()-(n+i),e&&e($)}}var r=rnow();t&&n(t)||yt.time(n)}var S,w,E=+e.windowing||DEF_WINDOWING,C=(+e.timeout||DEF_SUB_TIMEOUT)*SECOND,P=(+e.keepalive||DEF_KEEPALIVE)*SECOND,T=e.timecheck||0,O=e.noleave||0,A=e.publish_key||"demo",M=e.subscribe_key||"demo",I=e.auth_key||"",F=e.secret_key||"",N=e.hmac_SHA256,D=e.ssl?"s":"",H="http"+D+"://"+(e.origin||"pubsub.pubnub.com"),R=nextorigin(H),B=nextorigin(H),j=function(){},U=[],L=!0,$=0,q=0,z=0,J=0,K=e.restore||0,V=0,X=!1,G={},W={},Y={},Q=null,Z=s(e.heartbeat||e.pnexpires||0,e.error),et=e.heartbeat_interval||Z/2-1,tt=!1,nt=e.no_wait_for_pending,rt=e["compatible_3.5"]||!1,it=e.xdr,ot=e.params||{},st=e.error||function(){},ut=e._is_online||function(){return 1},at=e.jsonp_cb||function(){return 0},ct=e.db||{get:function(){},set:function(){}},pt=e.cipher_key,lt=e.uuid||!e.unique_uuid&&ct&&ct.get(M+"uuid")||"",ht=e.instance_id||!1,ft="";2===Z&&(et=1);var dt=e.crypto_obj||{encrypt:function(e){return e},decrypt:function(e){return e}},yt={LEAVE:function(e,n,r,i,o){var s={uuid:lt,auth:r||I},u=nextorigin(H),i=i||function(){},a=o||function(){},c=at();if(e.indexOf(PRESENCE_SUFFIX)>0)return!0;if(rt){if(!D)return!1;if("0"==c)return!1}return O?!1:("0"!=c&&(s.callback=c),ht&&(s.instanceid=ft),it({blocking:n||D,timeout:2e3,callback:c,data:t(s),success:function(e){d(e,i,a)},fail:function(e){y(e,a)},url:[u,"v2","presence","sub_key",M,"channel",encode(e),"leave"]}),!0)},LEAVE_GROUP:function(e,n,r,i,o){var s={uuid:lt,auth:r||I},u=nextorigin(H),i=i||function(){},a=o||function(){},c=at();if(e.indexOf(PRESENCE_SUFFIX)>0)return!0;if(rt){if(!D)return!1;if("0"==c)return!1}return O?!1:("0"!=c&&(s.callback=c),e&&e.length>0&&(s["channel-group"]=e),ht&&(s.instanceid=ft),it({blocking:n||D,timeout:5e3,callback:c,data:t(s),success:function(e){d(e,i,a)},fail:function(e){y(e,a)},url:[u,"v2","presence","sub_key",M,"channel",encode(","),"leave"]}),!0)},set_resumed:function(e){X=e},get_cipher_key:function(){return pt},set_cipher_key:function(e){pt=e},raw_encrypt:function(e,t){return u(e,t)},raw_decrypt:function(e,t){return a(e,t)},get_heartbeat:function(){return Z},set_heartbeat:function(e,t){Z=s(e,Z,st),et=t||Z/2-1,2==Z&&(et=1),j(),c()},get_heartbeat_interval:function(){return et},set_heartbeat_interval:function(e){et=e,c()},get_version:function(){return SDK_VER},getGcmMessageObject:function(e){return{data:e}},getApnsMessageObject:function(e){var t={aps:{badge:1,alert:""}};for(k in e)k[t]=e[k];return t},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(e,t){ot[e]=t},channel_group:function(e,t){var n,r,i=e.channel_group,t=t||e.callback,o=e.channels||e.channel,s=e.cloak,u=[],a={},c=e.mode||"add";if(i){var p=i.split(":");p.length>1?(n="*"===p[0]?null:p[0],r=p[1]):r=p[0]}n&&u.push("namespace")&&u.push(encode(n)),u.push("channel-group"),r&&"*"!==r&&u.push(r),o?(isArray(o)&&(o=o.join(",")),a[c]=o,a.cloak=L?"true":"false"):"remove"===c&&u.push("remove"),"undefined"!=typeof s&&(a.cloak=s?"true":"false"),g(e,t,u,a)},channel_group_list_groups:function(e,t){var n;n=e.namespace||e.ns||e.channel_group||null,n&&(e.channel_group=n+":*"),yt.channel_group(e,t)},channel_group_list_channels:function(e,t){return e.channel_group?void yt.channel_group(e,t):st("Missing Channel Group")},channel_group_remove_channel:function(e,t){return e.channel_group?e.channel||e.channels?(e.mode="remove",void yt.channel_group(e,t)):st("Missing Channel"):st("Missing Channel Group")},channel_group_remove_group:function(e,t){return e.channel_group?e.channel?st("Use channel_group_remove_channel if you want to remove a channel from a group."):(e.mode="remove",void yt.channel_group(e,t)):st("Missing Channel Group")},channel_group_add_channel:function(e,t){return e.channel_group?e.channel||e.channels?void yt.channel_group(e,t):st("Missing Channel"):st("Missing Channel Group")},channel_group_cloak:function(e,t){return"undefined"==typeof e.cloak?void t(L):(L=e.cloak,void yt.channel_group(e,t))},channel_group_list_namespaces:function(e,t){var n=["namespace"];g(e,t,n)},channel_group_remove_namespace:function(e,t){var n=["namespace",e.namespace,"remove"];g(e,t,n)},history:function(e,n){var n=e.callback||n,r=e.count||e.limit||100,i=e.reverse||"false",o=e.error||function(){},s=e.auth_key||I,u=e.cipher_key,c=e.channel,p=e.channel_group,l=e.start,h=e.end,f=e.include_token,d={},g=at();return c||p?n?M?(d.stringtoken="true",d.count=r,d.reverse=i,d.auth=s,p&&(d["channel-group"]=p,c||(c=",")),g&&(d.callback=g),l&&(d.start=l),h&&(d.end=h),f&&(d.include_token="true"),void it({callback:g,data:t(d),success:function(e){if("object"==typeof e&&e.error)return void o({message:e.message,payload:e.payload});for(var t=e[0],r=[],i=0;i<t.length;i++){var s=a(t[i],u);try{r.push(JSON.parse(s))}catch(c){r.push(s)}}n([r,e[1],e[2]])},fail:function(e){y(e,o)},url:[R,"v2","history","sub-key",M,"channel",encode(c)]})):st("Missing Subscribe Key"):st("Missing Callback"):st("Missing Channel")},replay:function(e,n){var r,n=n||e.callback||function(){},i=e.auth_key||I,o=e.source,s=e.destination,u=e.stop,a=e.start,c=e.end,p=e.reverse,l=e.limit,h=at(),f={};return o?s?A?M?("0"!=h&&(f.callback=h),u&&(f.stop="all"),p&&(f.reverse="true"),a&&(f.start=a),c&&(f.end=c),l&&(f.count=l),f.auth=i,r=[R,"v1","replay",A,M,o,s],void it({callback:h,success:function(e){d(e,n,err)},fail:function(){n([0,"Disconnected"])},url:r,data:t(f)})):st("Missing Subscribe Key"):st("Missing Publish Key"):st("Missing Destination Channel"):st("Missing Source Channel")},auth:function(e){I=e,j()},time:function(e){var n=at(),r={uuid:lt,auth:I};ht&&(r.instanceid=ft),it({callback:n,data:t(r),timeout:5*SECOND,url:[R,"time",n],success:function(t){e(t[0])},fail:function(){e(0)}})},publish:function(e,n){var r=e.message;if(!r)return st("Missing Message");var i,n=n||e.callback||r.callback||function(){},o=e.channel||r.channel,s=e.auth_key||I,a=e.cipher_key,c=e.error||r.error||function(){},p=e.post||!1,h="store_in_history"in e?e.store_in_history:!0,f=at(),g="push";return e.prepend&&(g="unshift"),o?A?M?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(u(r,a)),i=[R,"publish",A,M,0,encode(o),f,encode(r)],ot={uuid:lt,auth:s},h||(ot.store="0"),ht&&(ot.instanceid=ft),U[g]({callback:f,timeout:5*SECOND,url:i,data:t(ot),fail:function(e){y(e,c),l(1)},success:function(e){d(e,n,c),l(1)},mode:p?"POST":"GET"}),void l()):st("Missing Subscribe Key"):st("Missing Publish Key"):st("Missing Channel")},unsubscribe:function(e,t){var n=e.channel,r=e.channel_group,i=e.auth_key||I,t=t||e.callback||function(){},o=e.error||function(){};V=0,n&&(n=map((n.join?n.join(","):""+n).split(","),function(e){return G[e]?e+","+e+PRESENCE_SUFFIX:void 0}).join(","),each(n.split(","),function(e){var n=!0;e&&(G[e]=0,e in Y&&delete Y[e],READY&&(n=yt.LEAVE(e,0,i,t,o)),n||t({action:"leave"}))})),r&&(r=map((r.join?r.join(","):""+r).split(","),function(e){return W[e]?e+","+e+PRESENCE_SUFFIX:void 0}).join(","),each(r.split(","),function(e){var n=!0;e&&(W[e]=0,e in Y&&delete Y[e],READY&&(n=yt.LEAVE_GROUP(e,0,i,t,o)),n||t({action:"leave"}))})),j()},subscribe:function(e,n){function r(e){e?timeout(j,SECOND):(R=nextorigin(H,1),B=nextorigin(H,1),timeout(function(){yt.time(r)},SECOND)),f(function(t){return e&&t.disconnected?(t.disconnected=0,t.reconnect(t.name)):void(e||t.disconnected||(t.disconnected=1,t.disconnect(t.name)))}),h(function(t){return e&&t.disconnected?(t.disconnected=0,t.reconnect(t.name)):void(e||t.disconnected||(t.disconnected=1,t.disconnect(t.name)))})}function i(){var e=at(),n=generate_channel_list(G).join(","),o=generate_channel_group_list(W).join(",");if(n||o){n||(n=","),b();var s=t({uuid:lt,auth:I});o&&(s["channel-group"]=o);var u=JSON.stringify(Y);u.length>2&&(s.state=JSON.stringify(Y)),Z&&(s.heartbeat=Z),ht&&(s.instanceid=ft),p(),J=it({timeout:w,callback:e,fail:function(e){e&&e.error&&e.service?(y(e,d),r(1)):yt.time(function(t){!t&&y(e,d),r(t)})},data:t(s),url:[B,"subscribe",M,encode(n),e,V],success:function(e){if(!e||"object"==typeof e&&"error"in e&&e.error)return d(e.error),timeout(j,SECOND);if(g(e[1]),V=!V&&K&&ct.get(M)||e[1],f(function(e){e.connected||(e.connected=1,e.connect(e.name))}),h(function(e){e.connected||(e.connected=1,e.connect(e.name))}),X&&!K)return V=0,X=!1,ct.set(M,0),void timeout(i,k);x&&(V=1e4,x=0),ct.set(M,e[1]);var t=function(){var t="",n="";e.length>3?(t=e[3],n=e[2]):t=e.length>2?e[2]:map(generate_channel_list(G),function(t){return map(Array(e[0].length).join(",").split(","),function(){return t})}).join(",");var r=t.split(","),i=n?n.split(","):[];return function(){var e=r.shift()||z,t=i.shift(),n={};t?(e&&e.indexOf("-pnpres")>=0&&t.indexOf("-pnpres")<0&&(t+="-pnpres"),n=W[t]||G[t]||{callback:function(){}}):n=G[e];var o=[n.callback||q,e.split(PRESENCE_SUFFIX)[0]];return t&&o.push(t.split(PRESENCE_SUFFIX)[0]),o}}(),n=_(+e[1]);each(e[0],function(r){var i=t(),o=a(r,G[i[1]]?G[i[1]].cipher_key:null);i[0]&&i[0](o,e,i[2]||i[1],n,i[1])}),timeout(i,k)}})}}var o=e.channel,s=e.channel_group,n=n||e.callback,n=n||e.message,u=e.connect||function(){},c=e.reconnect||function(){},l=e.disconnect||function(){},d=e.error||d||function(){},g=e.idle||function(){},m=e.presence||0,v=e.noheresync||0,x=e.backfill||0,S=e.timetoken||0,w=e.timeout||C,k=e.windowing||E,P=e.state,T=e.heartbeat||e.pnexpires,O=e.heartbeat_interval,A=e.restore||K;return I=e.auth_key||I,K=A,V=S,o||s?n?M?((T||0===T||O||0===O)&&yt.set_heartbeat(T,O),o&&each((o.join?o.join(","):""+o).split(","),function(r){var i=G[r]||{};G[z=r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:q=n,cipher_key:e.cipher_key,connect:u,disconnect:l,reconnect:c},P&&(Y[r]=r in P?P[r]:P),m&&(yt.subscribe({channel:r+PRESENCE_SUFFIX,callback:m,restore:A}),i.subscribed||v||yt.here_now({channel:r,data:t({uuid:lt,auth:I}),callback:function(e){each("uuids"in e?e.uuids:[],function(t){m({action:"join",uuid:t,timestamp:Math.floor(rnow()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),s&&each((s.join?s.join(","):""+s).split(","),function(r){var i=W[r]||{};W[r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:q=n,cipher_key:e.cipher_key,connect:u,disconnect:l,reconnect:c},m&&(yt.subscribe({channel_group:r+PRESENCE_SUFFIX,callback:m,restore:A,auth_key:I}),i.subscribed||v||yt.here_now({channel_group:r,data:t({uuid:lt,auth:I}),callback:function(e){each("uuids"in e?e.uuids:[],function(t){m({action:"join",uuid:t,timestamp:Math.floor(rnow()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),j=function(){b(),timeout(i,k)},READY?void j():READY_BUFFER.push(j)):st("Missing Subscribe Key"):st("Missing Callback"):st("Missing Channel")},here_now:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.auth_key||I,o=e.channel,s=e.channel_group,u=at(),a="uuids"in e?e.uuids:!0,c=e.state,p={uuid:lt,auth:i};if(a||(p.disable_uuids=1),c&&(p.state=1),!n)return st("Missing Callback");if(!M)return st("Missing Subscribe Key");var l=[R,"v2","presence","sub_key",M];o&&l.push("channel")&&l.push(encode(o)),"0"!=u&&(p.callback=u),s&&(p["channel-group"]=s,!o&&l.push("channel")&&l.push(",")),ht&&(p.instanceid=ft),it({callback:u,data:t(p),success:function(e){d(e,n,r)},fail:function(e){y(e,r)},url:l})},where_now:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.auth_key||I,o=at(),s=e.uuid||lt,u={auth:i};return n?M?("0"!=o&&(u.callback=o),ht&&(u.instanceid=ft),void it({callback:o,data:t(u),success:function(e){d(e,n,r)},fail:function(e){y(e,r)},url:[R,"v2","presence","sub_key",M,"uuid",encode(s)]})):st("Missing Subscribe Key"):st("Missing Callback")},state:function(e,n){var r,n=e.callback||n||function(){},i=e.error||function(){},o=e.auth_key||I,s=at(),u=e.state,a=e.uuid||lt,c=e.channel,p=e.channel_group,l=t({auth:o});return M?a?c||p?("0"!=s&&(l.callback=s),"undefined"!=typeof c&&G[c]&&G[c].subscribed&&u&&(Y[c]=u),"undefined"!=typeof p&&W[p]&&W[p].subscribed&&(u&&(Y[p]=u),l["channel-group"]=p,c||(c=",")),l.state=JSON.stringify(u),ht&&(l.instanceid=ft),r=u?[R,"v2","presence","sub-key",M,"channel",c,"uuid",a,"data"]:[R,"v2","presence","sub-key",M,"channel",c,"uuid",encode(a)],void it({callback:s,data:t(l),success:function(e){d(e,n,i)},fail:function(e){y(e,i)},url:r})):st("Missing Channel"):st("Missing UUID"):st("Missing Subscribe Key")},grant:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel||e.channels,s=e.channel_group,u=at(),a=e.ttl,c=e.read?"1":"0",p=e.write?"1":"0",l=e.manage?"1":"0",h=e.auth_key||e.auth_keys;if(!n)return st("Missing Callback");if(!M)return st("Missing Subscribe Key");if(!A)return st("Missing Publish Key");if(!F)return st("Missing Secret Key");var f=Math.floor((new Date).getTime()/1e3),g=M+"\n"+A+"\ngrant\n",m={w:p,r:c,timestamp:f};e.manage&&(m.m=l),isArray(i)&&(i=i.join(",")),isArray(h)&&(h=h.join(",")),"undefined"!=typeof i&&null!=i&&i.length>0&&(m.channel=i),"undefined"!=typeof s&&null!=s&&s.length>0&&(m["channel-group"]=s),"0"!=u&&(m.callback=u),(a||0===a)&&(m.ttl=a),h&&(m.auth=h),m=t(m),h||delete m.auth,g+=o(m);var v=N(g,F);v=v.replace(/\+/g,"-"),v=v.replace(/\//g,"_"),m.signature=v,it({callback:u,data:m,success:function(e){d(e,n,r)},fail:function(e){y(e,r)},url:[R,"v1","auth","grant","sub-key",M]})},mobile_gw_provision:function(e){var t,n=e.callback||function(){},r=e.auth_key||I,i=e.error||function(){},o=at(),s=e.channel,u=e.op,a=e.gw_type,c=e.device_id;return c?a?u?s?A?M?(t=[R,"v1/push/sub-key",M,"devices",c],ot={uuid:lt,auth:r,type:a},"add"==u?ot.add=s:"remove"==u&&(ot.remove=s),ht&&(data.instanceid=ft),void it({callback:o,data:ot,success:function(e){d(e,n,i)},fail:function(e){y(e,i)},url:t})):st("Missing Subscribe Key"):st("Missing Publish Key"):st("Missing gw destination Channel (channel)"):st("Missing GW Operation (op: add or remove)"):st("Missing GW Type (gw_type: gcm or apns)"):st("Missing Device ID (device_id)")},audit:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel,s=e.channel_group,u=e.auth_key,a=at();if(!n)return st("Missing Callback");if(!M)return st("Missing Subscribe Key");if(!A)return st("Missing Publish Key");if(!F)return st("Missing Secret Key");var c=Math.floor((new Date).getTime()/1e3),p=M+"\n"+A+"\naudit\n",l={timestamp:c};"0"!=a&&(l.callback=a),"undefined"!=typeof i&&null!=i&&i.length>0&&(l.channel=i),"undefined"!=typeof s&&null!=s&&s.length>0&&(l["channel-group"]=s),u&&(l.auth=u),l=t(l),u||delete l.auth,p+=o(l);var h=N(p,F);h=h.replace(/\+/g,"-"),h=h.replace(/\//g,"_"),l.signature=h,it({callback:a,data:l,success:function(e){d(e,n,r)},fail:function(e){y(e,r)},url:[R,"v1","auth","audit","sub-key",M]})},revoke:function(e,t){e.read=!1,e.write=!1,yt.grant(e,t)},set_uuid:function(e){lt=e,j()},get_uuid:function(){return lt},isArray:function(e){return isArray(e)},get_subscibed_channels:function(){return generate_channel_list(G,!0)},presence_heartbeat:function(e){var n=e.callback||function(){},r=e.error||function(){},i=at(),o={uuid:lt,auth:I},s=JSON.stringify(Y);s.length>2&&(o.state=JSON.stringify(Y)),Z>0&&320>Z&&(o.heartbeat=Z),"0"!=i&&(o.callback=i);var u=encode(generate_channel_list(G,!0).join(",")),a=generate_channel_group_list(W,!0).join(",");u||(u=","),a&&(o["channel-group"]=a),ht&&(o.instanceid=ft),it({callback:i,data:t(o),timeout:5*SECOND,url:[R,"v2","presence","sub-key",M,"channel",u,"heartbeat"],success:function(e){d(e,n,r)},fail:function(e){y(e,r)}})},stop_timers:function(){clearTimeout(S),clearTimeout(w)},xdr:it,ready:ready,db:ct,uuid:generate_uuid,map:map,each:each,"each-channel":f,grep:grep,offline:function(){b(1,{message:"Offline. Please check your network settings."})},supplant:supplant,now:rnow,unique:unique,updater:updater};return lt||(lt=yt.uuid()),ft||(ft=yt.uuid()),ct.set(M+"uuid",lt),S=timeout(m,SECOND),w=timeout(v,P),Q=timeout(p,(et-3)*SECOND),x(),yt}function crypto_obj(){function e(e){return CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex)}function t(e){return e=e||{},e.hasOwnProperty("encryptKey")||(e.encryptKey=p.encryptKey),e.hasOwnProperty("keyEncoding")||(e.keyEncoding=p.keyEncoding),e.hasOwnProperty("keyLength")||(e.keyLength=p.keyLength),e.hasOwnProperty("mode")||(e.mode=p.mode),-1==u.indexOf(e.keyEncoding.toLowerCase())&&(e.keyEncoding=p.keyEncoding),-1==a.indexOf(parseInt(e.keyLength,10))&&(e.keyLength=p.keyLength),-1==c.indexOf(e.mode.toLowerCase())&&(e.mode=p.mode),e}function n(e,t){return"base64"==t.keyEncoding?CryptoJS.enc.Base64.parse(e):"hex"==t.keyEncoding?CryptoJS.enc.Hex.parse(e):e}function r(t,r){return t=n(t,r),r.encryptKey?CryptoJS.enc.Utf8.parse(e(t).slice(0,32)):t}function i(e){return"ecb"==e.mode?CryptoJS.mode.ECB:CryptoJS.mode.CBC}function o(e){return"cbc"==e.mode?CryptoJS.enc.Utf8.parse(s):null}var s="0123456789012345",u=["hex","utf8","base64","binary"],a=[128,256],c=["ecb","cbc"],p={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(e,n,s){if(!n)return e;s=t(s);var u=o(s),a=i(s),c=r(n,s),p=JSON.stringify(e),l=CryptoJS.AES.encrypt(p,c,{iv:u,mode:a}).ciphertext,h=l.toString(CryptoJS.enc.Base64);return h||e},decrypt:function(e,n,s){if(!n)return e;s=t(s);var u=o(s),a=i(s),c=r(n,s);try{var p=CryptoJS.enc.Base64.parse(e),l=CryptoJS.AES.decrypt({ciphertext:p},c,{iv:u,mode:a}).toString(CryptoJS.enc.Utf8),h=JSON.parse(l);return h}catch(f){return void 0}}}}window.JSON&&window.JSON.stringify||function(){function toJSON(){try{return this.valueOf()}catch(e){return null}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,s,u=gap,a=t[e];switch(a&&"object"==typeof a&&(a=toJSON.call(a,e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;o>n;n+=1)s[n]=str(n,a)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+u+"]":"["+s.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(i=str(r,a),i&&s.push(quote(r)+(gap?": ":":")+i));else for(r in a)Object.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&s.push(quote(r)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+u+"}":"{"+s.join(",")+"}",gap=u,i}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}();var NOW=1,READY=!1,READY_BUFFER=[],PRESENCE_SUFFIX="-pnpres",DEF_WINDOWING=10,DEF_TIMEOUT=1e4,DEF_SUB_TIMEOUT=310,DEF_KEEPALIVE=60,SECOND=1e3,URLBIT="/",PARAMSBIT="&",PRESENCE_HB_THRESHOLD=5,PRESENCE_HB_DEFAULT=30,SDK_VER="3.7.10",REPL=/{([\w\-]+)}/g,nextorigin=function(){var e=20,t=Math.floor(Math.random()*e);return function(n,r){return n.indexOf("pubsub.")>0&&n.replace("pubsub","ps"+(r?generate_uuid().split("-")[0]:++t<e?t:t=1))||n}}();window.PUBNUB||function(){function e(e,t){var n=CryptoJS.HmacSHA256(e,t);return n.toString(CryptoJS.enc.Base64)}function t(e){return document.getElementById(e)}function n(e){console.error(e)}function r(e,t){var n=[];return each(e.split(/\s+/),function(e){each((t||document).getElementsByTagName(e),function(e){n.push(e)})}),n}function i(e,t,n){each(e.split(","),function(e){var r=function(e){e||(e=window.event),n(e)||(e.cancelBubble=!0,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())};t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r})}function o(){return r("head")[0]}function s(e,t,n){return n?void e.setAttribute(t,n):e&&e.getAttribute&&e.getAttribute(t)}function u(e,t){for(var n in t)if(t.hasOwnProperty(n))try{e.style[n]=t[n]+("|width|height|top|left|".indexOf(n)>0&&"number"==typeof t[n]?"px":"")}catch(r){}}function a(e){return document.createElement(e)}function c(){return v||f()?0:unique()}function p(e){if(v||f())return l(e);var n=a("script"),r=e.callback,i=unique(),u=0,c=e.timeout||DEF_TIMEOUT,p=timeout(function(){b(1,{message:"timeout"})},c),h=e.fail||function(){},d=e.data||{},g=e.success||function(){},m=function(){o().appendChild(n)},b=function(e,r){u||(u=1,n.onerror=null,clearTimeout(p),e||!r||g(r),timeout(function(){e&&h();var n=t(i),r=n&&n.parentNode;r&&r.removeChild(n)},SECOND))};return window[r]=function(e){b(0,e)},e.blocking||(n[y]=y),n.onerror=function(){b(1)},n.src=build_url(e.url,d),s(n,"id",i),m(),b}function l(e){var t,n,r=function(){if(!o){o=1,clearTimeout(u);try{n=JSON.parse(t.responseText)}catch(e){return d(1)}i=1,l(n)}},i=0,o=0,s=e.timeout||DEF_TIMEOUT,u=timeout(function(){d(1,{message:"timeout"})},s),a=e.fail||function(){},c=e.data||{},l=e.success||function(){},h=!e.blocking,d=function(e,n){i||(i=1,clearTimeout(u),t&&(t.onerror=t.onload=null,t.abort&&t.abort(),t=null),e&&a(n))};try{t=f()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,t.onerror=t.onabort=function(){d(1,t.responseText||{error:"Network Connection Error"})},t.onload=t.onloadend=r,t.onreadystatechange=function(){if(t&&4==t.readyState)switch(t.status){case 200:break;default:try{n=JSON.parse(t.responseText),d(1,n)}catch(e){return d(1,{status:t.status,payload:null,message:t.responseText})}return}};var y=build_url(e.url,c);t.open("GET",y,h),h&&(t.timeout=s),t.send()}catch(g){return d(0),v=0,p(e)}return d}function h(){if(!("onLine"in navigator))return 1;try{return navigator.onLine}catch(e){return!0}}function f(){if(!E||!E.get)return 0;var e={id:f.id++,send:function(){},abort:function(){e.id={}},open:function(t,n){f[e.id]=e,E.get(e.id,n)}};return e}var d="https://pubnub.a.ssl.fastly.net/pubnub.swf",y="async",g=navigator.userAgent,m="PubNub-JS-Web/3.7.10",v=-1==g.indexOf("MSIE 6");window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var b=function(){var e={},t=!1;try{t=window.localStorage}catch(n){}var r=function(e){return-1==document.cookie.indexOf(e)?null:((document.cookie||"").match(RegExp(e+"=([^;]+)"))||[])[1]||null},i=function(e,t){document.cookie=e+"="+t+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"},o=function(){try{return i("pnctest","1"),"1"===r("pnctest")}catch(e){return!1}}();return{get:function(n){try{return t?t.getItem(n):o?r(n):e[n]}catch(i){return e[n]}},set:function(n,r){try{if(t)return t.setItem(n,r)&&0;o&&i(n,r),e[n]=r}catch(s){e[n]=r}}}}(),_={list:{},unbind:function(e){_.list[e]=[]},bind:function(e,t){(_.list[e]=_.list[e]||[]).push(t)},fire:function(e,t){each(_.list[e]||[],function(e){e(t)})}},x=t("pubnub")||0,S=function(l){v=l.jsonp?0:-1==g.indexOf("MSIE 6");var f=l.subscribe_key||"",d=((+l.keepalive||DEF_KEEPALIVE)*SECOND,l.uuid||b.get(f+"uuid")||"",l.leave_on_unload||0);l.xdr=p,l.db=b,l.error=l.error||n,l._is_online=h,l.jsonp_cb=c,l.hmac_SHA256=e,l.crypto_obj=crypto_obj(),l.params={pnsdk:m};var y=function(e){return S(e)},x=PN_API(l);for(var w in x)x.hasOwnProperty(w)&&(y[w]=x[w]);return y.css=u,y.$=t,y.create=a,y.bind=i,y.head=o,y.search=r,y.attr=s,y.events=_,y.init=y,y.secure=y,y.crypto_obj=crypto_obj(),i("beforeunload",window,function(){return d&&y["each-channel"](function(e){y.LEAVE(e.name,0)}),!0}),l.notest?y:(i("offline",window,y.offline),i("offline",document,y.offline),y)};S.init=S,S.secure=S,S.crypto_obj=crypto_obj(),"complete"===document.readyState?timeout(ready,0):i("load",window,function(){timeout(ready,0)});var w=x||{};PUBNUB=S({notest:1,publish_key:s(w,"pub-key"),subscribe_key:s(w,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==s(w,"ssl"),origin:s(w,"origin"),uuid:s(w,"uuid")}),window.jQuery&&(window.jQuery.PUBNUB=S),"undefined"!=typeof module&&(module.exports=PUBNUB)&&ready();var E=t("pubnubs")||0;x&&(u(x,{position:"absolute",top:-SECOND}),("opera"in window||s(x,"flash"))&&(x.innerHTML="<object id=pubnubs data="+d+"><param name=movie value="+d+"><param name=allowscriptaccess value=always></object>"),PUBNUB.rdx=function(e,t){return t?(f[e].responseText=unescape(t),void f[e].onload()):f[e].onerror()},f.id=SECOND)}(),function(){var e=PUBNUB.ws=function(t,n){if(!(this instanceof e))return new e(t,n);var r=this,t=r.url=t||"",i=(r.protocol=n||"Sec-WebSocket-Protocol",t.split("/")),o={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};
return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,t?(r.pubnub=PUBNUB.init(o),r.pubnub.setup=o,r.setup=o,void r.pubnub.subscribe({restore:!1,channel:o.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){r.onmessage({data:e})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};e.prototype.send=function(e){var t=this;t.pubnub.publish({channel:t.pubnub.setup.channel,message:e,callback:function(e){t.onsend({data:e})}})},e.prototype.close=function(){var e=this;e.pubnub.unsubscribe({channel:e.pubnub.setup.channel}),e.readyState=e.CLOSED,e.onclose({})}}();var CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;e>i;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;e>i;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),u=n.enc={},a=u.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new s.init(n,t/2)}},c=u.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new s.init(n,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,u=i/(4*o),u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);if(t=u*o,i=e.min(4*t,i),t){for(var a=0;t>a;a+=o)this._doProcessBlock(r,a);a=r.splice(0,t),n.sigBytes-=i}return new s.init(a,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){for(var t=CryptoJS,n=t.lib,r=n.WordArray,i=n.Hasher,n=t.algo,o=[],s=[],u=function(e){return 4294967296*(e-(0|e))|0},a=2,c=0;64>c;){var p;e:{p=a;for(var l=e.sqrt(p),h=2;l>=h;h++)if(!(p%h)){p=!1;break e}p=!0}p&&(8>c&&(o[c]=u(e.pow(a,.5))),s[c]=u(e.pow(a,1/3)),c++),a++}var f=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],p=n[6],l=n[7],h=0;64>h;h++){if(16>h)f[h]=0|e[t+h];else{var d=f[h-15],y=f[h-2];f[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+f[h-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+f[h-16]}d=l+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&p)+s[h]+f[h],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),l=p,p=c,c=a,a=u+d|0,u=o,o=i,i=r,r=d+y|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+u|0,n[4]=n[4]+a|0,n[5]=n[5]+c|0,n[6]=n[6]+p|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),u=o.words,a=s.words,c=0;r>c;c++)u[c]^=1549556828,a[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;n>i;i+=3)for(var o=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&n>i+.75*s;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],o=0,s=0;n>s;s++)if(s%4){var u=r.indexOf(e.charAt(s-1))<<2*(s%4),a=r.indexOf(e.charAt(s))>>>6-2*(s%4);i[o>>>2]|=(u|a)<<24-8*(o%4),o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,s){return e=e+(t&n|~t&r)+i+s,(e<<o|e>>>32-o)+t}function n(e,t,n,r,i,o,s){return e=e+(t&r|n&~r)+i+s,(e<<o|e>>>32-o)+t}function r(e,t,n,r,i,o,s){return e=e+(t^n^r)+i+s,(e<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,s){return e=e+(n^(t|~r))+i+s,(e<<o|e>>>32-o)+t}for(var o=CryptoJS,s=o.lib,u=s.WordArray,a=s.Hasher,s=o.algo,c=[],p=0;64>p;p++)c[p]=4294967296*e.abs(e.sin(p+1))|0;s=s.MD5=a.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var s=0;16>s;s++){var u=o+s,a=e[u];e[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,u=e[o+0],a=e[o+1],p=e[o+2],l=e[o+3],h=e[o+4],f=e[o+5],d=e[o+6],y=e[o+7],g=e[o+8],m=e[o+9],v=e[o+10],b=e[o+11],_=e[o+12],x=e[o+13],S=e[o+14],w=e[o+15],E=s[0],C=s[1],k=s[2],P=s[3],E=t(E,C,k,P,u,7,c[0]),P=t(P,E,C,k,a,12,c[1]),k=t(k,P,E,C,p,17,c[2]),C=t(C,k,P,E,l,22,c[3]),E=t(E,C,k,P,h,7,c[4]),P=t(P,E,C,k,f,12,c[5]),k=t(k,P,E,C,d,17,c[6]),C=t(C,k,P,E,y,22,c[7]),E=t(E,C,k,P,g,7,c[8]),P=t(P,E,C,k,m,12,c[9]),k=t(k,P,E,C,v,17,c[10]),C=t(C,k,P,E,b,22,c[11]),E=t(E,C,k,P,_,7,c[12]),P=t(P,E,C,k,x,12,c[13]),k=t(k,P,E,C,S,17,c[14]),C=t(C,k,P,E,w,22,c[15]),E=n(E,C,k,P,a,5,c[16]),P=n(P,E,C,k,d,9,c[17]),k=n(k,P,E,C,b,14,c[18]),C=n(C,k,P,E,u,20,c[19]),E=n(E,C,k,P,f,5,c[20]),P=n(P,E,C,k,v,9,c[21]),k=n(k,P,E,C,w,14,c[22]),C=n(C,k,P,E,h,20,c[23]),E=n(E,C,k,P,m,5,c[24]),P=n(P,E,C,k,S,9,c[25]),k=n(k,P,E,C,l,14,c[26]),C=n(C,k,P,E,g,20,c[27]),E=n(E,C,k,P,x,5,c[28]),P=n(P,E,C,k,p,9,c[29]),k=n(k,P,E,C,y,14,c[30]),C=n(C,k,P,E,_,20,c[31]),E=r(E,C,k,P,f,4,c[32]),P=r(P,E,C,k,g,11,c[33]),k=r(k,P,E,C,b,16,c[34]),C=r(C,k,P,E,S,23,c[35]),E=r(E,C,k,P,a,4,c[36]),P=r(P,E,C,k,h,11,c[37]),k=r(k,P,E,C,y,16,c[38]),C=r(C,k,P,E,v,23,c[39]),E=r(E,C,k,P,x,4,c[40]),P=r(P,E,C,k,u,11,c[41]),k=r(k,P,E,C,l,16,c[42]),C=r(C,k,P,E,d,23,c[43]),E=r(E,C,k,P,m,4,c[44]),P=r(P,E,C,k,_,11,c[45]),k=r(k,P,E,C,w,16,c[46]),C=r(C,k,P,E,p,23,c[47]),E=i(E,C,k,P,u,6,c[48]),P=i(P,E,C,k,y,10,c[49]),k=i(k,P,E,C,S,15,c[50]),C=i(C,k,P,E,f,21,c[51]),E=i(E,C,k,P,_,6,c[52]),P=i(P,E,C,k,l,10,c[53]),k=i(k,P,E,C,v,15,c[54]),C=i(C,k,P,E,a,21,c[55]),E=i(E,C,k,P,g,6,c[56]),P=i(P,E,C,k,w,10,c[57]),k=i(k,P,E,C,d,15,c[58]),C=i(C,k,P,E,x,21,c[59]),E=i(E,C,k,P,h,6,c[60]),P=i(P,E,C,k,b,10,c[61]),k=i(k,P,E,C,p,15,c[62]),C=i(C,k,P,E,m,21,c[63]);s[0]=s[0]+E|0,s[1]=s[1]+C|0,s[2]=s[2]+k|0,s[3]=s[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=a._createHelper(s),o.HmacMD5=a._createHmacHelper(s)}(Math),function(){var e=CryptoJS,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,i=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),o=r.create(),s=o.words,u=n.keySize,n=n.iterations;s.length<u;){a&&i.update(a);var a=i.update(e).finalize(t);i.reset();for(var c=1;n>c;c++)a=i.finalize(a),i.reset();o.concat(a)}return o.sigBytes=4*u,o}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),CryptoJS.lib.Cipher||function(e){var t=CryptoJS,n=t.lib,r=n.Base,i=n.WordArray,o=n.BufferedBlockAlgorithm,s=t.enc.Base64,u=t.algo.EvpKDF,a=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?d:f).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?d:f).decrypt(e,t,n,r)}}}});n.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=t.mode={},p=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;r>o;o++)t[n+o]^=i[o]},l=(n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;p.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),p.call(this,e,t,r),this._prevBlock=i}}),c=c.CBC=l,l=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;n>s;s+=4)o.push(r);n=i.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=a.extend({cfg:a.cfg.extend({mode:c,padding:l}),reset:function(){a.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},f=n.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=u.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},d=n.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=f.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,f.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],o=[],s=[],u=[],a=[],c=[],p=[],l=[],h=[],f=[],d=0;256>d;d++)f[d]=128>d?d<<1:d<<1^283;for(var y=0,g=0,d=0;256>d;d++){var m=g^g<<1^g<<2^g<<3^g<<4,m=m>>>8^255&m^99;r[y]=m,i[m]=y;var v=f[y],b=f[v],_=f[b],x=257*f[m]^16843008*m;o[y]=x<<24|x>>>8,s[y]=x<<16|x>>>16,u[y]=x<<8|x>>>24,a[y]=x,x=16843009*_^65537*b^257*v^16843008*y,c[m]=x<<24|x>>>8,p[m]=x<<16|x>>>16,l[m]=x<<8|x>>>24,h[m]=x,y?(y=v^f[f[f[_^v]]],g^=f[f[g]]):y=g=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;e>o;o++)if(n>o)i[o]=t[o];else{var s=i[o-1];o%n?n>6&&4==o%n&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=s<<8|s>>>24,s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=S[o/n|0]<<24),i[o]=i[o-n]^s}for(t=this._invKeySchedule=[],n=0;e>n;n++)o=e-n,s=n%4?i[o]:i[o-4],t[n]=4>n||4>=o?s:c[r[s>>>24]]^p[r[s>>>16&255]]^l[r[s>>>8&255]]^h[r[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,u,a,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,p,l,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,u){for(var a=this._nRounds,c=e[t]^n[0],p=e[t+1]^n[1],l=e[t+2]^n[2],h=e[t+3]^n[3],f=4,d=1;a>d;d++)var y=r[c>>>24]^i[p>>>16&255]^o[l>>>8&255]^s[255&h]^n[f++],g=r[p>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&c]^n[f++],m=r[l>>>24]^i[h>>>16&255]^o[c>>>8&255]^s[255&p]^n[f++],h=r[h>>>24]^i[c>>>16&255]^o[p>>>8&255]^s[255&l]^n[f++],c=y,p=g,l=m;y=(u[c>>>24]<<24|u[p>>>16&255]<<16|u[l>>>8&255]<<8|u[255&h])^n[f++],g=(u[p>>>24]<<24|u[l>>>16&255]<<16|u[h>>>8&255]<<8|u[255&c])^n[f++],m=(u[l>>>24]<<24|u[h>>>16&255]<<16|u[c>>>8&255]<<8|u[255&p])^n[f++],h=(u[h>>>24]<<24|u[c>>>16&255]<<16|u[p>>>8&255]<<8|u[255&l])^n[f++],e[t]=y,e[t+1]=g,e[t+2]=m,e[t+3]=h},keySize:8});e.AES=t._createHelper(n)}(),CryptoJS.mode.ECB=function(){var e=CryptoJS.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}()}).call(exports,__webpack_require__(43)(module))},function(e,t,n){(function(e){!function(n){function r(){for(var e=0;e<E.length;e++)E[e][0](E[e][1]);E=[],m=!1}function i(e,t){E.push([e,t]),m||(m=!0,w(r,0))}function o(e,t){function n(e){a(t,e)}function r(e){p(t,e)}try{e(n,r)}catch(i){r(i)}}function s(e){var t=e.owner,n=t.state_,r=t.data_,i=e[n],o=e.then;if("function"==typeof i){n=_;try{r=i(r)}catch(s){p(o,s)}}u(o,r)||(n===_&&a(o,r),n===x&&p(o,r))}function u(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(r){n||(n=!0,t!==r?a(e,r):c(e,r))},function(t){n||(n=!0,p(e,t))}),!0}}catch(i){return n||p(e,i),!0}return!1}function a(e,t){e!==t&&u(e,t)||c(e,t)}function c(e,t){e.state_===v&&(e.state_=b,e.data_=t,i(h,e))}function p(e,t){e.state_===v&&(e.state_=b,e.data_=t,i(f,e))}function l(e){e.then_=e.then_.forEach(s)}function h(e){e.state_=_,l(e)}function f(e){e.state_=x,l(e)}function d(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof d==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],o(e,this)}var y=n.Promise,g=y&&"resolve"in y&&"reject"in y&&"all"in y&&"race"in y&&function(){var e;return new y(function(t){e=t}),"function"==typeof e}();"undefined"!=typeof t&&t?t.Promise=d||y:g||(n.Promise=d);var m,v="pending",b="sealed",_="fulfilled",x="rejected",S=function(){},w="undefined"!=typeof e?e:setTimeout,E=[];d.prototype={constructor:d,state_:v,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(S),fulfilled:e,rejected:t};return this.state_===_||this.state_===x?i(s,n):this.then_.push(n),n.then},"catch":function(e){return this.then(null,e)}},d.all=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new t(function(t,n){function r(e){return s++,function(n){o[e]=n,--s||t(o)}}for(var i,o=[],s=0,u=0;u<e.length;u++)i=e[u],i&&"function"==typeof i.then?i.then(r(u),n):o[u]=i;s||t(o)})},d.race=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new t(function(t,n){for(var r,i=0;i<e.length;i++)r=e[i],r&&"function"==typeof r.then?r.then(t,n):t(r)})},d.resolve=function(e){var t=this;return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},d.reject=function(e){var t=this;return new t(function(t,n){n(e)})}}(new Function("return this")())}).call(t,n(42).setImmediate)},function(e,t,n){function r(e){return new a(e)}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(44),s=n(6),u=n(45),a=function(e){function t(t){e.call(this,t),this.async=!0,this.method="",this.url="",this.query=null,this.body={},this.context=t,this.xhr=null,this.observer=s.$get(t)}return i(t,e),t.prototype.isLoaded=function(){return!!this.xhr},t.prototype.setOptions=function(e){return e=e||{},"body"in e||!e.post||(e.body=e.post),"query"in e||!e.get||(e.query=e.get),"method"in e&&(this.method=e.method),"url"in e&&(this.url=e.url),"query"in e&&(this.query=e.query),"body"in e&&(this.body=e.body),"headers"in e&&this.setHeaders(e.headers),"async"in e&&(this.async=!!e.async),this},t.prototype.checkOptions=function(){if(!this.url)throw new Error("Url is not defined");if(this.hasHeader("Accept")||this.setHeader("Accept",o.Headers.jsonContentType),this.hasHeader("Content-Type")||this.setHeader("Content-Type",o.Headers.jsonContentType),this.method=this.method?this.method.toUpperCase():"GET",["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"].indexOf(this.method)<0)throw new Error("Method has wrong value");return this},t.prototype.getEncodedBody=function(){return"GET"===this.method?null:"string"==typeof this.body?this.body:this.isJson()?JSON.stringify(this.body):this.isUrlEncoded()?this.utils.queryStringify(this.body):this.body},t.prototype.send=function(){var e=this;this.observer.emit(this.observer.events.beforeRequest,this);var t=new(this.context.getPromise())(function(t,n){e.checkOptions();var r=e.getXHR(),i=e.url+(e.query?(e.url.indexOf("?")>-1?"&":"?")+e.utils.queryStringify(e.query):"");r.open(e.method,i,e.async),r.withCredentials=!0,r.onload=function(){var i=u.$get(e.context,r.status,r.statusText,r.responseText,r.getAllResponseHeaders());if(i.error){var o=i.error;o.ajax=i,o.response=i,o.request=e,n(o)}else t(i)},r.onerror=function(t){var r=new Error("The request cannot be sent"+(t?" ("+t.toString()+")":""));r.request=e,r.response=null,r.ajax=null,n(r)},e.utils.forEach(e.headers,function(e,t){e&&r.setRequestHeader(t,e)}),r.send(e.getEncodedBody()),e.xhr=r});return t.then(function(t){return e.observer.emit(e.observer.events.requestSuccess,t,e),t})["catch"](function(t){throw e.observer.emit(e.observer.events.requestError,t),t})},t.prototype.getXHR=function(){return this.context.getXHR()},t.prototype.destroy=function(){this.xhr&&this.xhr.abort()},t}(o.Headers);t.Request=a,t.$get=r},function(e,t,n){(function(e,r){function i(e,t){this._id=e,this._clearFn=t}var o=n(46).nextTick,s=Function.prototype.apply,u=Array.prototype.slice,a={},c=0;t.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=c++,r=arguments.length<2?!1:u.call(arguments,1);return a[n]=!0,o(function(){a[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete a[e]}}).call(t,n(42).setImmediate,n(42).clearImmediate)},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){var r=n(16),i=function(){function e(e){this.headers={},this.context=e,this.utils=r.$get(e)}return e.prototype.setHeader=function(e,t){return this.headers[e.toLowerCase()]=t,this},e.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},e.prototype.hasHeader=function(e){return e.toLowerCase()in this.headers},e.prototype.setHeaders=function(e){var t=this;return this.utils.forEach(e,function(e,n){t.setHeader(n,e)}),this},e.prototype.isContentType=function(e){return this.getContentType().indexOf(e)>-1},e.prototype.setContentType=function(t){return this.setHeader(e.contentType,t),this},e.prototype.getContentType=function(){return this.getHeader(e.contentType)||""},e.prototype.isMultipart=function(){return this.isContentType(e.multipartContentType)},e.prototype.isUrlEncoded=function(){return this.isContentType(e.urlencodedContentType)},e.prototype.isJson=function(){return this.isContentType(e.jsonContentType)},e.contentType="Content-Type",e.jsonContentType="application/json",e.multipartContentType="multipart/mixed",e.urlencodedContentType="application/x-www-form-urlencoded",e}();t.Headers=i},function(e,t,n){function r(e,t,n,r,i){return new u(e,t,n,r,i)}var i=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=n(44),s=n(11),u=function(e){function t(n,r,i,u,a){var c=this;if(e.call(this,n),this.log=s.$get(n),"string"==typeof u&&(u=u.replace(/\r/g,""),!a)){var p=u.split(t.bodySeparator);a=p.length>1?p.shift():{},u=p.join(t.bodySeparator)}this.data=null,this.json=null,this.responses=[],this.error=null,1223==r&&(r=204),this.status=r,this.statusText=i,this.body=u;try{if("string"==typeof a?(a||"").split("\n").forEach(function(e){if(e){var n=e.split(t.headerSeparator),r=n.shift().trim();c.setHeader(r,n.join(t.headerSeparator).trim())}}):this.setHeaders(a),this.hasHeader(o.Headers.contentType)||this.setHeader(o.Headers.contentType,o.Headers.jsonContentType),this.isJson()&&this.body&&"string"==typeof this.body)this.json=JSON.parse(this.body),this.data=this.json,this.checkStatus()||(this.error=new Error(this.getError()));else if(this.isMultipart()){var l=this.getContentType().match(/boundary=([^;]+)/i)[1],h=this.body.split(t.boundarySeparator+l);""===h[0].trim()&&h.shift(),h[h.length-1].trim()==t.boundarySeparator&&h.pop();var f=new t(this.context,this.status,"",h.shift());this.responses=h.map(function(e,n){var r=f.data.response[n].status;return new t(c.context,r,"",e)}),this.data=this.responses}else this.data=this.body}catch(d){this.log.error("Response.parseResponse(): Unable to parse data"),this.log.error(d.stack||d),this.log.error(this.body),this.error=d}}return i(t,e),t.prototype.isUnauthorized=function(){return 401==this.status},t.prototype.checkStatus=function(){return this.status>=200&&this.status<300},t.prototype.getError=function(){return this.data.message||this.data.error_description||this.data.description||"Unknown error"},t.boundarySeparator="--",t.headerSeparator=":",t.bodySeparator="\n\n",t}(o.Headers);t.Response=u,t.$get=r},function(e){function t(){if(!o){o=!0;for(var e,t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}o=!1}}function n(){}var r=e.exports={},i=[],o=!1;r.nextTick=function(e){i.push(e),o||setTimeout(t,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}])});
//# sourceMappingURL=rc-sdk-bundle.min.js.map